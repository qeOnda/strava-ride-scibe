"use strict";var LN=Object.create;var hs=Object.defineProperty;var $N=Object.getOwnPropertyDescriptor;var HN=Object.getOwnPropertyNames;var qN=Object.getPrototypeOf,GN=Object.prototype.hasOwnProperty;var jN=(e,t,r)=>t in e?hs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var v=(e,t)=>()=>(e&&(t=e(e=0)),t);var I=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ge=(e,t)=>{for(var r in t)hs(e,r,{get:t[r],enumerable:!0})},dy=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of HN(t))!GN.call(e,o)&&o!==r&&hs(e,o,{get:()=>t[o],enumerable:!(n=$N(t,o))||n.enumerable});return e};var C=(e,t,r)=>(r=e!=null?LN(qN(e)):{},dy(t||!e||!e.__esModule?hs(r,"default",{value:e,enumerable:!0}):r,e)),K=e=>dy(hs({},"__esModule",{value:!0}),e);var u=(e,t,r)=>jN(e,typeof t!="symbol"?t+"":t,r);var Cr=I(ue=>{"use strict";ue.HttpAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(ue.HttpAuthLocation||(ue.HttpAuthLocation={}));ue.HttpApiKeyAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(ue.HttpApiKeyAuthLocation||(ue.HttpApiKeyAuthLocation={}));ue.EndpointURLScheme=void 0;(function(e){e.HTTP="http",e.HTTPS="https"})(ue.EndpointURLScheme||(ue.EndpointURLScheme={}));ue.AlgorithmId=void 0;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(ue.AlgorithmId||(ue.AlgorithmId={}));var zN=e=>{let t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>ue.AlgorithmId.SHA256,checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>ue.AlgorithmId.MD5,checksumConstructor:()=>e.md5}),{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},VN=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},WN=e=>zN(e),KN=e=>VN(e);ue.FieldPosition=void 0;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(ue.FieldPosition||(ue.FieldPosition={}));var YN="__smithy_context";ue.IniSectionType=void 0;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(ue.IniSectionType||(ue.IniSectionType={}));ue.RequestHandlerProtocol=void 0;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(ue.RequestHandlerProtocol||(ue.RequestHandlerProtocol={}));ue.SMITHY_CONTEXT_KEY=YN;ue.getDefaultClientConfiguration=WN;ue.resolveDefaultRuntimeConfig=KN});var re=I(Ar=>{"use strict";var XN=Cr(),QN=e=>({setHttpHandler(t){e.httpHandler=t},httpHandler(){return e.httpHandler},updateHttpClientConfig(t,r){e.httpHandler?.updateHttpClientConfig(t,r)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}),JN=e=>({httpHandler:e.httpHandler()}),Td=class{constructor({name:t,kind:r=XN.FieldPosition.HEADER,values:n=[]}){u(this,"name");u(this,"kind");u(this,"values");this.name=t,this.kind=r,this.values=n}add(t){this.values.push(t)}set(t){this.values=t}remove(t){this.values=this.values.filter(r=>r!==t)}toString(){return this.values.map(t=>t.includes(",")||t.includes(" ")?`"${t}"`:t).join(", ")}get(){return this.values}},xd=class{constructor({fields:t=[],encoding:r="utf-8"}){u(this,"entries",{});u(this,"encoding");t.forEach(this.setField.bind(this)),this.encoding=r}setField(t){this.entries[t.name.toLowerCase()]=t}getField(t){return this.entries[t.toLowerCase()]}removeField(t){delete this.entries[t.toLowerCase()]}getByType(t){return Object.values(this.entries).filter(r=>r.kind===t)}},Rd=class e{constructor(t){u(this,"method");u(this,"protocol");u(this,"hostname");u(this,"port");u(this,"path");u(this,"query");u(this,"headers");u(this,"username");u(this,"password");u(this,"fragment");u(this,"body");this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){let r=new e({...t,headers:{...t.headers}});return r.query&&(r.query=ZN(r.query)),r}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return e.clone(this)}};function ZN(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var Id=class{constructor(t){u(this,"statusCode");u(this,"reason");u(this,"headers");u(this,"body");this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function eD(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}Ar.Field=Td;Ar.Fields=xd;Ar.HttpRequest=Rd;Ar.HttpResponse=Id;Ar.getHttpHandlerExtensionConfiguration=QN;Ar.isValidHostname=eD;Ar.resolveHttpHandlerRuntimeConfig=JN});var yy=I(wn=>{"use strict";var fy=re();function tD(e){let t=e.signer,r=e.signer,n=Object.assign(e,{eventSigner:t,messageSigner:r}),o=n.eventStreamPayloadHandlerProvider(n);return Object.assign(n,{eventStreamPayloadHandler:o})}var py=e=>(t,r)=>async n=>{let{request:o}=n;return fy.HttpRequest.isInstance(o)?e.eventStreamPayloadHandler.handle(t,n,r):t(n)},my={tags:["EVENT_STREAM","SIGNATURE","HANDLE"],name:"eventStreamHandlingMiddleware",relation:"after",toMiddleware:"awsAuthMiddleware",override:!0},hy=e=>async t=>{let{request:r}=t;return fy.HttpRequest.isInstance(r)?(r.headers={...r.headers,"content-type":"application/vnd.amazon.eventstream","x-amz-content-sha256":"STREAMING-AWS4-HMAC-SHA256-EVENTS"},e({...t,request:r})):e(t)},gy={step:"build",tags:["EVENT_STREAM","HEADER","CONTENT_TYPE","CONTENT_SHA256"],name:"eventStreamHeaderMiddleware",override:!0},rD=e=>({applyToStack:t=>{t.addRelativeTo(py(e),my),t.add(hy,gy)}});wn.eventStreamHandlingMiddleware=py;wn.eventStreamHandlingMiddlewareOptions=my;wn.eventStreamHeaderMiddleware=hy;wn.eventStreamHeaderMiddlewareOptions=gy;wn.getEventStreamPlugin=rD;wn.resolveEventStreamConfig=tD});var lo=I(gs=>{"use strict";var nD=re();function oD(e){return e}var Ey=e=>t=>async r=>{if(!nD.HttpRequest.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:o=""}=e.requestHandler.metadata||{};if(o.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let s=n.hostname;n.port!=null&&(s+=`:${n.port}`),n.headers.host=s}return t(r)},Sy={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},sD=e=>({applyToStack:t=>{t.add(Ey(e),Sy)}});gs.getHostHeaderPlugin=sD;gs.hostHeaderMiddleware=Ey;gs.hostHeaderMiddlewareOptions=Sy;gs.resolveHostHeaderConfig=oD});var fo=I(Xi=>{"use strict";var _y=()=>(e,t)=>async r=>{try{let n=await e(r),{clientName:o,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:l}=a,m=c??t.inputFilterSensitiveLog,p=l??t.outputFilterSensitiveLog,{$metadata:h,...g}=n.output;return i?.info?.({clientName:o,commandName:s,input:m(r.input),output:p(g),metadata:h}),n}catch(n){let{clientName:o,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c}=a,l=c??t.inputFilterSensitiveLog;throw i?.error?.({clientName:o,commandName:s,input:l(r.input),error:n,metadata:n.$metadata}),n}},wy={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},iD=e=>({applyToStack:t=>{t.add(_y(),wy)}});Xi.getLoggerPlugin=iD;Xi.loggerMiddleware=_y;Xi.loggerMiddlewareOptions=wy});var vy={};Ge(vy,{InvokeStore:()=>Dd,InvokeStoreBase:()=>po});var ys,Pd,po,Od,Nd,Dd,Cy=v(()=>{ys={REQUEST_ID:Symbol.for("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol.for("_AWS_LAMBDA_X_RAY_TRACE_ID"),TENANT_ID:Symbol.for("_AWS_LAMBDA_TENANT_ID")},Pd=["true","1"].includes(process.env?.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA??"");Pd||(globalThis.awslambda=globalThis.awslambda||{});po=class{isProtectedKey(t){return Object.values(ys).includes(t)}getRequestId(){return this.get(ys.REQUEST_ID)??"-"}getXRayTraceId(){return this.get(ys.X_RAY_TRACE_ID)}getTenantId(){return this.get(ys.TENANT_ID)}};u(po,"PROTECTED_KEYS",ys);Od=class extends po{constructor(){super(...arguments);u(this,"currentContext")}getContext(){return this.currentContext}hasContext(){return this.currentContext!==void 0}get(r){return this.currentContext?.[r]}set(r,n){if(this.isProtectedKey(r))throw new Error(`Cannot modify protected Lambda context field: ${String(r)}`);this.currentContext=this.currentContext||{},this.currentContext[r]=n}run(r,n){this.currentContext=r;try{return n()}finally{this.currentContext=void 0}}},Nd=class e extends po{constructor(){super(...arguments);u(this,"als")}static async create(){let r=new e,n=await import("node:async_hooks");return r.als=new n.AsyncLocalStorage,r}getContext(){return this.als.getStore()}hasContext(){return this.als.getStore()!==void 0}get(r){return this.als.getStore()?.[r]}set(r,n){if(this.isProtectedKey(r))throw new Error(`Cannot modify protected Lambda context field: ${String(r)}`);let o=this.als.getStore();if(!o)throw new Error("No context available");o[r]=n}run(r,n){return this.als.run(r,n)}};(function(e){let t=null;async function r(){return t||(t=(async()=>{let o="AWS_LAMBDA_MAX_CONCURRENCY"in process.env?await Nd.create():new Od;return!Pd&&globalThis.awslambda?.InvokeStore?globalThis.awslambda.InvokeStore:(!Pd&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=o),o)})()),t}e.getInstanceAsync=r,e._testing=process.env.AWS_LAMBDA_BENCHMARK_MODE==="1"?{reset:()=>{t=null,globalThis.awslambda?.InvokeStore&&delete globalThis.awslambda.InvokeStore,globalThis.awslambda={}}}:void 0})(Dd||(Dd={}))});var Ay=I(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.recursionDetectionMiddleware=void 0;var aD=(Cy(),K(vy)),cD=re(),kd="X-Amzn-Trace-Id",uD="AWS_LAMBDA_FUNCTION_NAME",lD="_X_AMZN_TRACE_ID",dD=()=>e=>async t=>{let{request:r}=t;if(!cD.HttpRequest.isInstance(r))return e(t);let n=Object.keys(r.headers??{}).find(m=>m.toLowerCase()===kd.toLowerCase())??kd;if(r.headers.hasOwnProperty(n))return e(t);let o=process.env[uD],s=process.env[lD],c=(await aD.InvokeStore.getInstanceAsync())?.getXRayTraceId()??s,l=m=>typeof m=="string"&&m.length>0;return l(o)&&l(c)&&(r.headers[kd]=c),e({...t,request:r})};Qi.recursionDetectionMiddleware=dD});var mo=I(Ji=>{"use strict";var Md=Ay(),fD={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},pD=e=>({applyToStack:t=>{t.add(Md.recursionDetectionMiddleware(),fD)}});Ji.getRecursionDetectionPlugin=pD;Object.keys(Md).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ji,e)&&Object.defineProperty(Ji,e,{enumerable:!0,get:function(){return Md[e]}})})});var Bd,mD,by=v(()=>{Bd=C(Cr()),mD=e=>e[Bd.SMITHY_CONTEXT_KEY]||(e[Bd.SMITHY_CONTEXT_KEY]={})});var je=I(Fd=>{"use strict";var Ty=Cr(),hD=e=>e[Ty.SMITHY_CONTEXT_KEY]||(e[Ty.SMITHY_CONTEXT_KEY]={}),gD=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};Fd.getSmithyContext=hD;Fd.normalizeProvider=gD});var xy,Ry=v(()=>{xy=(e,t)=>{if(!t||t.length===0)return e;let r=[];for(let n of t)for(let o of e)o.schemeId.split("#")[1]===n&&r.push(o);for(let n of e)r.find(({schemeId:o})=>o===n.schemeId)||r.push(n);return r}});function yD(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}var Iy,Es,Zi=v(()=>{Iy=C(je());Ry();Es=(e,t)=>(r,n)=>async o=>{let s=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,n,o.input)),i=e.authSchemePreference?await e.authSchemePreference():[],a=xy(s,i),c=yD(e.httpAuthSchemes),l=(0,Iy.getSmithyContext)(n),m=[];for(let p of a){let h=c.get(p.schemeId);if(!h){m.push(`HttpAuthScheme \`${p.schemeId}\` was not enabled for this service.`);continue}let g=h.identityProvider(await t.identityProviderConfigProvider(e));if(!g){m.push(`HttpAuthScheme \`${p.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:S={},signingProperties:b={}}=p.propertiesExtractor?.(e,n)||{};p.identityProperties=Object.assign(p.identityProperties||{},S),p.signingProperties=Object.assign(p.signingProperties||{},b),l.selectedHttpAuthScheme={httpAuthOption:p,identity:await g(p.identityProperties),signer:h.signer};break}if(!l.selectedHttpAuthScheme)throw new Error(m.join(`
`));return r(o)}});var Py,vn,Oy=v(()=>{Zi();Py={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},vn=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Es(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),Py)}})});var Ld=I(ho=>{"use strict";var ED=re(),Ny=(e,t)=>(r,n)=>async o=>{let{response:s}=await r(o);try{let i=await t(s,e);return{response:s,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:s,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{i.message+=`
  `+a}catch{!n.logger||n.logger?.constructor?.name==="NoOpLogger"?console.warn(a):n.logger?.warn?.(a)}typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText);try{if(ED.HttpResponse.isInstance(s)){let{headers:c={}}=s,l=Object.entries(c);i.$metadata={httpStatusCode:s.statusCode,requestId:Ud(/^x-[\w-]+-request-?id$/,l),extendedRequestId:Ud(/^x-[\w-]+-id-2$/,l),cfId:Ud(/^x-[\w-]+-cf-id$/,l)}}}catch{}}throw i}},Ud=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1],Dy=(e,t)=>(r,n)=>async o=>{let s=e,i=n.endpointV2?.url&&s.urlParser?async()=>s.urlParser(n.endpointV2.url):s.endpoint;if(!i)throw new Error("No valid endpoint provider available.");let a=await t(o.input,{...e,endpoint:i});return r({...o,request:a})},ky={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},My={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function SD(e,t,r){return{applyToStack:n=>{n.add(Ny(e,r),ky),n.add(Dy(e,t),My)}}}ho.deserializerMiddleware=Ny;ho.deserializerMiddlewareOption=ky;ho.getSerdePlugin=SD;ho.serializerMiddleware=Dy;ho.serializerMiddlewareOption=My});var By,Fy,_D,Uy=v(()=>{By=C(Ld());Zi();Fy={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:By.serializerMiddlewareOption.name},_D=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Es(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),Fy)}})});var Ly=v(()=>{Zi();Oy();Uy()});var $y,Hy,wD,vD,$d,Hd=v(()=>{$y=C(re()),Hy=C(je()),wD=e=>t=>{throw t},vD=(e,t)=>{},$d=e=>(t,r)=>async n=>{if(!$y.HttpRequest.isInstance(n.request))return t(n);let s=(0,Hy.getSmithyContext)(r).selectedHttpAuthScheme;if(!s)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:a,signer:c}=s,l=await t({...n,request:await c.sign(n.request,a,i)}).catch((c.errorHandler||wD)(i));return(c.successHandler||vD)(l.response,i),l}});var qy,Cn,Gy=v(()=>{Hd();qy={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},Cn=e=>({applyToStack:t=>{t.addRelativeTo($d(e),qy)}})});var jy=v(()=>{Hd();Gy()});var br,zy=v(()=>{br=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t}});function Vy(e,t,r,n,o){return async function*(i,a,...c){let l=a,m=i.startingToken??l[r],p=!0,h;for(;p;){if(l[r]=m,o&&(l[o]=l[o]??i.pageSize),i.client instanceof e)h=await CD(t,i.client,a,i.withCommand,...c);else throw new Error(`Invalid client, expected instance of ${e.name}`);yield h;let g=m;m=AD(h,n),p=!!(m&&(!i.stopOnSameToken||m!==g))}return void 0}}var CD,AD,Wy=v(()=>{CD=async(e,t,r,n=s=>s,...o)=>{let s=new e(r);return s=n(s)??s,await t.send(s,...o)};AD=(e,t)=>{let r=e,n=t.split(".");for(let o of n){if(!r||typeof r!="object")return;r=r[o]}return r}});var qd=I(Ky=>{"use strict";var bD=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";Ky.isArrayBuffer=bD});var go=I(jd=>{"use strict";var TD=qd(),Gd=require("buffer"),xD=(e,t=0,r=e.byteLength-t)=>{if(!TD.isArrayBuffer(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Gd.Buffer.from(e,t,r)},RD=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Gd.Buffer.from(e,t):Gd.Buffer.from(e)};jd.fromArrayBuffer=xD;jd.fromString=RD});var Yy=I(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.fromBase64=void 0;var ID=go(),PD=/^[A-Za-z0-9+/]*={0,2}$/,OD=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!PD.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,ID.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};ea.fromBase64=OD});var Ce=I(ta=>{"use strict";var Xy=go(),Qy=e=>{let t=Xy.fromString(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},ND=e=>typeof e=="string"?Qy(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),DD=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return Xy.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength).toString("utf8")};ta.fromUtf8=Qy;ta.toUint8Array=ND;ta.toUtf8=DD});var Jy=I(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});ra.toBase64=void 0;var kD=go(),MD=Ce(),BD=e=>{let t;if(typeof e=="string"?t=(0,MD.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,kD.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};ra.toBase64=BD});var Ae=I(Ss=>{"use strict";var Zy=Yy(),eE=Jy();Object.keys(Zy).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ss,e)&&Object.defineProperty(Ss,e,{enumerable:!0,get:function(){return Zy[e]}})});Object.keys(eE).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ss,e)&&Object.defineProperty(Ss,e,{enumerable:!0,get:function(){return eE[e]}})})});var Vd=I(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});na.ChecksumStream=void 0;var FD=Ae(),UD=require("stream"),zd=class extends UD.Duplex{constructor({expectedChecksum:r,checksum:n,source:o,checksumSourceLocation:s,base64Encoder:i}){super();u(this,"expectedChecksum");u(this,"checksumSourceLocation");u(this,"checksum");u(this,"source");u(this,"base64Encoder");if(typeof o.pipe=="function")this.source=o;else throw new Error(`@smithy/util-stream: unsupported source type ${o?.constructor?.name??o} in ChecksumStream.`);this.base64Encoder=i??FD.toBase64,this.expectedChecksum=r,this.checksum=n,this.checksumSourceLocation=s,this.source.pipe(this)}_read(r){}_write(r,n,o){try{this.checksum.update(r),this.push(r)}catch(s){return o(s)}return o()}async _final(r){try{let n=await this.checksum.digest(),o=this.base64Encoder(n);if(this.expectedChecksum!==o)return r(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${o}" in response header "${this.checksumSourceLocation}".`))}catch(n){return r(n)}return this.push(null),r()}};na.ChecksumStream=zd});var Tr=I(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.isBlob=yo.isReadableStream=void 0;var LD=e=>typeof ReadableStream=="function"&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream);yo.isReadableStream=LD;var $D=e=>typeof Blob=="function"&&(e?.constructor?.name===Blob.name||e instanceof Blob);yo.isBlob=$D});var tE=I(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});oa.ChecksumStream=void 0;var HD=typeof ReadableStream=="function"?ReadableStream:function(){},Wd=class extends HD{};oa.ChecksumStream=Wd});var rE=I(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.createChecksumStream=void 0;var qD=Ae(),GD=Tr(),jD=tE(),zD=({expectedChecksum:e,checksum:t,source:r,checksumSourceLocation:n,base64Encoder:o})=>{if(!(0,GD.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let s=o??qD.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let i=new TransformStream({start(){},async transform(c,l){t.update(c),l.enqueue(c)},async flush(c){let l=await t.digest(),m=s(l);if(e!==m){let p=new Error(`Checksum mismatch: expected "${e}" but received "${m}" in response header "${n}".`);c.error(p)}else c.terminate()}});r.pipeThrough(i);let a=i.readable;return Object.setPrototypeOf(a,jD.ChecksumStream.prototype),a};sa.createChecksumStream=zD});var nE=I(Kd=>{"use strict";Object.defineProperty(Kd,"__esModule",{value:!0});Kd.createChecksumStream=YD;var VD=Tr(),WD=Vd(),KD=rE();function YD(e){return typeof ReadableStream=="function"&&(0,VD.isReadableStream)(e.source)?(0,KD.createChecksumStream)(e):new WD.ChecksumStream(e)}});var Xd=I(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.ByteArrayCollector=void 0;var Yd=class{constructor(t){u(this,"allocByteArray");u(this,"byteLength",0);u(this,"byteArrays",[]);this.allocByteArray=t}push(t){this.byteArrays.push(t),this.byteLength+=t.byteLength}flush(){if(this.byteArrays.length===1){let n=this.byteArrays[0];return this.reset(),n}let t=this.allocByteArray(this.byteLength),r=0;for(let n=0;n<this.byteArrays.length;++n){let o=this.byteArrays[n];t.set(o,r),r+=o.byteLength}return this.reset(),t}reset(){this.byteArrays=[],this.byteLength=0}};ia.ByteArrayCollector=Yd});var aE=I(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.createBufferedReadable=void 0;rr.createBufferedReadableStream=oE;rr.merge=sE;rr.flush=aa;rr.sizeOf=Eo;rr.modeOf=iE;var XD=Xd();function oE(e,t,r){let n=e.getReader(),o=!1,s=0,i=["",new XD.ByteArrayCollector(l=>new Uint8Array(l))],a=-1,c=async l=>{let{value:m,done:p}=await n.read(),h=m;if(p){if(a!==-1){let g=aa(i,a);Eo(g)>0&&l.enqueue(g)}l.close()}else{let g=iE(h,!1);if(a!==g&&(a>=0&&l.enqueue(aa(i,a)),a=g),a===-1){l.enqueue(h);return}let S=Eo(h);s+=S;let b=Eo(i[a]);if(S>=t&&b===0)l.enqueue(h);else{let x=sE(i,a,h);!o&&s>t*2&&(o=!0,r?.warn(`@smithy/util-stream - stream chunk size ${S} is below threshold of ${t}, automatically buffering.`)),x>=t?l.enqueue(aa(i,a)):await c(l)}}};return new ReadableStream({pull:c})}rr.createBufferedReadable=oE;function sE(e,t,r){switch(t){case 0:return e[0]+=r,Eo(e[0]);case 1:case 2:return e[t].push(r),Eo(e[t])}}function aa(e,t){switch(t){case 0:let r=e[0];return e[0]="",r;case 1:case 2:return e[t].flush()}throw new Error(`@smithy/util-stream - invalid index ${t} given to flush()`)}function Eo(e){return e?.byteLength??e?.length??0}function iE(e,t=!0){return t&&typeof Buffer<"u"&&e instanceof Buffer?2:e instanceof Uint8Array?1:typeof e=="string"?0:-1}});var uE=I(Qd=>{"use strict";Object.defineProperty(Qd,"__esModule",{value:!0});Qd.createBufferedReadable=ZD;var QD=require("node:stream"),cE=Xd(),nr=aE(),JD=Tr();function ZD(e,t,r){if((0,JD.isReadableStream)(e))return(0,nr.createBufferedReadableStream)(e,t,r);let n=new QD.Readable({read(){}}),o=!1,s=0,i=["",new cE.ByteArrayCollector(c=>new Uint8Array(c)),new cE.ByteArrayCollector(c=>Buffer.from(new Uint8Array(c)))],a=-1;return e.on("data",c=>{let l=(0,nr.modeOf)(c,!0);if(a!==l&&(a>=0&&n.push((0,nr.flush)(i,a)),a=l),a===-1){n.push(c);return}let m=(0,nr.sizeOf)(c);s+=m;let p=(0,nr.sizeOf)(i[a]);if(m>=t&&p===0)n.push(c);else{let h=(0,nr.merge)(i,a,c);!o&&s>t*2&&(o=!0,r?.warn(`@smithy/util-stream - stream chunk size ${m} is below threshold of ${t}, automatically buffering.`)),h>=t&&n.push((0,nr.flush)(i,a))}}),e.on("end",()=>{if(a!==-1){let c=(0,nr.flush)(i,a);(0,nr.sizeOf)(c)>0&&n.push(c)}n.push(null)}),n}});var lE=I(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.getAwsChunkedEncodingStream=void 0;var ek=require("stream"),tk=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:o,checksumLocationName:s,streamHasher:i}=t,a=r!==void 0&&o!==void 0&&s!==void 0&&i!==void 0,c=a?i(o,e):void 0,l=new ek.Readable({read:()=>{}});return e.on("data",m=>{let p=n(m)||0;l.push(`${p.toString(16)}\r
`),l.push(m),l.push(`\r
`)}),e.on("end",async()=>{if(l.push(`0\r
`),a){let m=r(await c);l.push(`${s}:${m}\r
`),l.push(`\r
`)}l.push(null)}),l};ca.getAwsChunkedEncodingStream=tk});var dE=I(Jd=>{"use strict";Object.defineProperty(Jd,"__esModule",{value:!0});Jd.headStream=rk;async function rk(e,t){let r=0,n=[],o=e.getReader(),s=!1;for(;!s;){let{done:c,value:l}=await o.read();if(l&&(n.push(l),r+=l?.byteLength??0),r>=t)break;s=c}o.releaseLock();let i=new Uint8Array(Math.min(t,r)),a=0;for(let c of n){if(c.byteLength>i.byteLength-a){i.set(c.subarray(0,i.byteLength-a),a);break}else i.set(c,a);a+=c.length}return i}});var fE=I(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});ua.headStream=void 0;var nk=require("stream"),ok=dE(),sk=Tr(),ik=(e,t)=>(0,sk.isReadableStream)(e)?(0,ok.headStream)(e,t):new Promise((r,n)=>{let o=new Zd;o.limit=t,e.pipe(o),e.on("error",s=>{o.end(),n(s)}),o.on("error",n),o.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.buffers));r(s)})});ua.headStream=ik;var Zd=class extends nk.Writable{constructor(){super(...arguments);u(this,"buffers",[]);u(this,"limit",1/0);u(this,"bytesBuffered",0)}_write(r,n,o){if(this.buffers.push(r),this.bytesBuffered+=r.byteLength??0,this.bytesBuffered>=this.limit){let s=this.bytesBuffered-this.limit,i=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=i.subarray(0,i.byteLength-s),this.emit("finish")}o()}}});var tf=I(ef=>{"use strict";var pE=e=>encodeURIComponent(e).replace(/[!'()*]/g,ak),ak=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,ck=e=>e.split("/").map(pE).join("/");ef.escapeUri=pE;ef.escapeUriPath=ck});var la=I(mE=>{"use strict";var rf=tf();function uk(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=rf.escapeUri(r),Array.isArray(n))for(let o=0,s=n.length;o<s;o++)t.push(`${r}=${rf.escapeUri(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${rf.escapeUri(n)}`),t.push(o)}}return t.join("&")}mE.buildQueryString=uk});var xr=I(_s=>{"use strict";var EE=re(),SE=la(),da=require("http"),fa=require("https"),_E=require("stream"),nf=require("http2"),lk=["ECONNRESET","EPIPE","ETIMEDOUT"],wE=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t},ze={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},hE=1e3,dk=(e,t,r=0)=>{if(!r)return-1;let n=o=>{let s=ze.setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${r} ms.`),{name:"TimeoutError"}))},r-o),i=a=>{a?.connecting?a.on("connect",()=>{ze.clearTimeout(s)}):ze.clearTimeout(s)};e.socket?i(e.socket):e.on("socket",i)};return r<2e3?(n(0),0):ze.setTimeout(n.bind(null,hE),hE)},fk=(e,t,r=0,n,o)=>r?ze.setTimeout(()=>{let s=`@smithy/node-http-handler - [${n?"ERROR":"WARN"}] a request has exceeded the configured ${r} ms requestTimeout.`;if(n){let i=Object.assign(new Error(s),{name:"TimeoutError",code:"ETIMEDOUT"});e.destroy(i),t(i)}else s+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",o?.warn?.(s)},r):-1,pk=3e3,mk=(e,{keepAlive:t,keepAliveMsecs:r},n=pk)=>{if(t!==!0)return-1;let o=()=>{e.socket?e.socket.setKeepAlive(t,r||0):e.on("socket",s=>{s.setKeepAlive(t,r||0)})};return n===0?(o(),0):ze.setTimeout(o,n)},gE=3e3,hk=(e,t,r=0)=>{let n=o=>{let s=r-o,i=()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket timed out after ${r} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};e.socket?(e.socket.setTimeout(s,i),e.on("close",()=>e.socket?.removeListener("timeout",i))):e.setTimeout(s,i)};return 0<r&&r<6e3?(n(0),0):ze.setTimeout(n.bind(null,r===0?0:gE),gE)},yE=6e3;async function vE(e,t,r=yE,n=!1){let o=t.headers??{},s=o.Expect||o.expect,i=-1,a=!0;!n&&s==="100-continue"&&(a=await Promise.race([new Promise(c=>{i=Number(ze.setTimeout(()=>c(!0),Math.max(yE,r)))}),new Promise(c=>{e.on("continue",()=>{ze.clearTimeout(i),c(!0)}),e.on("response",()=>{ze.clearTimeout(i),c(!1)}),e.on("error",()=>{ze.clearTimeout(i),c(!1)})})])),a&&gk(e,t.body)}function gk(e,t){if(t instanceof _E.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}let r=t;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}e.end(Buffer.from(t));return}e.end()}var yk=0,of=class e{constructor(t){u(this,"config");u(this,"configProvider");u(this,"socketWarningTimestamp",0);u(this,"externalAgent",!1);u(this,"metadata",{handlerProtocol:"http/1.1"});this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(this.resolveDefaultConfig(o))}).catch(n):r(this.resolveDefaultConfig(t))})}static create(t){return typeof t?.handle=="function"?t:new e(t)}static checkSocketUsage(t,r,n=console){let{sockets:o,requests:s,maxSockets:i}=t;if(typeof i!="number"||i===1/0||Date.now()-15e3<r)return r;if(o&&s)for(let c in o){let l=o[c]?.length??0,m=s[c]?.length??0;if(l>=i&&m>=2*i)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${l} and ${m} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:n,socketTimeout:o,socketAcquisitionWarningTimeout:s,httpAgent:i,httpsAgent:a,throwOnRequestTimeout:c}=t||{},l=!0,m=50;return{connectionTimeout:n,requestTimeout:r,socketTimeout:o,socketAcquisitionWarningTimeout:s,throwOnRequestTimeout:c,httpAgent:i instanceof da.Agent||typeof i?.destroy=="function"?(this.externalAgent=!0,i):new da.Agent({keepAlive:l,maxSockets:m,...i}),httpsAgent:a instanceof fa.Agent||typeof a?.destroy=="function"?(this.externalAgent=!0,a):new fa.Agent({keepAlive:l,maxSockets:m,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:r,requestTimeout:n}={}){return this.config||(this.config=await this.configProvider),new Promise((o,s)=>{let i=this.config,a,c=[],l=async Q=>{await a,c.forEach(ze.clearTimeout),o(Q)},m=async Q=>{await a,c.forEach(ze.clearTimeout),s(Q)};if(r?.aborted){let Q=new Error("Request aborted");Q.name="AbortError",m(Q);return}let p=t.protocol==="https:",h=t.headers??{},g=(h.Expect??h.expect)==="100-continue",S=p?i.httpsAgent:i.httpAgent;g&&!this.externalAgent&&(S=new(p?fa.Agent:da.Agent)({keepAlive:!1,maxSockets:1/0})),c.push(ze.setTimeout(()=>{this.socketWarningTimestamp=e.checkSocketUsage(S,this.socketWarningTimestamp,i.logger)},i.socketAcquisitionWarningTimeout??(i.requestTimeout??2e3)+(i.connectionTimeout??1e3)));let b=SE.buildQueryString(t.query||{}),x;if(t.username!=null||t.password!=null){let Q=t.username??"",W=t.password??"";x=`${Q}:${W}`}let T=t.path;b&&(T+=`?${b}`),t.fragment&&(T+=`#${t.fragment}`);let O=t.hostname??"";O[0]==="["&&O.endsWith("]")?O=t.hostname.slice(1,-1):O=t.hostname;let D={headers:t.headers,host:O,method:t.method,path:T,port:t.port,agent:S,auth:x},$=(p?fa.request:da.request)(D,Q=>{let W=new EE.HttpResponse({statusCode:Q.statusCode||-1,reason:Q.statusMessage,headers:wE(Q.headers),body:Q});l({response:W})});if($.on("error",Q=>{lk.includes(Q.code)?m(Object.assign(Q,{name:"TimeoutError"})):m(Q)}),r){let Q=()=>{$.destroy();let W=new Error("Request aborted");W.name="AbortError",m(W)};if(typeof r.addEventListener=="function"){let W=r;W.addEventListener("abort",Q,{once:!0}),$.once("close",()=>W.removeEventListener("abort",Q))}else r.onabort=Q}let z=n??i.requestTimeout;c.push(dk($,m,i.connectionTimeout)),c.push(fk($,m,z,i.throwOnRequestTimeout,i.logger??console)),c.push(hk($,m,i.socketTimeout));let me=D.agent;typeof me=="object"&&"keepAlive"in me&&c.push(mk($,{keepAlive:me.keepAlive,keepAliveMsecs:me.keepAliveMsecs})),a=vE($,t,z,this.externalAgent).catch(Q=>(c.forEach(ze.clearTimeout),s(Q)))})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}},sf=class{constructor(t){u(this,"sessions",[]);this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}},af=class{constructor(t){u(this,"config");u(this,"sessionCache",new Map);if(this.config=t,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}lease(t,r){let n=this.getUrlString(t),o=this.sessionCache.get(n);if(o){let c=o.poll();if(c&&!this.config.disableConcurrency)return c}let s=nf.connect(n);this.config.maxConcurrency&&s.settings({maxConcurrentStreams:this.config.maxConcurrency},c=>{if(c)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+t.destination.toString())}),s.unref();let i=()=>{s.destroy(),this.deleteSession(n,s)};s.on("goaway",i),s.on("error",i),s.on("frameError",i),s.on("close",()=>this.deleteSession(n,s)),r.requestTimeout&&s.setTimeout(r.requestTimeout,i);let a=this.sessionCache.get(n)||new sf;return a.offerLast(s),this.sessionCache.set(n,a),s}deleteSession(t,r){let n=this.sessionCache.get(t);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(t,n))}release(t,r){let n=this.getUrlString(t);this.sessionCache.get(n)?.offerLast(r)}destroy(){for(let[t,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(t)}}setMaxConcurrentStreams(t){if(t&&t<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=t}setDisableConcurrentStreams(t){this.config.disableConcurrency=t}getUrlString(t){return t.destination.toString()}},cf=class e{constructor(t){u(this,"config");u(this,"configProvider");u(this,"metadata",{handlerProtocol:"h2"});u(this,"connectionManager",new af({}));this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(o||{})}).catch(n):r(t||{})})}static create(t){return typeof t?.handle=="function"?t:new e(t)}destroy(){this.connectionManager.destroy()}async handle(t,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:o,disableConcurrentStreams:s}=this.config,i=n??o;return new Promise((a,c)=>{let l=!1,m,p=async ae=>{await m,a(ae)},h=async ae=>{await m,c(ae)};if(r?.aborted){l=!0;let ae=new Error("Request aborted");ae.name="AbortError",h(ae);return}let{hostname:g,method:S,port:b,protocol:x,query:T}=t,O="";if(t.username!=null||t.password!=null){let ae=t.username??"",ye=t.password??"";O=`${ae}:${ye}@`}let D=`${x}//${O}${g}${b?`:${b}`:""}`,F={destination:new URL(D)},$=this.connectionManager.lease(F,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:s||!1}),z=ae=>{s&&this.destroySession($),l=!0,h(ae)},me=SE.buildQueryString(T||{}),Q=t.path;me&&(Q+=`?${me}`),t.fragment&&(Q+=`#${t.fragment}`);let W=$.request({...t.headers,[nf.constants.HTTP2_HEADER_PATH]:Q,[nf.constants.HTTP2_HEADER_METHOD]:S});if($.ref(),W.on("response",ae=>{let ye=new EE.HttpResponse({statusCode:ae[":status"]||-1,headers:wE(ae),body:W});l=!0,p({response:ye}),s&&($.close(),this.connectionManager.deleteSession(D,$))}),i&&W.setTimeout(i,()=>{W.close();let ae=new Error(`Stream timed out because of no activity for ${i} ms`);ae.name="TimeoutError",z(ae)}),r){let ae=()=>{W.close();let ye=new Error("Request aborted");ye.name="AbortError",z(ye)};if(typeof r.addEventListener=="function"){let ye=r;ye.addEventListener("abort",ae,{once:!0}),W.once("close",()=>ye.removeEventListener("abort",ae))}else r.onabort=ae}W.on("frameError",(ae,ye,uo)=>{z(new Error(`Frame type id ${ae} in stream id ${uo} has failed with code ${ye}.`))}),W.on("error",z),W.on("aborted",()=>{z(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${W.rstCode}.`))}),W.on("close",()=>{$.unref(),s&&$.destroy(),l||z(new Error("Unexpected error: http2 request did not get a response"))}),m=vE(W,t,i)})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(t){t.destroyed||t.destroy()}},uf=class extends _E.Writable{constructor(){super(...arguments);u(this,"bufferedBytes",[])}_write(r,n,o){this.bufferedBytes.push(r),o()}},Ek=e=>Sk(e)?_k(e):new Promise((t,r)=>{let n=new uf;e.pipe(n),e.on("error",o=>{n.end(),r(o)}),n.on("error",r),n.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.bufferedBytes));t(o)})}),Sk=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;async function _k(e){let t=[],r=e.getReader(),n=!1,o=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(t.push(c),o+=c.length),n=a}let s=new Uint8Array(o),i=0;for(let a of t)s.set(a,i),i+=a.length;return s}_s.DEFAULT_REQUEST_TIMEOUT=yk;_s.NodeHttp2Handler=cf;_s.NodeHttpHandler=of;_s.streamCollector=Ek});var df=I(ma=>{"use strict";var CE=re(),wk=la(),vk=Ae();function AE(e,t){return new Request(e,t)}function Ck(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{let n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",r(n)},e)})}var pa={supported:void 0},lf=class e{constructor(t){u(this,"config");u(this,"configProvider");typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),pa.supported===void 0&&(pa.supported=typeof Request<"u"&&"keepalive"in AE("https://[::1]"))}static create(t){return typeof t?.handle=="function"?t:new e(t)}destroy(){}async handle(t,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider);let o=n??this.config.requestTimeout,s=this.config.keepAlive===!0,i=this.config.credentials;if(r?.aborted){let O=new Error("Request aborted");return O.name="AbortError",Promise.reject(O)}let a=t.path,c=wk.buildQueryString(t.query||{});c&&(a+=`?${c}`),t.fragment&&(a+=`#${t.fragment}`);let l="";if(t.username!=null||t.password!=null){let O=t.username??"",D=t.password??"";l=`${O}:${D}@`}let{port:m,method:p}=t,h=`${t.protocol}//${l}${t.hostname}${m?`:${m}`:""}${a}`,g=p==="GET"||p==="HEAD"?void 0:t.body,S={body:g,headers:new Headers(t.headers),method:p,credentials:i};this.config?.cache&&(S.cache=this.config.cache),g&&(S.duplex="half"),typeof AbortController<"u"&&(S.signal=r),pa.supported&&(S.keepalive=s),typeof this.config.requestInit=="function"&&Object.assign(S,this.config.requestInit(t));let b=()=>{},x=AE(h,S),T=[fetch(x).then(O=>{let D=O.headers,F={};for(let z of D.entries())F[z[0]]=z[1];return O.body!=null?{response:new CE.HttpResponse({headers:F,reason:O.statusText,statusCode:O.status,body:O.body})}:O.blob().then(z=>({response:new CE.HttpResponse({headers:F,reason:O.statusText,statusCode:O.status,body:z})}))}),Ck(o)];return r&&T.push(new Promise((O,D)=>{let F=()=>{let $=new Error("Request aborted");$.name="AbortError",D($)};if(typeof r.addEventListener=="function"){let $=r;$.addEventListener("abort",F,{once:!0}),b=()=>$.removeEventListener("abort",F)}else r.onabort=F})),Promise.race(T).finally(b)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}},Ak=async e=>typeof Blob=="function"&&e instanceof Blob||e.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await e.arrayBuffer()):bk(e):Tk(e);async function bk(e){let t=await xk(e),r=vk.fromBase64(t);return new Uint8Array(r)}async function Tk(e){let t=[],r=e.getReader(),n=!1,o=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(t.push(c),o+=c.length),n=a}let s=new Uint8Array(o),i=0;for(let a of t)s.set(a,i),i+=a.length;return s}function xk(e){return new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let o=n.result??"",s=o.indexOf(","),i=s>-1?s+1:o.length;t(o.substring(i))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(e)})}ma.FetchHttpHandler=lf;ma.keepAliveSupport=pa;ma.streamCollector=Ak});var ws=I(pf=>{"use strict";var bE={},ff={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),bE[e]=t,ff[t]=e}function Rk(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in ff)t[r/2]=ff[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function Ik(e){let t="";for(let r=0;r<e.byteLength;r++)t+=bE[e[r]];return t}pf.fromHex=Rk;pf.toHex=Ik});var IE=I(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.sdkStreamMixin=void 0;var Pk=df(),Ok=Ae(),Nk=ws(),Dk=Ce(),TE=Tr(),xE="The stream has already been transformed.",kk=e=>{if(!RE(e)&&!(0,TE.isReadableStream)(e)){let o=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${o}`)}let t=!1,r=async()=>{if(t)throw new Error(xE);return t=!0,await(0,Pk.streamCollector)(e)},n=o=>{if(typeof o.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return o.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async o=>{let s=await r();if(o==="base64")return(0,Ok.toBase64)(s);if(o==="hex")return(0,Nk.toHex)(s);if(o===void 0||o==="utf8"||o==="utf-8")return(0,Dk.toUtf8)(s);if(typeof TextDecoder=="function")return new TextDecoder(o).decode(s);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(xE);if(t=!0,RE(e))return n(e);if((0,TE.isReadableStream)(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})};ha.sdkStreamMixin=kk;var RE=e=>typeof Blob=="function"&&e instanceof Blob});var OE=I(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.sdkStreamMixin=void 0;var Mk=xr(),Bk=go(),mf=require("stream"),Fk=IE(),PE="The stream has already been transformed.",Uk=e=>{if(!(e instanceof mf.Readable))try{return(0,Fk.sdkStreamMixin)(e)}catch{let o=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${o}`)}let t=!1,r=async()=>{if(t)throw new Error(PE);return t=!0,await(0,Mk.streamCollector)(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async n=>{let o=await r();return n===void 0||Buffer.isEncoding(n)?(0,Bk.fromArrayBuffer)(o.buffer,o.byteOffset,o.byteLength).toString(n):new TextDecoder(n).decode(o)},transformToWebStream:()=>{if(t)throw new Error(PE);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof mf.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return t=!0,mf.Readable.toWeb(e)}})};ga.sdkStreamMixin=Uk});var NE=I(hf=>{"use strict";Object.defineProperty(hf,"__esModule",{value:!0});hf.splitStream=Lk;async function Lk(e){return typeof e.stream=="function"&&(e=e.stream()),e.tee()}});var ME=I(gf=>{"use strict";Object.defineProperty(gf,"__esModule",{value:!0});gf.splitStream=Hk;var DE=require("stream"),$k=NE(),kE=Tr();async function Hk(e){if((0,kE.isReadableStream)(e)||(0,kE.isBlob)(e))return(0,$k.splitStream)(e);let t=new DE.PassThrough,r=new DE.PassThrough;return e.pipe(t),e.pipe(r),[t,r]}});var ya=I(be=>{"use strict";var BE=Ae(),FE=Ce(),UE=Vd(),LE=nE(),$E=uE(),HE=lE(),qE=fE(),GE=OE(),jE=ME(),zE=Tr(),yf=class e extends Uint8Array{static fromString(t,r="utf-8"){if(typeof t=="string")return r==="base64"?e.mutate(BE.fromBase64(t)):e.mutate(FE.fromUtf8(t));throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return t==="base64"?BE.toBase64(this):FE.toUtf8(this)}};be.Uint8ArrayBlobAdapter=yf;Object.keys(UE).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(be,e)&&Object.defineProperty(be,e,{enumerable:!0,get:function(){return UE[e]}})});Object.keys(LE).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(be,e)&&Object.defineProperty(be,e,{enumerable:!0,get:function(){return LE[e]}})});Object.keys($E).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(be,e)&&Object.defineProperty(be,e,{enumerable:!0,get:function(){return $E[e]}})});Object.keys(HE).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(be,e)&&Object.defineProperty(be,e,{enumerable:!0,get:function(){return HE[e]}})});Object.keys(qE).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(be,e)&&Object.defineProperty(be,e,{enumerable:!0,get:function(){return qE[e]}})});Object.keys(GE).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(be,e)&&Object.defineProperty(be,e,{enumerable:!0,get:function(){return GE[e]}})});Object.keys(jE).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(be,e)&&Object.defineProperty(be,e,{enumerable:!0,get:function(){return jE[e]}})});Object.keys(zE).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(be,e)&&Object.defineProperty(be,e,{enumerable:!0,get:function(){return zE[e]}})})});var Ea,ut,Sa=v(()=>{Ea=C(ya()),ut=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return Ea.Uint8ArrayBlobAdapter.mutate(e);if(!e)return Ea.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=t.streamCollector(e);return Ea.Uint8ArrayBlobAdapter.mutate(await r)}});function kt(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var _a=v(()=>{});var vt,Ef=v(()=>{vt=e=>typeof e=="function"?e():e});var vs,wa=v(()=>{vs=(e,t,r,n,o)=>({name:t,namespace:e,traits:r,input:n,output:o})});var VE,WE,KE,Sf,YE=v(()=>{VE=C(re()),WE=C(je());wa();KE=e=>(t,r)=>async n=>{let{response:o}=await t(n),{operationSchema:s}=(0,WE.getSmithyContext)(r),[,i,a,c,l,m]=s??[];try{let p=await e.protocol.deserializeResponse(vs(i,a,c,l,m),{...e,...r},o);return{response:o,output:p}}catch(p){if(Object.defineProperty(p,"$response",{value:o,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in p)){let h="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{p.message+=`
  `+h}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(h):r.logger?.warn?.(h)}typeof p.$responseBodyText<"u"&&p.$response&&(p.$response.body=p.$responseBodyText);try{if(VE.HttpResponse.isInstance(o)){let{headers:g={}}=o,S=Object.entries(g);p.$metadata={httpStatusCode:o.statusCode,requestId:Sf(/^x-[\w-]+-request-?id$/,S),extendedRequestId:Sf(/^x-[\w-]+-id-2$/,S),cfId:Sf(/^x-[\w-]+-cf-id$/,S)}}}catch{}}throw p}},Sf=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1]});var XE,QE,JE=v(()=>{XE=C(je());wa();QE=e=>(t,r)=>async n=>{let{operationSchema:o}=(0,XE.getSmithyContext)(r),[,s,i,a,c,l]=o??[],m=r.endpointV2?.url&&e.urlParser?async()=>e.urlParser(r.endpointV2.url):e.endpoint,p=await e.protocol.serializeRequest(vs(s,i,a,c,l),n.input,{...e,...r,endpoint:m});return t({...n,request:p})}});function An(e){return{applyToStack:t=>{t.add(QE(e),eS),t.add(KE(e),ZE),e.protocol.setSerdeContext(e)}}}var ZE,eS,tS=v(()=>{YE();JE();ZE={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},eS={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var Ee,Rr=v(()=>{Ee=class{constructor(){u(this,"name");u(this,"namespace");u(this,"traits")}static assign(t,r){return Object.assign(t,r)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}getName(){return this.namespace+"#"+this.name}}});var Ca,va,qk,rS=v(()=>{Rr();Ca=class Ca extends Ee{constructor(){super(...arguments);u(this,"name");u(this,"traits");u(this,"valueSchema");u(this,"symbol",Ca.symbol)}};u(Ca,"symbol",Symbol.for("@smithy/lis"));va=Ca,qk=(e,t,r,n)=>Ee.assign(new va,{name:t,namespace:e,traits:r,valueSchema:n})});var ba,Aa,Gk,nS=v(()=>{Rr();ba=class ba extends Ee{constructor(){super(...arguments);u(this,"name");u(this,"traits");u(this,"keySchema");u(this,"valueSchema");u(this,"symbol",ba.symbol)}};u(ba,"symbol",Symbol.for("@smithy/map"));Aa=ba,Gk=(e,t,r,n,o)=>Ee.assign(new Aa,{name:t,namespace:e,traits:r,keySchema:n,valueSchema:o})});var xa,Ta,jk,oS=v(()=>{Rr();xa=class xa extends Ee{constructor(){super(...arguments);u(this,"name");u(this,"traits");u(this,"input");u(this,"output");u(this,"symbol",xa.symbol)}};u(xa,"symbol",Symbol.for("@smithy/ope"));Ta=xa,jk=(e,t,r,n,o)=>Ee.assign(new Ta,{name:t,namespace:e,traits:r,input:n,output:o})});var Ra,So,zk,_f=v(()=>{Rr();Ra=class Ra extends Ee{constructor(){super(...arguments);u(this,"name");u(this,"traits");u(this,"memberNames");u(this,"memberList");u(this,"symbol",Ra.symbol)}};u(Ra,"symbol",Symbol.for("@smithy/str"));So=Ra,zk=(e,t,r,n,o)=>Ee.assign(new So,{name:t,namespace:e,traits:r,memberNames:n,memberList:o})});var Pa,Ia,Vk,sS=v(()=>{Rr();_f();Pa=class Pa extends So{constructor(){super(...arguments);u(this,"ctor");u(this,"symbol",Pa.symbol)}};u(Pa,"symbol",Symbol.for("@smithy/err"));Ia=Pa,Vk=(e,t,r,n,o,s)=>Ee.assign(new Ia,{name:t,namespace:e,traits:r,memberNames:n,memberList:o,ctor:null})});function Mt(e){if(typeof e=="object")return e;e=e|0;let t={},r=0;for(let n of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(e>>r++&1)===1&&(t[n]=1);return t}var wf=v(()=>{});function Cs(e,t){if(e instanceof B)return Object.assign(e,{memberName:t,_isMemberSchema:!0});let r=B;return new r(e,t)}var Ir,B,vf,iS,aS=v(()=>{Ef();wf();Ir=class Ir{constructor(t,r){u(this,"ref");u(this,"memberName");u(this,"symbol",Ir.symbol);u(this,"name");u(this,"schema");u(this,"_isMemberSchema");u(this,"traits");u(this,"memberTraits");u(this,"normalizedTraits");this.ref=t,this.memberName=r;let n=[],o=t,s=t;for(this._isMemberSchema=!1;vf(o);)n.push(o[1]),o=o[0],s=vt(o),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let i=n.length-1;i>=0;--i){let a=n[i];Object.assign(this.memberTraits,Mt(a))}}else this.memberTraits=0;if(s instanceof Ir){let i=this.memberTraits;Object.assign(this,s),this.memberTraits=Object.assign({},i,s.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??s.memberName;return}if(this.schema=vt(s),iS(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(s),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}static of(t){let r=vt(t);if(r instanceof Ir)return r;if(vf(r)){let[n,o]=r;if(n instanceof Ir)return Object.assign(n.getMergedTraits(),Mt(o)),n;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(t,null,2)}.`)}return new Ir(r)}getSchema(){let t=this.schema;return t[0]===0?t[4]:t}getName(t=!1){let{name:r}=this;return!t&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let t=this.getSchema();return typeof t=="number"?t>=64&&t<128:t[0]===1}isMapSchema(){let t=this.getSchema();return typeof t=="number"?t>=128&&t<=255:t[0]===2}isStructSchema(){let t=this.getSchema();return t[0]===3||t[0]===-3}isBlobSchema(){let t=this.getSchema();return t===21||t===42}isTimestampSchema(){let t=this.getSchema();return typeof t=="number"&&t>=4&&t<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:t}=this.getMergedTraits();return!!t||this.getSchema()===42}isIdempotencyToken(){let t=s=>(s&4)===4||!!s?.idempotencyToken,{normalizedTraits:r,traits:n,memberTraits:o}=this;return t(r)||t(n)||t(o)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return Mt(this.memberTraits)}getOwnTraits(){return Mt(this.traits)}getKeySchema(){let[t,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!t&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let n=this.getSchema(),o=t?15:n[4]??0;return Cs([o,0],"key")}getValueSchema(){let t=this.getSchema(),[r,n,o]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],s=typeof t=="number"?63&t:t&&typeof t=="object"&&(n||o)?t[3+t[0]]:r?15:void 0;if(s!=null)return Cs([s,0],n?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(t){let r=this.getSchema();if(this.isStructSchema()&&r[4].includes(t)){let n=r[4].indexOf(t),o=r[5][n];return Cs(vf(o)?o:[o,0],t)}if(this.isDocumentSchema())return Cs([15,0],t);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${t}.`)}getMemberSchemas(){let t={};try{for(let[r,n]of this.structIterator())t[r]=n}catch{}return t}getEventStreamMember(){if(this.isStructSchema()){for(let[t,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return t}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let t=this.getSchema();for(let r=0;r<t[4].length;++r)yield[t[4][r],Cs([t[5][r],0],t[4][r])]}};u(Ir,"symbol",Symbol.for("@smithy/nor"));B=Ir;vf=e=>Array.isArray(e)&&e.length===2,iS=e=>Array.isArray(e)&&e.length>=5});var Oa,As,Wk,Kk,cS=v(()=>{Rr();Oa=class Oa extends Ee{constructor(){super(...arguments);u(this,"name");u(this,"schemaRef");u(this,"traits");u(this,"symbol",Oa.symbol)}};u(Oa,"symbol",Symbol.for("@smithy/sim"));As=Oa,Wk=(e,t,r,n)=>Ee.assign(new As,{name:t,namespace:e,traits:n,schemaRef:r}),Kk=(e,t,r,n)=>Ee.assign(new As,{name:t,namespace:e,traits:r,schemaRef:n})});var Yk,uS=v(()=>{Yk={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var Bt,H,lS=v(()=>{Bt=class Bt{constructor(t,r=new Map,n=new Map){u(this,"namespace");u(this,"schemas");u(this,"exceptions");this.namespace=t,this.schemas=r,this.exceptions=n}static for(t){return Bt.registries.has(t)||Bt.registries.set(t,new Bt(t)),Bt.registries.get(t)}register(t,r){let n=this.normalizeShapeId(t);Bt.for(n.split("#")[0]).schemas.set(n,r)}getSchema(t){let r=this.normalizeShapeId(t);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(t,r){let n=t,o=Bt.for(n[1]);o.schemas.set(n[1]+"#"+n[2],n),o.exceptions.set(n,r)}getErrorCtor(t){let r=t;return Bt.for(r[1]).exceptions.get(r)}getBaseException(){for(let t of this.exceptions.keys())if(Array.isArray(t)){let[,r,n]=t,o=r+"#"+n;if(o.startsWith("smithy.ts.sdk.synthetic.")&&o.endsWith("ServiceException"))return t}}find(t){return[...this.schemas.values()].find(t)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(t){return t.includes("#")?t:this.namespace+"#"+t}};u(Bt,"registries",new Map);H=Bt});var Na={};Ge(Na,{ErrorSchema:()=>Ia,ListSchema:()=>va,MapSchema:()=>Aa,NormalizedSchema:()=>B,OperationSchema:()=>Ta,SCHEMA:()=>Yk,Schema:()=>Ee,SimpleSchema:()=>As,StructureSchema:()=>So,TypeRegistry:()=>H,deref:()=>vt,deserializerMiddlewareOption:()=>ZE,error:()=>Vk,getSchemaSerdePlugin:()=>An,isStaticSchema:()=>iS,list:()=>qk,map:()=>Gk,op:()=>jk,operation:()=>vs,serializerMiddlewareOption:()=>eS,sim:()=>Wk,simAdapter:()=>Kk,struct:()=>zk,translateTraits:()=>Mt});var te=v(()=>{Ef();tS();rS();nS();oS();wa();sS();aS();Rr();cS();_f();uS();wf();lS()});var Xk,dS=v(()=>{Xk=(e,t,r=n=>n)=>e});var Qk,Jk,bs,Zk,Da,Ts,e1,Cf,Af,bf,Tf,t1,r1,fS,n1,o1,Ma,s1,xf,i1,_o,Rf,a1,c1,u1,pS,mS,l1,d1,bn,If,ka,xs,Pf=v(()=>{Qk=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},Jk=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&xs.warn(ka(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&xs.warn(ka(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},bs=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&xs.warn(ka(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},Zk=Math.ceil(34028234663852886e22),Da=e=>{let t=bs(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>Zk)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},Ts=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},e1=Ts,Cf=e=>Tf(e,32),Af=e=>Tf(e,16),bf=e=>Tf(e,8),Tf=(e,t)=>{let r=Ts(e);if(r!==void 0&&t1(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},t1=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},r1=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},fS=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},n1=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return xs.warn(ka(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},o1=e=>{if(e==null)return;let t=fS(e),r=Object.entries(t).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return t},Ma=e=>bs(typeof e=="string"?_o(e):e),s1=Ma,xf=e=>Da(typeof e=="string"?_o(e):e),i1=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,_o=e=>{let t=e.match(i1);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},Rf=e=>typeof e=="string"?pS(e):bs(e),a1=Rf,c1=Rf,u1=e=>typeof e=="string"?pS(e):Da(e),pS=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},mS=e=>Ts(typeof e=="string"?_o(e):e),l1=mS,d1=e=>Cf(typeof e=="string"?_o(e):e),bn=e=>Af(typeof e=="string"?_o(e):e),If=e=>bf(typeof e=="string"?_o(e):e),ka=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),xs={warn:console.warn}});function Is(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),o=e.getUTCDate(),s=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),c=o<10?`0${o}`:`${o}`,l=s<10?`0${s}`:`${s}`,m=i<10?`0${i}`:`${i}`,p=a<10?`0${a}`:`${a}`;return`${f1[n]}, ${c} ${Nf[r]} ${t} ${l}:${m}:${p} GMT`}var f1,Nf,p1,m1,h1,Df,g1,y1,E1,kf,Mf,Rs,S1,_1,w1,Of,v1,C1,A1,Ft,b1,T1,wo,hS=v(()=>{Pf();f1=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Nf=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];p1=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),m1=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=p1.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,a,c,l]=t,m=bn(wo(n)),p=Ft(o,"month",1,12),h=Ft(s,"day",1,31);return Rs(m,p,h,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:l})},h1=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Df=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=h1.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,a,c,l,m]=t,p=bn(wo(n)),h=Ft(o,"month",1,12),g=Ft(s,"day",1,31),S=Rs(p,h,g,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:l});return m.toUpperCase()!="Z"&&S.setTime(S.getTime()-T1(m)),S},g1=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),y1=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),E1=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),kf=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=g1.exec(e);if(t){let[r,n,o,s,i,a,c,l]=t;return Rs(bn(wo(s)),Of(o),Ft(n,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:l})}if(t=y1.exec(e),t){let[r,n,o,s,i,a,c,l]=t;return w1(Rs(S1(s),Of(o),Ft(n,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:l}))}if(t=E1.exec(e),t){let[r,n,o,s,i,a,c,l]=t;return Rs(bn(wo(l)),Of(n),Ft(o.trimLeft(),"day",1,31),{hours:s,minutes:i,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},Mf=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=Ma(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},Rs=(e,t,r,n)=>{let o=t-1;return C1(e,o,r),new Date(Date.UTC(e,o,r,Ft(n.hours,"hour",0,23),Ft(n.minutes,"minute",0,59),Ft(n.seconds,"seconds",0,60),b1(n.fractionalMilliseconds)))},S1=e=>{let t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+bn(wo(e));return r<t?r+100:r},_1=50*365*24*60*60*1e3,w1=e=>e.getTime()-new Date().getTime()>_1?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,Of=e=>{let t=Nf.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},v1=[31,28,31,30,31,30,31,31,30,31,30,31],C1=(e,t,r)=>{let n=v1[t];if(t===1&&A1(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Nf[t]} in ${e}: ${r}`)},A1=e=>e%4===0&&(e%100!==0||e%400===0),Ft=(e,t,r,n)=>{let o=If(wo(e));if(o<r||o>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return o},b1=e=>e==null?0:xf("0."+e)*1e3,T1=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),o=Number(e.substring(4,6));return r*(n*60+o)*60*1e3},wo=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)}});var Tn={};Ge(Tn,{__addDisposableResource:()=>$S,__assign:()=>Ba,__asyncDelegator:()=>NS,__asyncGenerator:()=>OS,__asyncValues:()=>DS,__await:()=>vo,__awaiter:()=>bS,__classPrivateFieldGet:()=>FS,__classPrivateFieldIn:()=>LS,__classPrivateFieldSet:()=>US,__createBinding:()=>Ua,__decorate:()=>ES,__disposeResources:()=>HS,__esDecorate:()=>_S,__exportStar:()=>xS,__extends:()=>gS,__generator:()=>TS,__importDefault:()=>BS,__importStar:()=>MS,__makeTemplateObject:()=>kS,__metadata:()=>AS,__param:()=>SS,__propKey:()=>vS,__read:()=>Uf,__rest:()=>yS,__rewriteRelativeImportExtension:()=>qS,__runInitializers:()=>wS,__setFunctionName:()=>CS,__spread:()=>RS,__spreadArray:()=>PS,__spreadArrays:()=>IS,__values:()=>Fa,default:()=>I1});function gS(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Bf(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function yS(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function ES(e,t,r,n){var o=arguments.length,s=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function SS(e,t){return function(r,n){t(r,n,e)}}function _S(e,t,r,n,o,s){function i(T){if(T!==void 0&&typeof T!="function")throw new TypeError("Function expected");return T}for(var a=n.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?n.static?e:e.prototype:null,m=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),p,h=!1,g=r.length-1;g>=0;g--){var S={};for(var b in n)S[b]=b==="access"?{}:n[b];for(var b in n.access)S.access[b]=n.access[b];S.addInitializer=function(T){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(i(T||null))};var x=(0,r[g])(a==="accessor"?{get:m.get,set:m.set}:m[c],S);if(a==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(p=i(x.get))&&(m.get=p),(p=i(x.set))&&(m.set=p),(p=i(x.init))&&o.unshift(p)}else(p=i(x))&&(a==="field"?o.unshift(p):m[c]=p)}l&&Object.defineProperty(l,n.name,m),h=!0}function wS(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0}function vS(e){return typeof e=="symbol"?e:"".concat(e)}function CS(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function AS(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function bS(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(m){try{l(n.next(m))}catch(p){i(p)}}function c(m){try{l(n.throw(m))}catch(p){i(p)}}function l(m){m.done?s(m.value):o(m.value).then(a,c)}l((n=n.apply(e,t||[])).next())})}function TS(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(l){return function(m){return c([l,m])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(r=0)),r;)try{if(n=1,o&&(s=l[0]&2?o.return:l[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,l[1])).done)return s;switch(o=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,o=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(m){l=[6,m],o=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function xS(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Ua(t,e,r)}function Fa(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Uf(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s}function RS(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Uf(arguments[t]));return e}function IS(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}function PS(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,s;n<o;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function vo(e){return this instanceof vo?(this.v=e,this):new vo(e)}function OS(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),o[Symbol.asyncIterator]=function(){return this},o;function i(g){return function(S){return Promise.resolve(S).then(g,p)}}function a(g,S){n[g]&&(o[g]=function(b){return new Promise(function(x,T){s.push([g,b,x,T])>1||c(g,b)})},S&&(o[g]=S(o[g])))}function c(g,S){try{l(n[g](S))}catch(b){h(s[0][3],b)}}function l(g){g.value instanceof vo?Promise.resolve(g.value.v).then(m,p):h(s[0][2],g)}function m(g){c("next",g)}function p(g){c("throw",g)}function h(g,S){g(S),s.shift(),s.length&&c(s[0][0],s[0][1])}}function NS(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,s){t[o]=e[o]?function(i){return(r=!r)?{value:vo(e[o](i)),done:!1}:s?s(i):i}:s}}function DS(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Fa=="function"?Fa(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(i){return new Promise(function(a,c){i=e[s](i),o(a,c,i.done,i.value)})}}function o(s,i,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},i)}}function kS(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function MS(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=Ff(e),n=0;n<r.length;n++)r[n]!=="default"&&Ua(t,e,r[n]);return x1(t,e),t}function BS(e){return e&&e.__esModule?e:{default:e}}function FS(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function US(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r}function LS(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function $S(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(o=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}function HS(e){function t(s){e.error=e.hasError?new R1(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var r,n=0;function o(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(o);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(o,function(i){return t(i),o()})}else n|=1}catch(i){t(i)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}function qS(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,o,s,i){return n?t?".jsx":".js":o&&(!s||!i)?r:o+s+"."+i.toLowerCase()+"js"}):e}var Bf,Ba,Ua,x1,Ff,R1,I1,xn=v(()=>{Bf=function(e,t){return Bf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Bf(e,t)};Ba=function(){return Ba=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Ba.apply(this,arguments)};Ua=Object.create?(function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]});x1=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},Ff=function(e){return Ff=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},Ff(e)};R1=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};I1={__extends:gS,__assign:Ba,__rest:yS,__decorate:ES,__param:SS,__esDecorate:_S,__runInitializers:wS,__propKey:vS,__setFunctionName:CS,__metadata:AS,__awaiter:bS,__generator:TS,__createBinding:Ua,__exportStar:xS,__values:Fa,__read:Uf,__spread:RS,__spreadArrays:IS,__spreadArray:PS,__await:vo,__asyncGenerator:OS,__asyncDelegator:NS,__asyncValues:DS,__makeTemplateObject:kS,__importStar:MS,__importDefault:BS,__classPrivateFieldGet:FS,__classPrivateFieldSet:US,__classPrivateFieldIn:LS,__addDisposableResource:$S,__disposeResources:HS,__rewriteRelativeImportExtension:qS}});var jS=I(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.randomUUID=void 0;var P1=(xn(),K(Tn)),GS=P1.__importDefault(require("crypto"));La.randomUUID=GS.default.randomUUID.bind(GS.default)});var Lf=I(VS=>{"use strict";var zS=jS(),De=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),O1=()=>{if(zS.randomUUID)return zS.randomUUID();let e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128,De[e[0]]+De[e[1]]+De[e[2]]+De[e[3]]+"-"+De[e[4]]+De[e[5]]+"-"+De[e[6]]+De[e[7]]+"-"+De[e[8]]+De[e[9]]+"-"+De[e[10]]+De[e[11]]+De[e[12]]+De[e[13]]+De[e[14]]+De[e[15]]};VS.v4=O1});var lt,WS=v(()=>{lt=C(Lf())});var Ve,KS=v(()=>{Ve=function(t){return Object.assign(new String(t),{deserializeJSON(){return JSON.parse(String(t))},toString(){return String(t)},toJSON(){return String(t)}})};Ve.from=e=>e&&typeof e=="object"&&(e instanceof Ve||"deserializeJSON"in e)?e:typeof e=="string"||Object.getPrototypeOf(e)===String.prototype?Ve(String(e)):Ve(JSON.stringify(e));Ve.fromObject=Ve.from});function $f(e){return(e.includes(",")||e.includes('"'))&&(e=`"${e.replace(/"/g,'\\"')}"`),e}var YS=v(()=>{});function or(e,t,r){let n=Number(e);if(n<t||n>r)throw new Error(`Value ${n} out of range [${t}, ${r}]`)}var Hf,qf,Gf,XS,QS,N1,D1,k1,M1,B1,Ps,jf,zf,JS=v(()=>{Hf="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",qf="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",Gf="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",XS="(\\d?\\d)",QS="(\\d{4})",N1=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),D1=new RegExp(`^${Hf}, ${XS} ${qf} ${QS} ${Gf} GMT$`),k1=new RegExp(`^${Hf}, ${XS}-${qf}-(\\d\\d) ${Gf} GMT$`),M1=new RegExp(`^${Hf} ${qf} ( [1-9]|\\d\\d) ${Gf} ${QS}$`),B1=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ps=e=>{if(e==null)return;let t=NaN;if(typeof e=="number")t=e;else if(typeof e=="string"){if(!/^-?\d*\.?\d+$/.test(e))throw new TypeError("parseEpochTimestamp - numeric string invalid.");t=Number.parseFloat(e)}else typeof e=="object"&&e.tag===1&&(t=e.value);if(isNaN(t)||Math.abs(t)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(t*1e3))},jf=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC3339 timestamps must be strings");let t=N1.exec(e);if(!t)throw new TypeError(`Invalid RFC3339 timestamp format ${e}`);let[,r,n,o,s,i,a,,c,l]=t;or(n,1,12),or(o,1,31),or(s,0,23),or(i,0,59),or(a,0,60);let m=new Date(Date.UTC(Number(r),Number(n)-1,Number(o),Number(s),Number(i),Number(a),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(m.setUTCFullYear(Number(r)),l.toUpperCase()!="Z"){let[,p,h,g]=/([+-])(\d\d):(\d\d)/.exec(l)||[void 0,"+",0,0],S=p==="-"?1:-1;m.setTime(m.getTime()+S*(Number(h)*60*60*1e3+Number(g)*60*1e3))}return m},zf=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC7231 timestamps must be strings.");let t,r,n,o,s,i,a,c;if((c=D1.exec(e))?[,t,r,n,o,s,i,a]=c:(c=k1.exec(e))?([,t,r,n,o,s,i,a]=c,n=(Number(n)+1900).toString()):(c=M1.exec(e))&&([,r,t,o,s,i,a,n]=c),n&&i){let l=Date.UTC(Number(n),B1.indexOf(r),Number(t),Number(o),Number(s),Number(i),a?Math.round(parseFloat(`0.${a}`)*1e3):0);or(t,1,31),or(o,0,23),or(s,0,59),or(i,0,60);let m=new Date(l);return m.setUTCFullYear(Number(n)),m}throw new TypeError(`Invalid RFC7231 date-time value ${e}.`)}});function Vf(e,t,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=e.split(t);if(r===1)return n;let o=[],s="";for(let i=0;i<n.length;i++)s===""?s=n[i]:s+=t+n[i],(i+1)%r===0&&(o.push(s),s="");return s!==""&&o.push(s),o}var ZS=v(()=>{});var Os,e_=v(()=>{Os=e=>{let t=e.length,r=[],n=!1,o,s=0;for(let i=0;i<t;++i){let a=e[i];switch(a){case'"':o!=="\\"&&(n=!n);break;case",":n||(r.push(e.slice(s,i)),s=i+1);break;default:}o=a}return r.push(e.slice(s)),r.map(i=>{i=i.trim();let a=i.length;return a<2?i:(i[0]==='"'&&i[a-1]==='"'&&(i=i.slice(1,a-1)),i.replace(/\\"/g,'"'))})}});function Wf(e){return new fe(String(e),"bigDecimal")}var t_,fe,r_=v(()=>{t_=/^-?\d*(\.\d+)?$/,fe=class e{constructor(t,r){u(this,"string");u(this,"type");if(this.string=t,this.type=r,!t_.test(t))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](t){if(!t||typeof t!="object")return!1;let r=t;return e.prototype.isPrototypeOf(t)||r.type==="bigDecimal"&&t_.test(r.string)}}});var n_={};Ge(n_,{LazyJsonString:()=>Ve,NumericValue:()=>fe,_parseEpochTimestamp:()=>Ps,_parseRfc3339DateTimeWithOffset:()=>jf,_parseRfc7231DateTime:()=>zf,copyDocumentWithTransform:()=>Xk,dateToUtcString:()=>Is,expectBoolean:()=>Jk,expectByte:()=>bf,expectFloat32:()=>Da,expectInt:()=>e1,expectInt32:()=>Cf,expectLong:()=>Ts,expectNonNull:()=>r1,expectNumber:()=>bs,expectObject:()=>fS,expectShort:()=>Af,expectString:()=>n1,expectUnion:()=>o1,generateIdempotencyToken:()=>lt.v4,handleFloat:()=>a1,limitedParseDouble:()=>Rf,limitedParseFloat:()=>c1,limitedParseFloat32:()=>u1,logger:()=>xs,nv:()=>Wf,parseBoolean:()=>Qk,parseEpochTimestamp:()=>Mf,parseRfc3339DateTime:()=>m1,parseRfc3339DateTimeWithOffset:()=>Df,parseRfc7231DateTime:()=>kf,quoteHeader:()=>$f,splitEvery:()=>Vf,splitHeader:()=>Os,strictParseByte:()=>If,strictParseDouble:()=>Ma,strictParseFloat:()=>s1,strictParseFloat32:()=>xf,strictParseInt:()=>l1,strictParseInt32:()=>d1,strictParseLong:()=>mS,strictParseShort:()=>bn});var Qe=v(()=>{dS();hS();WS();KS();Pf();YS();JS();ZS();e_();r_()});var We,Co=v(()=>{We=class{constructor(){u(this,"serdeContext")}setSerdeContext(t){this.serdeContext=t}}});var $a,Kf,o_=v(()=>{$a=C(Ce()),Kf=class{constructor({marshaller:t,serializer:r,deserializer:n,serdeContext:o,defaultContentType:s}){u(this,"marshaller");u(this,"serializer");u(this,"deserializer");u(this,"serdeContext");u(this,"defaultContentType");this.marshaller=t,this.serializer=r,this.deserializer=n,this.serdeContext=o,this.defaultContentType=s}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:n}){let o=this.marshaller,s=r.getEventStreamMember(),i=r.getMemberSchema(s),a=this.serializer,c=this.defaultContentType,l=Symbol("initialRequestMarker"),m={async*[Symbol.asyncIterator](){if(n){let p={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:c}};a.write(r,n);let h=a.flush();yield{[l]:!0,headers:p,body:h}}for await(let p of t)yield p}};return o.serialize(m,p=>{if(p[l])return{headers:p.headers,body:p.body};let h=Object.keys(p).find(O=>O!=="__type")??"",{additionalHeaders:g,body:S,eventType:b,explicitPayloadContentType:x}=this.writeEventBody(h,i,p);return{headers:{":event-type":{type:"string",value:b},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:x??c},...g},body:S}})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:n}){let o=this.marshaller,s=r.getEventStreamMember(),a=r.getMemberSchema(s).getMemberSchemas(),c=Symbol("initialResponseMarker"),l=o.deserialize(t.body,async h=>{let g=Object.keys(h).find(b=>b!=="__type")??"",S=h[g].body;if(g==="initial-response"){let b=await this.deserializer.read(r,S);return delete b[s],{[c]:!0,...b}}else if(g in a){let b=a[g];if(b.isStructSchema()){let x={},T=!1;for(let[O,D]of b.structIterator()){let{eventHeader:F,eventPayload:$}=D.getMergedTraits();if(T=T||!!(F||$),$)D.isBlobSchema()?x[O]=S:D.isStringSchema()?x[O]=(this.serdeContext?.utf8Encoder??$a.toUtf8)(S):D.isStructSchema()&&(x[O]=await this.deserializer.read(D,S));else if(F){let z=h[g].headers[O]?.value;z!=null&&(D.isNumericSchema()?z&&typeof z=="object"&&"bytes"in z?x[O]=BigInt(z.toString()):x[O]=Number(z):x[O]=z)}}if(T)return{[g]:x}}return{[g]:await this.deserializer.read(b,S)}}else return{$unknown:h}}),m=l[Symbol.asyncIterator](),p=await m.next();if(p.done)return l;if(p.value?.[c]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[h,g]of Object.entries(p.value))n[h]=g}return{async*[Symbol.asyncIterator](){for(p?.value?.[c]||(yield p.value);;){let{done:h,value:g}=await m.next();if(h)break;yield g}}}}writeEventBody(t,r,n){let o=this.serializer,s=t,i=null,a,c=r.getSchema()[4].includes(t),l={};if(c){let h=r.getMemberSchema(t);if(h.isStructSchema()){for(let[g,S]of h.structIterator()){let{eventHeader:b,eventPayload:x}=S.getMergedTraits();if(x){i=g;break}else if(b){let T=n[t][g],O="binary";S.isNumericSchema()?(-2)**31<=T&&T<=2**31-1?O="integer":O="long":S.isTimestampSchema()?O="timestamp":S.isStringSchema()?O="string":S.isBooleanSchema()&&(O="boolean"),T!=null&&(l[g]={type:O,value:T},delete n[t][g])}}if(i!==null){let g=h.getMemberSchema(i);g.isBlobSchema()?a="application/octet-stream":g.isStringSchema()&&(a="text/plain"),o.write(g,n[t][i])}else o.write(h,n[t])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[h,g]=n[t];s=h,o.write(15,g)}let m=o.flush();return{body:typeof m=="string"?(this.serdeContext?.utf8Decoder??$a.fromUtf8)(m):m,eventType:s,explicitPayloadContentType:a,additionalHeaders:l}}}});var s_={};Ge(s_,{EventStreamSerde:()=>Kf});var i_=v(()=>{o_()});var Ha,Rn,qa=v(()=>{te();Ha=C(re());Co();Rn=class extends We{constructor(r){super();u(this,"options");this.options=r}getRequestType(){return Ha.HttpRequest}getResponseType(){return Ha.HttpResponse}setSerdeContext(r){this.serdeContext=r,this.serializer.setSerdeContext(r),this.deserializer.setSerdeContext(r),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(r)}updateServiceEndpoint(r,n){if("url"in n){r.protocol=n.url.protocol,r.hostname=n.url.hostname,r.port=n.url.port?Number(n.url.port):void 0,r.path=n.url.pathname,r.fragment=n.url.hash||void 0,r.username=n.url.username||void 0,r.password=n.url.password||void 0,r.query||(r.query={});for(let[o,s]of n.url.searchParams.entries())r.query[o]=s;return r}else return r.protocol=n.protocol,r.hostname=n.hostname,r.port=n.port?Number(n.port):void 0,r.path=n.path,r.query={...n.query},r}setHostPrefix(r,n,o){let s=B.of(n.input),i=Mt(n.traits??{});if(i.endpoint){let a=i.endpoint?.[0];if(typeof a=="string"){let c=[...s.structIterator()].filter(([,l])=>l.getMergedTraits().hostLabel);for(let[l]of c){let m=o[l];if(typeof m!="string")throw new Error(`@smithy/core/schema - ${l} in input must be a string as hostLabel.`);a=a.replace(`{${l}}`,m)}r.hostname=a+r.hostname}}}deserializeMetadata(r){return{httpStatusCode:r.statusCode,requestId:r.headers["x-amzn-requestid"]??r.headers["x-amzn-request-id"]??r.headers["x-amz-request-id"],extendedRequestId:r.headers["x-amz-id-2"],cfId:r.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:r,requestSchema:n,initialRequest:o}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:r,requestSchema:n,initialRequest:o})}async deserializeEventStream({response:r,responseSchema:n,initialResponseContainer:o}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:r,responseSchema:n,initialResponseContainer:o})}async loadEventStreamCapability(){let{EventStreamSerde:r}=await Promise.resolve().then(()=>(i_(),s_));return new r({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(r,n,o,s,i){return[]}getEventStreamMarshaller(){let r=this.serdeContext;if(!r.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return r.eventStreamMarshaller}}});var a_,c_,In,u_=v(()=>{te();Qe();a_=C(re()),c_=C(ya());Sa();_a();qa();In=class extends Rn{async serializeRequest(t,r,n){let o={...r??{}},s=this.serializer,i={},a={},c=await n.endpoint(),l=B.of(t?.input),m=l.getSchema(),p=!1,h,g=new a_.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:i,headers:a,body:void 0});if(c){this.updateServiceEndpoint(g,c),this.setHostPrefix(g,t,o);let S=Mt(t.traits);if(S.http){g.method=S.http[0];let[b,x]=S.http[1].split("?");g.path=="/"?g.path=b:g.path+=b;let T=new URLSearchParams(x??"");Object.assign(i,Object.fromEntries(T))}}for(let[S,b]of l.structIterator()){let x=b.getMergedTraits()??{},T=o[S];if(!(T==null&&!b.isIdempotencyToken()))if(x.httpPayload)b.isStreaming()?b.isStructSchema()?o[S]&&(h=await this.serializeEventStream({eventStream:o[S],requestSchema:l})):h=T:(s.write(b,T),h=s.flush()),delete o[S];else if(x.httpLabel){s.write(b,T);let O=s.flush();g.path.includes(`{${S}+}`)?g.path=g.path.replace(`{${S}+}`,O.split("/").map(kt).join("/")):g.path.includes(`{${S}}`)&&(g.path=g.path.replace(`{${S}}`,kt(O))),delete o[S]}else if(x.httpHeader)s.write(b,T),a[x.httpHeader.toLowerCase()]=String(s.flush()),delete o[S];else if(typeof x.httpPrefixHeaders=="string"){for(let[O,D]of Object.entries(T)){let F=x.httpPrefixHeaders+O;s.write([b.getValueSchema(),{httpHeader:F}],D),a[F.toLowerCase()]=s.flush()}delete o[S]}else x.httpQuery||x.httpQueryParams?(this.serializeQuery(b,T,i),delete o[S]):p=!0}return p&&o&&(s.write(m,o),h=s.flush()),g.headers=a,g.query=i,g.body=h,g}serializeQuery(t,r,n){let o=this.serializer,s=t.getMergedTraits();if(s.httpQueryParams){for(let[i,a]of Object.entries(r))if(!(i in n)){let c=t.getValueSchema();Object.assign(c.getMergedTraits(),{...s,httpQuery:i,httpQueryParams:void 0}),this.serializeQuery(c,a,n)}return}if(t.isListSchema()){let i=!!t.getMergedTraits().sparse,a=[];for(let c of r){o.write([t.getValueSchema(),s],c);let l=o.flush();(i||l!==void 0)&&a.push(l)}n[s.httpQuery]=a}else o.write([t,s],r),n[s.httpQuery]=o.flush()}async deserializeResponse(t,r,n){let o=this.deserializer,s=B.of(t.output),i={};if(n.statusCode>=300){let c=await ut(n.body,r);throw c.byteLength>0&&Object.assign(i,await o.read(15,c)),await this.handleError(t,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let c in n.headers){let l=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=l}let a=await this.deserializeHttpMessage(s,r,n,i);if(a.length){let c=await ut(n.body,r);if(c.byteLength>0){let l=await o.read(s,c);for(let m of a)i[m]=l[m]}}else a.discardResponseBody&&await ut(n.body,r);return i.$metadata=this.deserializeMetadata(n),i}async deserializeHttpMessage(t,r,n,o,s){let i;o instanceof Set?i=s:i=o;let a=!0,c=this.deserializer,l=B.of(t),m=[];for(let[p,h]of l.structIterator()){let g=h.getMemberTraits();if(g.httpPayload){if(a=!1,h.isStreaming())h.isStructSchema()?i[p]=await this.deserializeEventStream({response:n,responseSchema:l}):i[p]=(0,c_.sdkStreamMixin)(n.body);else if(n.body){let b=await ut(n.body,r);b.byteLength>0&&(i[p]=await c.read(h,b))}}else if(g.httpHeader){let S=String(g.httpHeader).toLowerCase(),b=n.headers[S];if(b!=null)if(h.isListSchema()){let x=h.getValueSchema();x.getMergedTraits().httpHeader=S;let T;x.isTimestampSchema()&&x.getSchema()===4?T=Vf(b,",",2):T=Os(b);let O=[];for(let D of T)O.push(await c.read(x,D.trim()));i[p]=O}else i[p]=await c.read(h,b)}else if(g.httpPrefixHeaders!==void 0){i[p]={};for(let[S,b]of Object.entries(n.headers))if(S.startsWith(g.httpPrefixHeaders)){let x=h.getValueSchema();x.getMergedTraits().httpHeader=S,i[p][S.slice(g.httpPrefixHeaders.length)]=await c.read(x,b)}}else g.httpResponseCode?i[p]=n.statusCode:m.push(p)}return m.discardResponseBody=a,m}}});var l_,sr,d_=v(()=>{te();l_=C(re());Sa();qa();sr=class extends Rn{async serializeRequest(t,r,n){let o=this.serializer,s={},i={},a=await n.endpoint(),c=B.of(t?.input),l=c.getSchema(),m,p=new l_.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:s,headers:i,body:void 0});a&&(this.updateServiceEndpoint(p,a),this.setHostPrefix(p,t,r));let h={...r};if(r){let g=c.getEventStreamMember();if(g){if(h[g]){let S={};for(let[b,x]of c.structIterator())b!==g&&h[b]&&(o.write(x,h[b]),S[b]=o.flush());m=await this.serializeEventStream({eventStream:h[g],requestSchema:c,initialRequest:S})}}else o.write(l,h),m=o.flush()}return p.headers=i,p.query=s,p.body=m,p.method="POST",p}async deserializeResponse(t,r,n){let o=this.deserializer,s=B.of(t.output),i={};if(n.statusCode>=300){let c=await ut(n.body,r);throw c.byteLength>0&&Object.assign(i,await o.read(15,c)),await this.handleError(t,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let c in n.headers){let l=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=l}let a=s.getEventStreamMember();if(a)i[a]=await this.deserializeEventStream({response:n,responseSchema:s,initialResponseContainer:i});else{let c=await ut(n.body,r);c.byteLength>0&&Object.assign(i,await o.read(s,c))}return i.$metadata=this.deserializeMetadata(n),i}}});var Yf,Xf=v(()=>{_a();Yf=(e,t,r,n,o,s)=>{if(t!=null&&t[r]!==void 0){let i=n();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(o,s?i.split("/").map(a=>kt(a)).join("/"):kt(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return e}});function Qf(e,t){return new Ga(e,t)}var f_,Ga,p_=v(()=>{f_=C(re());Xf();Ga=class{constructor(t,r){u(this,"input");u(this,"context");u(this,"query",{});u(this,"method","");u(this,"headers",{});u(this,"path","");u(this,"body",null);u(this,"hostname","");u(this,"resolvePathStack",[]);this.input=t,this.context=r}async build(){let{hostname:t,protocol:r="https",port:n,path:o}=await this.context.endpoint();this.path=o;for(let s of this.resolvePathStack)s(this.path);return new f_.HttpRequest({protocol:r,hostname:this.hostname||t,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,n,o){return this.resolvePathStack.push(s=>{this.path=Yf(s,this.input,t,r,n,o)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}});function nt(e,t){if(t.timestampFormat.useTrait&&e.isTimestampSchema()&&(e.getSchema()===5||e.getSchema()===6||e.getSchema()===7))return e.getSchema();let{httpLabel:r,httpPrefixHeaders:n,httpHeader:o,httpQuery:s}=e.getMergedTraits();return(t.httpBindings?typeof n=="string"||o?6:s||r?5:void 0:void 0)??t.timestampFormat.default}var ja=v(()=>{});var Jf,m_,Pn,Zf=v(()=>{te();Qe();Jf=C(Ae()),m_=C(Ce());Co();ja();Pn=class extends We{constructor(r){super();u(this,"settings");this.settings=r}read(r,n){let o=B.of(r);if(o.isListSchema())return Os(n).map(s=>this.read(o.getValueSchema(),s));if(o.isBlobSchema())return(this.serdeContext?.base64Decoder??Jf.fromBase64)(n);if(o.isTimestampSchema())switch(nt(o,this.settings)){case 5:return jf(n);case 6:return zf(n);case 7:return Ps(n);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",n),new Date(n)}if(o.isStringSchema()){let s=o.getMergedTraits().mediaType,i=n;if(s)return o.getMergedTraits().httpHeader&&(i=this.base64ToUtf8(i)),(s==="application/json"||s.endsWith("+json"))&&(i=Ve.from(i)),i}return o.isNumericSchema()?Number(n):o.isBigIntegerSchema()?BigInt(n):o.isBigDecimalSchema()?new fe(n,"bigDecimal"):o.isBooleanSchema()?String(n).toLowerCase()==="true":n}base64ToUtf8(r){return(this.serdeContext?.utf8Encoder??m_.toUtf8)((this.serdeContext?.base64Decoder??Jf.fromBase64)(r))}}});var za,On,h_=v(()=>{te();za=C(Ce());Co();Zf();On=class extends We{constructor(r,n){super();u(this,"codecDeserializer");u(this,"stringDeserializer");this.codecDeserializer=r,this.stringDeserializer=new Pn(n)}setSerdeContext(r){this.stringDeserializer.setSerdeContext(r),this.codecDeserializer.setSerdeContext(r),this.serdeContext=r}read(r,n){let o=B.of(r),s=o.getMergedTraits(),i=this.serdeContext?.utf8Encoder??za.toUtf8;if(s.httpHeader||s.httpResponseCode)return this.stringDeserializer.read(o,i(n));if(s.httpPayload){if(o.isBlobSchema()){let a=this.serdeContext?.utf8Decoder??za.fromUtf8;return typeof n=="string"?a(n):n}else if(o.isStringSchema())return"byteLength"in n?i(n):n}return this.codecDeserializer.read(o,n)}}});var ep,Ns,tp=v(()=>{te();Qe();ep=C(Ae());Co();ja();Ns=class extends We{constructor(r){super();u(this,"settings");u(this,"stringBuffer","");this.settings=r}write(r,n){let o=B.of(r);switch(typeof n){case"object":if(n===null){this.stringBuffer="null";return}if(o.isTimestampSchema()){if(!(n instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${n} when schema expected Date in ${o.getName(!0)}`);switch(nt(o,this.settings)){case 5:this.stringBuffer=n.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=Is(n);break;case 7:this.stringBuffer=String(n.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",n),this.stringBuffer=String(n.getTime()/1e3)}return}if(o.isBlobSchema()&&"byteLength"in n){this.stringBuffer=(this.serdeContext?.base64Encoder??ep.toBase64)(n);return}if(o.isListSchema()&&Array.isArray(n)){let a="";for(let c of n){this.write([o.getValueSchema(),o.getMergedTraits()],c);let l=this.flush(),m=o.getValueSchema().isTimestampSchema()?l:$f(l);a!==""&&(a+=", "),a+=m}this.stringBuffer=a;return}this.stringBuffer=JSON.stringify(n,null,2);break;case"string":let s=o.getMergedTraits().mediaType,i=n;if(s&&((s==="application/json"||s.endsWith("+json"))&&(i=Ve.from(i)),o.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??ep.toBase64)(i.toString());return}this.stringBuffer=n;break;default:o.isIdempotencyToken()?this.stringBuffer=(0,lt.v4)():this.stringBuffer=String(n)}}flush(){let r=this.stringBuffer;return this.stringBuffer="",r}}});var Nn,g_=v(()=>{te();tp();Nn=class{constructor(t,r,n=new Ns(r)){u(this,"codecSerializer");u(this,"stringSerializer");u(this,"buffer");this.codecSerializer=t,this.stringSerializer=n}setSerdeContext(t){this.codecSerializer.setSerdeContext(t),this.stringSerializer.setSerdeContext(t)}write(t,r){let n=B.of(t),o=n.getMergedTraits();if(o.httpHeader||o.httpLabel||o.httpQuery){this.stringSerializer.write(n,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,r)}flush(){if(this.buffer!==void 0){let t=this.buffer;return this.buffer=void 0,t}return this.codecSerializer.flush()}}});var y_={};Ge(y_,{FromStringShapeDeserializer:()=>Pn,HttpBindingProtocol:()=>In,HttpInterceptingShapeDeserializer:()=>On,HttpInterceptingShapeSerializer:()=>Nn,HttpProtocol:()=>Rn,RequestBuilder:()=>Ga,RpcProtocol:()=>sr,SerdeContext:()=>We,ToStringShapeSerializer:()=>Ns,collectBody:()=>ut,determineTimestampFormat:()=>nt,extendedEncodeURIComponent:()=>kt,requestBuilder:()=>Qf,resolvedPath:()=>Yf});var Je=v(()=>{Sa();_a();u_();qa();d_();p_();Xf();Zf();h_();g_();tp();ja();Co()});var E_=v(()=>{Je()});function F1(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}var S_=v(()=>{});var ir,__=v(()=>{ir=class{constructor(t){u(this,"authSchemes",new Map);for(let[r,n]of Object.entries(t))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(t){return this.authSchemes.get(t)}}});var w_,rp,np,v_=v(()=>{w_=C(re()),rp=C(Cr()),np=class{async sign(t,r,n){if(!n)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let o=w_.HttpRequest.clone(t);if(n.in===rp.HttpApiKeyAuthLocation.QUERY)o.query[n.name]=r.apiKey;else if(n.in===rp.HttpApiKeyAuthLocation.HEADER)o.headers[n.name]=n.scheme?`${n.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return o}}});var C_,op,A_=v(()=>{C_=C(re()),op=class{async sign(t,r,n){let o=C_.HttpRequest.clone(t);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return o.headers.Authorization=`Bearer ${r.token}`,o}}});var Ct,b_=v(()=>{Ct=class{async sign(t,r,n){return t}}});var T_=v(()=>{v_();A_();b_()});var x_,U1,sp,Va,ip,R_=v(()=>{x_=e=>function(r){return Va(r)&&r.expiration.getTime()-Date.now()<e},U1=3e5,sp=x_(3e5),Va=e=>e.expiration!==void 0,ip=(e,t,r)=>{if(e===void 0)return;let n=typeof e!="function"?async()=>Promise.resolve(e):e,o,s,i,a=!1,c=async l=>{s||(s=n(l));try{o=await s,i=!0,a=!1}finally{s=void 0}return o};return t===void 0?async l=>((!i||l?.forceRefresh)&&(o=await c(l)),o):async l=>((!i||l?.forceRefresh)&&(o=await c(l)),a?o:r(o)?(t(o)&&await c(l),o):(a=!0,o))}});var I_=v(()=>{__();T_();R_()});var ar={};Ge(ar,{DefaultIdentityProviderConfig:()=>ir,EXPIRATION_MS:()=>U1,HttpApiKeyAuthSigner:()=>np,HttpBearerAuthSigner:()=>op,NoAuthSigner:()=>Ct,createIsIdentityExpiredFunction:()=>x_,createPaginator:()=>Vy,doesIdentityRequireRefresh:()=>Va,getHttpAuthSchemeEndpointRuleSetPlugin:()=>vn,getHttpAuthSchemePlugin:()=>_D,getHttpSigningPlugin:()=>Cn,getSmithyContext:()=>mD,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>Py,httpAuthSchemeMiddleware:()=>Es,httpAuthSchemeMiddlewareOptions:()=>Fy,httpSigningMiddleware:()=>$d,httpSigningMiddlewareOptions:()=>qy,isIdentityExpired:()=>sp,memoizeIdentityProvider:()=>ip,normalizeProvider:()=>br,requestBuilder:()=>Qf,setFeature:()=>F1});var Te=v(()=>{by();Ly();jy();zy();Wy();E_();S_();I_()});var Or=I(Dn=>{"use strict";var cp=Cr(),up=class{constructor({size:t,params:r}){u(this,"capacity");u(this,"data",new Map);u(this,"parameters",[]);this.capacity=t??50,r&&(this.parameters=r)}get(t,r){let n=this.hash(t);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let o=this.data.keys(),s=0;for(;;){let{value:i,done:a}=o.next();if(this.data.delete(i),a||++s>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(t){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let o of n){let s=String(t[o]??"");if(s.includes("|;"))return!1;r+=s+"|;"}return r}},L1=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),P_=e=>L1.test(e)||e.startsWith("[")&&e.endsWith("]"),$1=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),dp=(e,t=!1)=>{if(!t)return $1.test(e);let r=e.split(".");for(let n of r)if(!dp(n))return!1;return!0},lp={},Ds="endpoints";function Pr(e){return typeof e!="object"||e==null?e:"ref"in e?`$${Pr(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Pr).join(", ")})`:JSON.stringify(e,null,2)}var ke=class extends Error{constructor(t){super(t),this.name="EndpointError"}},H1=(e,t)=>e===t,q1=e=>{let t=e.split("."),r=[];for(let n of t){let o=n.indexOf("[");if(o!==-1){if(n.indexOf("]")!==n.length-1)throw new ke(`Path: '${e}' does not end with ']'`);let s=n.slice(o+1,-1);if(Number.isNaN(parseInt(s)))throw new ke(`Invalid array index: '${s}' in path: '${e}'`);o!==0&&r.push(n.slice(0,o)),r.push(s)}else r.push(n)}return r},O_=(e,t)=>q1(t).reduce((r,n)=>{if(typeof r!="object")throw new ke(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e),G1=e=>e!=null,j1=e=>!e,ap={[cp.EndpointURLScheme.HTTP]:80,[cp.EndpointURLScheme.HTTPS]:443},z1=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:h,port:g,protocol:S="",path:b="",query:x={}}=e,T=new URL(`${S}//${h}${g?`:${g}`:""}${b}`);return T.search=Object.entries(x).map(([O,D])=>`${O}=${D}`).join("&"),T}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:o,pathname:s,protocol:i,search:a}=t;if(a)return null;let c=i.slice(0,-1);if(!Object.values(cp.EndpointURLScheme).includes(c))return null;let l=P_(o),m=r.includes(`${n}:${ap[c]}`)||typeof e=="string"&&e.includes(`${n}:${ap[c]}`),p=`${n}${m?`:${ap[c]}`:""}`;return{scheme:c,authority:p,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:l}},V1=(e,t)=>e===t,W1=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r),K1=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),Y1={booleanEquals:H1,getAttr:O_,isSet:G1,isValidHostLabel:dp,not:j1,parseURL:z1,stringEquals:V1,substring:W1,uriEncode:K1},N_=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},o=0;for(;o<e.length;){let s=e.indexOf("{",o);if(s===-1){r.push(e.slice(o));break}r.push(e.slice(o,s));let i=e.indexOf("}",s);if(i===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(s+1,i)),o=i+2);let a=e.substring(s+1,i);if(a.includes("#")){let[c,l]=a.split("#");r.push(O_(n[c],l))}else r.push(n[a]);o=i+1}return r.join("")},X1=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],Wa=(e,t,r)=>{if(typeof e=="string")return N_(e,r);if(e.fn)return k_.callFunction(e,r);if(e.ref)return X1(e,r);throw new ke(`'${t}': ${String(e)} is not a string, function or reference.`)},D_=({fn:e,argv:t},r)=>{let n=t.map(s=>["boolean","number"].includes(typeof s)?s:k_.evaluateExpression(s,"arg",r)),o=e.split(".");return o[0]in lp&&o[1]!=null?lp[o[0]][o[1]](...n):Y1[e](...n)},k_={evaluateExpression:Wa,callFunction:D_},Q1=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new ke(`'${e}' is already defined in Reference Record.`);let n=D_(t,r);return r.logger?.debug?.(`${Ds} evaluateCondition: ${Pr(t)} = ${Pr(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}},fp=(e=[],t)=>{let r={};for(let n of e){let{result:o,toAssign:s}=Q1(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!o)return{result:o};s&&(r[s.name]=s.value,t.logger?.debug?.(`${Ds} assign: ${s.name} := ${Pr(s.value)}`))}return{result:!0,referenceRecord:r}},J1=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:o.map(s=>{let i=Wa(s,"Header value entry",t);if(typeof i!="string")throw new ke(`Header '${n}' value '${i}' is not a string`);return i})}),{}),M_=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:F_.getEndpointProperty(o,t)}),{}),B_=(e,t)=>{if(Array.isArray(e))return e.map(r=>B_(r,t));switch(typeof e){case"string":return N_(e,t);case"object":if(e===null)throw new ke(`Unexpected endpoint property: ${e}`);return F_.getEndpointProperties(e,t);case"boolean":return e;default:throw new ke(`Unexpected endpoint property type: ${typeof e}`)}},F_={getEndpointProperty:B_,getEndpointProperties:M_},Z1=(e,t)=>{let r=Wa(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new ke(`Endpoint URL must be a string, got ${typeof r}`)},eM=(e,t)=>{let{conditions:r,endpoint:n}=e,{result:o,referenceRecord:s}=fp(r,t);if(!o)return;let i={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:c,headers:l}=n;return t.logger?.debug?.(`${Ds} Resolving endpoint from template: ${Pr(n)}`),{...l!=null&&{headers:J1(l,i)},...c!=null&&{properties:M_(c,i)},url:Z1(a,i)}},tM=(e,t)=>{let{conditions:r,error:n}=e,{result:o,referenceRecord:s}=fp(r,t);if(o)throw new ke(Wa(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))},U_=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=eM(r,t);if(n)return n}else if(r.type==="error")tM(r,t);else if(r.type==="tree"){let n=L_.evaluateTreeRule(r,t);if(n)return n}else throw new ke(`Unknown endpoint rule: ${r}`);throw new ke("Rules evaluation failed")},rM=(e,t)=>{let{conditions:r,rules:n}=e,{result:o,referenceRecord:s}=fp(r,t);if(o)return L_.evaluateRules(n,{...t,referenceRecord:{...t.referenceRecord,...s}})},L_={evaluateRules:U_,evaluateTreeRule:rM},nM=(e,t)=>{let{endpointParams:r,logger:n}=t,{parameters:o,rules:s}=e;t.logger?.debug?.(`${Ds} Initial EndpointParams: ${Pr(r)}`);let i=Object.entries(o).filter(([,l])=>l.default!=null).map(([l,m])=>[l,m.default]);if(i.length>0)for(let[l,m]of i)r[l]=r[l]??m;let a=Object.entries(o).filter(([,l])=>l.required).map(([l])=>l);for(let l of a)if(r[l]==null)throw new ke(`Missing required parameter: '${l}'`);let c=U_(s,{endpointParams:r,logger:n,referenceRecord:{}});return t.logger?.debug?.(`${Ds} Resolved endpoint: ${Pr(c)}`),c};Dn.EndpointCache=up;Dn.EndpointError=ke;Dn.customEndpointFunctions=lp;Dn.isIpAddress=P_;Dn.isValidHostLabel=dp;Dn.resolveEndpoint=nM});var H_=I($_=>{"use strict";function oM(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in t?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o}return t}$_.parseQueryString=oM});var cr=I(G_=>{"use strict";var sM=H_(),q_=e=>{if(typeof e=="string")return q_(new URL(e));let{hostname:t,pathname:r,port:n,protocol:o,search:s}=e,i;return s&&(i=sM.parseQueryString(s)),{hostname:t,port:n?parseInt(n):void 0,protocol:o,path:r,query:i}};G_.parseUrl=q_});var kn=I(At=>{"use strict";var Ao=Or(),iM=cr(),z_=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!z_(r))return!1;return!0}return!(!Ao.isValidHostLabel(e)||e.length<3||e.length>63||e!==e.toLowerCase()||Ao.isIpAddress(e))},j_=":",aM="/",cM=e=>{let t=e.split(j_);if(t.length<6)return null;let[r,n,o,s,i,...a]=t;if(r!=="arn"||n===""||o===""||a.join(j_)==="")return null;let c=a.map(l=>l.split(aM)).flat();return{partition:n,service:o,region:s,accountId:i,resourceId:c}},uM=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],lM="1.1",V_={partitions:uM,version:lM},W_=V_,K_="",Y_=e=>{let{partitions:t}=W_;for(let n of t){let{regions:o,outputs:s}=n;for(let[i,a]of Object.entries(o))if(i===e)return{...s,...a}}for(let n of t){let{regionRegex:o,outputs:s}=n;if(new RegExp(o).test(e))return{...s}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},X_=(e,t="")=>{W_=e,K_=t},dM=()=>{X_(V_,"")},fM=()=>K_,Q_={isVirtualHostableS3Bucket:z_,parseArn:cM,partition:Y_};Ao.customEndpointFunctions.aws=Q_;var pM=e=>{if(typeof e.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>J_(e.endpointProvider({Region:typeof e.region=="function"?await e.region():e.region,UseDualStack:typeof e.useDualstackEndpoint=="function"?await e.useDualstackEndpoint():e.useDualstackEndpoint,UseFIPS:typeof e.useFipsEndpoint=="function"?await e.useFipsEndpoint():e.useFipsEndpoint,Endpoint:void 0},{logger:e.logger}))),e},J_=e=>iM.parseUrl(e.url);Object.defineProperty(At,"EndpointError",{enumerable:!0,get:function(){return Ao.EndpointError}});Object.defineProperty(At,"isIpAddress",{enumerable:!0,get:function(){return Ao.isIpAddress}});Object.defineProperty(At,"resolveEndpoint",{enumerable:!0,get:function(){return Ao.resolveEndpoint}});At.awsEndpointFunctions=Q_;At.getUserAgentPrefix=fM;At.partition=Y_;At.resolveDefaultAwsRegionalEndpointsConfig=pM;At.setPartitionInfo=X_;At.toEndpointV1=J_;At.useDefaultPartitionInfo=dM});var Ka,Nr,Z_=v(()=>{Ka={warningEmitted:!1},Nr=e=>{e&&!Ka.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<18&&(Ka.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});function Dr(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var ew=v(()=>{});function tw(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var rw=v(()=>{});function nw(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var ow=v(()=>{});var ur={};Ge(ur,{emitWarningIfUnsupportedVersion:()=>Nr,setCredentialFeature:()=>Dr,setFeature:()=>tw,setTokenFeature:()=>nw,state:()=>Ka});var dt=v(()=>{Z_();ew();rw();ow()});var sw,pp,iw=v(()=>{sw=C(re()),pp=e=>sw.HttpResponse.isInstance(e)?e.headers?.date??e.headers?.Date:void 0});var bo,mp=v(()=>{bo=e=>new Date(Date.now()+e)});var aw,cw=v(()=>{mp();aw=(e,t)=>Math.abs(bo(t).getTime()-e)>=3e5});var hp,uw=v(()=>{cw();hp=(e,t)=>{let r=Date.parse(e);return aw(r,t)?r-Date.now():t}});var gp=v(()=>{iw();mp();uw()});var lw,ks,To,Me,yp,Ep=v(()=>{lw=C(re());gp();ks=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},To=async e=>{let t=ks("context",e.context),r=ks("config",e.config),n=t.endpointV2?.properties?.authSchemes?.[0],s=await ks("signer",r.signer)(n),i=e?.signingRegion,a=e?.signingRegionSet,c=e?.signingName;return{config:r,signer:s,signingRegion:i,signingRegionSet:a,signingName:c}},Me=class{async sign(t,r,n){if(!lw.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let o=await To(n),{config:s,signer:i}=o,{signingRegion:a,signingName:c}=o,l=n.context;if(l?.authSchemes?.length??!1){let[p,h]=l.authSchemes;p?.name==="sigv4a"&&h?.name==="sigv4"&&(a=h?.signingRegion??a,c=h?.signingName??c)}return await i.sign(t,{signingDate:bo(s.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(t){return r=>{let n=r.ServerTime??pp(r.$response);if(n){let o=ks("config",t.config),s=o.systemClockOffset;o.systemClockOffset=hp(n,o.systemClockOffset),o.systemClockOffset!==s&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let n=pp(t);if(n){let o=ks("config",r.config);o.systemClockOffset=hp(n,o.systemClockOffset)}}},yp=Me});var dw,Ms,fw=v(()=>{dw=C(re());gp();Ep();Ms=class extends Me{async sign(t,r,n){if(!dw.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:o,signer:s,signingRegion:i,signingRegionSet:a,signingName:c}=await To(n),m=(await o.sigv4aSigningRegionSet?.()??a??[i]).join(",");return await s.sign(t,{signingDate:bo(o.systemClockOffset),signingRegion:m,signingService:c})}}});var Sp,pw=v(()=>{Sp=e=>typeof e=="string"&&e.length>0?e.split(",").map(t=>t.trim()):[]});var Ya,_p=v(()=>{Ya=e=>`AWS_BEARER_TOKEN_${e.replace(/[\s-]/g,"_").toUpperCase()}`});var mw,hw,kr,gw=v(()=>{pw();_p();mw="AWS_AUTH_SCHEME_PREFERENCE",hw="auth_scheme_preference",kr={environmentVariableSelector:(e,t)=>{if(t?.signingName&&Ya(t.signingName)in e)return["httpBearerAuth"];if(mw in e)return Sp(e[mw])},configFileSelector:e=>{if(hw in e)return Sp(e[hw])},default:[]}});var Be=I(Mn=>{"use strict";var xo=class e extends Error{constructor(r,n=!0){let o,s=!0;typeof n=="boolean"?(o=void 0,s=n):n!=null&&typeof n=="object"&&(o=n.logger,s=n.tryNextLink??!0);super(r);u(this,"name","ProviderError");u(this,"tryNextLink");this.tryNextLink=s,Object.setPrototypeOf(this,e.prototype),o?.debug?.(`@smithy/property-provider ${s?"->":"(!)"} ${r}`)}static from(r,n=!0){return Object.assign(new this(r.message,n),r)}},wp=class e extends xo{constructor(r,n=!0){super(r,n);u(this,"name","CredentialsProviderError");Object.setPrototypeOf(this,e.prototype)}},vp=class e extends xo{constructor(r,n=!0){super(r,n);u(this,"name","TokenProviderError");Object.setPrototypeOf(this,e.prototype)}},mM=(...e)=>async()=>{if(e.length===0)throw new xo("No providers in chain");let t;for(let r of e)try{return await r()}catch(n){if(t=n,n?.tryNextLink)continue;throw n}throw t},hM=e=>()=>Promise.resolve(e),gM=(e,t,r)=>{let n,o,s,i=!1,a=async()=>{o||(o=e());try{n=await o,s=!0,i=!1}finally{o=void 0}return n};return t===void 0?async c=>((!s||c?.forceRefresh)&&(n=await a()),n):async c=>((!s||c?.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(t(n)&&await a(),n))};Mn.CredentialsProviderError=wp;Mn.ProviderError=xo;Mn.TokenProviderError=vp;Mn.chain=mM;Mn.fromStatic=hM;Mn.memoize=gM});var Cp,yw,Ew,Sw=v(()=>{Te();Cp=C(Be()),yw=e=>(e.sigv4aSigningRegionSet=br(e.sigv4aSigningRegionSet),e),Ew={environmentVariableSelector(e){if(e.AWS_SIGV4A_SIGNING_REGION_SET)return e.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(t=>t.trim());throw new Cp.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(e){if(e.sigv4a_signing_region_set)return(e.sigv4a_signing_region_set??"").split(",").map(t=>t.trim());throw new Cp.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var Gw=I(Y=>{"use strict";var Mr=ws(),Bn=Ce(),yM=qd(),Cw=re(),_w=je(),Xa=tf(),Aw="X-Amz-Algorithm",bw="X-Amz-Credential",Ip="X-Amz-Date",Tw="X-Amz-SignedHeaders",xw="X-Amz-Expires",Pp="X-Amz-Signature",Op="X-Amz-Security-Token",EM="X-Amz-Region-Set",Np="authorization",Dp=Ip.toLowerCase(),Rw="date",Iw=[Np,Dp,Rw],Pw=Pp.toLowerCase(),tc="x-amz-content-sha256",Ow=Op.toLowerCase(),SM="host",Nw={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Dw=/^proxy-/,kw=/^sec-/,_M=[/^proxy-/i,/^sec-/i],Qa="AWS4-HMAC-SHA256",wM="AWS4-ECDSA-P256-SHA256",Mw="AWS4-HMAC-SHA256-PAYLOAD",Bw="UNSIGNED-PAYLOAD",Fw=50,kp="aws4_request",Uw=3600*24*7,Ro={},Ja=[],Za=(e,t,r)=>`${e}/${t}/${r}/${kp}`,Lw=async(e,t,r,n,o)=>{let s=await ww(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${n}:${o}:${Mr.toHex(s)}:${t.sessionToken}`;if(i in Ro)return Ro[i];for(Ja.push(i);Ja.length>Fw;)delete Ro[Ja.shift()];let a=`AWS4${t.secretAccessKey}`;for(let c of[r,n,o,kp])a=await ww(e,a,c);return Ro[i]=a},vM=()=>{Ja.length=0,Object.keys(Ro).forEach(e=>{delete Ro[e]})},ww=(e,t,r)=>{let n=new e(t);return n.update(Bn.toUint8Array(r)),n.digest()},Ap=({headers:e},t,r)=>{let n={};for(let o of Object.keys(e).sort()){if(e[o]==null)continue;let s=o.toLowerCase();(s in Nw||t?.has(s)||Dw.test(s)||kw.test(s))&&(!r||r&&!r.has(s))||(n[s]=e[o].trim().replace(/\s+/g," "))}return n},ec=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===tc)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||yM.isArrayBuffer(t)){let n=new r;return n.update(Bn.toUint8Array(t)),Mr.toHex(await n.digest())}return Bw},bp=class{format(t){let r=[];for(let s of Object.keys(t)){let i=Bn.fromUtf8(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let n=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),o=0;for(let s of r)n.set(s,o),o+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let a=Bn.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let l=new Uint8Array(c.buffer);return l.set(a,3),l;case"timestamp":let m=new Uint8Array(9);return m[0]=8,m.set(Tp.fromNumber(t.value.valueOf()).bytes,1),m;case"uuid":if(!CM.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let p=new Uint8Array(17);return p[0]=9,p.set(Mr.fromHex(t.value.replace(/\-/g,"")),1),p}}},CM=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,Tp=class e{constructor(t){u(this,"bytes");if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&vw(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&vw(t),parseInt(Mr.toHex(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function vw(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var $w=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},Hw=(e,t={})=>{let{headers:r,query:n={}}=Cw.HttpRequest.clone(e);for(let o of Object.keys(r)){let s=o.toLowerCase();(s.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(s)||t.hoistableHeaders?.has(s))&&(n[o]=r[o],delete r[o])}return{...e,headers:r,query:n}},xp=e=>{e=Cw.HttpRequest.clone(e);for(let t of Object.keys(e.headers))Iw.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},qw=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e)){if(n.toLowerCase()===Pw)continue;let o=Xa.escapeUri(n);t.push(o);let s=e[n];typeof s=="string"?r[o]=`${o}=${Xa.escapeUri(s)}`:Array.isArray(s)&&(r[o]=s.slice(0).reduce((i,a)=>i.concat([`${o}=${Xa.escapeUri(a)}`]),[]).sort().join("&"))}return t.sort().map(n=>r[n]).filter(n=>n).join("&")},AM=e=>bM(e).toISOString().replace(/\.\d{3}Z$/,"Z"),bM=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e,rc=class{constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i=!0}){u(this,"service");u(this,"regionProvider");u(this,"credentialProvider");u(this,"sha256");u(this,"uriEscapePath");u(this,"applyChecksum");this.service=o,this.sha256=s,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=_w.normalizeProvider(n),this.credentialProvider=_w.normalizeProvider(r)}createCanonicalRequest(t,r,n){let o=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${qw(t)}
${o.map(s=>`${s}:${r[s]}`).join(`
`)}

${o.join(";")}
${n}`}async createStringToSign(t,r,n,o){let s=new this.sha256;s.update(Bn.toUint8Array(n));let i=await s.digest();return`${o}
${t}
${r}
${Mr.toHex(i)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let s of t.split("/"))s?.length!==0&&s!=="."&&(s===".."?r.pop():r.push(s));let n=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return Xa.escapeUri(n).replace(/%2F/g,"/")}return t}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(t){let r=AM(t).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(t){return Object.keys(t).sort().join(";")}},Rp=class extends rc{constructor({applyChecksum:r,credentials:n,region:o,service:s,sha256:i,uriEscapePath:a=!0}){super({applyChecksum:r,credentials:n,region:o,service:s,sha256:i,uriEscapePath:a});u(this,"headerFormatter",new bp)}async presign(r,n={}){let{signingDate:o=new Date,expiresIn:s=3600,unsignableHeaders:i,unhoistableHeaders:a,signableHeaders:c,hoistableHeaders:l,signingRegion:m,signingService:p}=n,h=await this.credentialProvider();this.validateResolvedCredentials(h);let g=m??await this.regionProvider(),{longDate:S,shortDate:b}=this.formatDate(o);if(s>Uw)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let x=Za(b,g,p??this.service),T=Hw(xp(r),{unhoistableHeaders:a,hoistableHeaders:l});h.sessionToken&&(T.query[Op]=h.sessionToken),T.query[Aw]=Qa,T.query[bw]=`${h.accessKeyId}/${x}`,T.query[Ip]=S,T.query[xw]=s.toString(10);let O=Ap(T,i,c);return T.query[Tw]=this.getCanonicalHeaderList(O),T.query[Pp]=await this.getSignature(S,x,this.getSigningKey(h,g,b,p),this.createCanonicalRequest(T,O,await ec(r,this.sha256))),T}async sign(r,n){return typeof r=="string"?this.signString(r,n):r.headers&&r.payload?this.signEvent(r,n):r.message?this.signMessage(r,n):this.signRequest(r,n)}async signEvent({headers:r,payload:n},{signingDate:o=new Date,priorSignature:s,signingRegion:i,signingService:a}){let c=i??await this.regionProvider(),{shortDate:l,longDate:m}=this.formatDate(o),p=Za(l,c,a??this.service),h=await ec({headers:{},body:n},this.sha256),g=new this.sha256;g.update(r);let S=Mr.toHex(await g.digest()),b=[Mw,m,p,s,S,h].join(`
`);return this.signString(b,{signingDate:o,signingRegion:c,signingService:a})}async signMessage(r,{signingDate:n=new Date,signingRegion:o,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(r.message.headers),payload:r.message.body},{signingDate:n,signingRegion:o,signingService:s,priorSignature:r.priorSignature}).then(a=>({message:r.message,signature:a}))}async signString(r,{signingDate:n=new Date,signingRegion:o,signingService:s}={}){let i=await this.credentialProvider();this.validateResolvedCredentials(i);let a=o??await this.regionProvider(),{shortDate:c}=this.formatDate(n),l=new this.sha256(await this.getSigningKey(i,a,c,s));return l.update(Bn.toUint8Array(r)),Mr.toHex(await l.digest())}async signRequest(r,{signingDate:n=new Date,signableHeaders:o,unsignableHeaders:s,signingRegion:i,signingService:a}={}){let c=await this.credentialProvider();this.validateResolvedCredentials(c);let l=i??await this.regionProvider(),m=xp(r),{longDate:p,shortDate:h}=this.formatDate(n),g=Za(h,l,a??this.service);m.headers[Dp]=p,c.sessionToken&&(m.headers[Ow]=c.sessionToken);let S=await ec(m,this.sha256);!$w(tc,m.headers)&&this.applyChecksum&&(m.headers[tc]=S);let b=Ap(m,s,o),x=await this.getSignature(p,g,this.getSigningKey(c,l,h,a),this.createCanonicalRequest(m,b,S));return m.headers[Np]=`${Qa} Credential=${c.accessKeyId}/${g}, SignedHeaders=${this.getCanonicalHeaderList(b)}, Signature=${x}`,m}async getSignature(r,n,o,s){let i=await this.createStringToSign(r,n,s,Qa),a=new this.sha256(await o);return a.update(Bn.toUint8Array(i)),Mr.toHex(await a.digest())}getSigningKey(r,n,o,s){return Lw(this.sha256,r,o,n,s||this.service)}},TM={SignatureV4a:null};Y.ALGORITHM_IDENTIFIER=Qa;Y.ALGORITHM_IDENTIFIER_V4A=wM;Y.ALGORITHM_QUERY_PARAM=Aw;Y.ALWAYS_UNSIGNABLE_HEADERS=Nw;Y.AMZ_DATE_HEADER=Dp;Y.AMZ_DATE_QUERY_PARAM=Ip;Y.AUTH_HEADER=Np;Y.CREDENTIAL_QUERY_PARAM=bw;Y.DATE_HEADER=Rw;Y.EVENT_ALGORITHM_IDENTIFIER=Mw;Y.EXPIRES_QUERY_PARAM=xw;Y.GENERATED_HEADERS=Iw;Y.HOST_HEADER=SM;Y.KEY_TYPE_IDENTIFIER=kp;Y.MAX_CACHE_SIZE=Fw;Y.MAX_PRESIGNED_TTL=Uw;Y.PROXY_HEADER_PATTERN=Dw;Y.REGION_SET_PARAM=EM;Y.SEC_HEADER_PATTERN=kw;Y.SHA256_HEADER=tc;Y.SIGNATURE_HEADER=Pw;Y.SIGNATURE_QUERY_PARAM=Pp;Y.SIGNED_HEADERS_QUERY_PARAM=Tw;Y.SignatureV4=Rp;Y.SignatureV4Base=rc;Y.TOKEN_HEADER=Ow;Y.TOKEN_QUERY_PARAM=Op;Y.UNSIGNABLE_PATTERNS=_M;Y.UNSIGNED_PAYLOAD=Bw;Y.clearCredentialCache=vM;Y.createScope=Za;Y.getCanonicalHeaders=Ap;Y.getCanonicalQuery=qw;Y.getPayloadHash=ec;Y.getSigningKey=Lw;Y.hasHeader=$w;Y.moveHeadersToQuery=Hw;Y.prepareRequest=xp;Y.signatureV4aContainer=TM});function xM(e,{credentials:t,credentialDefaultProvider:r}){let n;return t?t?.memoized?n=t:n=ip(t,sp,Va):r?n=br(r(Object.assign({},e,{parentClientConfig:e}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function RM(e,t){if(t.configBound)return t;let r=async n=>t({...n,callerClientConfig:e});return r.memoized=t.memoized,r.configBound=!0,r}var Mp,lr,jw,zw=v(()=>{dt();Te();Mp=C(Gw()),lr=e=>{let t=e.credentials,r=!!e.credentials,n;Object.defineProperty(e,"credentials",{set(l){l&&l!==t&&l!==n&&(r=!0),t=l;let m=xM(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}),p=RM(e,m);r&&!p.attributed?(n=async h=>p(h).then(g=>Dr(g,"CREDENTIALS_CODE","e")),n.memoized=p.memoized,n.configBound=p.configBound,n.attributed=!0):n=p},get(){return n},enumerable:!0,configurable:!0}),e.credentials=t;let{signingEscapePath:o=!0,systemClockOffset:s=e.systemClockOffset||0,sha256:i}=e,a;return e.signer?a=br(e.signer):e.regionInfoProvider?a=()=>br(e.region)().then(async l=>[await e.regionInfoProvider(l,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},l]).then(([l,m])=>{let{signingRegion:p,signingService:h}=l;e.signingRegion=e.signingRegion||p||m,e.signingName=e.signingName||h||e.serviceId;let g={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:o},S=e.signerConstructor||Mp.SignatureV4;return new S(g)}):a=async l=>{l=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await br(e.region)(),properties:{}},l);let m=l.signingRegion,p=l.signingName;e.signingRegion=e.signingRegion||m,e.signingName=e.signingName||p||e.serviceId;let h={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:o},g=e.signerConstructor||Mp.SignatureV4;return new g(h)},Object.assign(e,{systemClockOffset:s,signingEscapePath:o,signer:a})},jw=lr});var Vw=v(()=>{Ep();fw();gw();Sw();zw()});var Ww={};Ge(Ww,{AWSSDKSigV4Signer:()=>yp,AwsSdkSigV4ASigner:()=>Ms,AwsSdkSigV4Signer:()=>Me,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>kr,NODE_SIGV4A_CONFIG_OPTIONS:()=>Ew,getBearerTokenEnvKey:()=>Ya,resolveAWSSDKSigV4Config:()=>jw,resolveAwsSdkSigV4AConfig:()=>yw,resolveAwsSdkSigV4Config:()=>lr,validateSigningProperties:()=>To});var Bp=v(()=>{Vw();_p()});function Br(e){return typeof Buffer<"u"?Buffer.alloc(e):new Uint8Array(e)}function nc(e){return e[Fp]=!0,e}var Fp,oc=v(()=>{Fp=Symbol("@smithy/core/cbor::tagSymbol")});function Xw(e){ce=e,fr=new DataView(ce.buffer,ce.byteOffset,ce.byteLength)}function Ut(e,t){if(e>=t)throw new Error("unexpected end of (decode) payload.");let r=(ce[e]&224)>>5,n=ce[e]&31;switch(r){case 0:case 1:case 6:let o,s;if(n<24)o=n,s=1;else switch(n){case 24:case 25:case 26:case 27:let i=Jw[n],a=i+1;if(s=a,t-e<a)throw new Error(`countLength ${i} greater than remaining buf len.`);let c=e+1;i===1?o=ce[c]:i===2?o=fr.getUint16(c):i===4?o=fr.getUint32(c):o=fr.getBigUint64(c);break;default:throw new Error(`unexpected minor value ${n}.`)}if(r===0)return X=s,Up(o);if(r===1){let i;return typeof o=="bigint"?i=BigInt(-1)-o:i=-1-o,X=s,Up(i)}else if(n===2||n===3){let i=Ls(e+s,t),a=BigInt(0),c=e+s+X;for(let l=c;l<c+i;++l)a=a<<BigInt(8)|BigInt(ce[l]);return X=s+X+i,n===3?-a-BigInt(1):a}else if(n===4){let i=Ut(e+s,t),[a,c]=i,l=c<0?-1:1,m="0".repeat(Math.abs(a)+1)+String(BigInt(l)*BigInt(c)),p,h=c<0?"-":"";return p=a===0?m:m.slice(0,m.length+a)+"."+m.slice(a),p=p.replace(/^0+/g,""),p===""&&(p="0"),p[0]==="."&&(p="0"+p),p=h+p,X=s+X,Wf(p)}else{let i=Ut(e+s,t);return X=s+X,nc({tag:Up(o),value:i})}case 3:case 5:case 4:case 2:if(n===31)switch(r){case 3:return MM(e,t);case 5:return $M(e,t);case 4:return UM(e,t);case 2:return BM(e,t)}else switch(r){case 3:return kM(e,t);case 5:return LM(e,t);case 4:return FM(e,t);case 2:return jp(e,t)}default:return HM(e,t)}}function Qw(e,t,r){return OM&&e.constructor?.name==="Buffer"?e.toString("utf-8",t,r):Kw?Kw.decode(e.subarray(t,r)):(0,Yw.toUtf8)(e.subarray(t,r))}function NM(e){let t=Number(e);return(t<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<t)&&console.warn(new Error(`@smithy/core/cbor - truncating BigInt(${e}) to ${t} with loss of precision.`)),t}function DM(e,t){let r=e>>7,n=(e&124)>>2,o=(e&3)<<8|t,s=r===0?1:-1,i,a;if(n===0){if(o===0)return 0;i=Math.pow(2,-14),a=0}else{if(n===31)return o===0?s*(1/0):NaN;i=Math.pow(2,n-15),a=1}return a+=o/1024,s*(i*a)}function Ls(e,t){let r=ce[e]&31;if(r<24)return X=1,r;if(r===24||r===25||r===26||r===27){let n=Jw[r];if(X=n+1,t-e<X)throw new Error(`countLength ${n} greater than remaining buf len.`);let o=e+1;return n===1?ce[o]:n===2?fr.getUint16(o):n===4?fr.getUint32(o):NM(fr.getBigUint64(o))}throw new Error(`unexpected minor value ${r}.`)}function kM(e,t){let r=Ls(e,t),n=X;if(e+=n,t-e<r)throw new Error(`string len ${r} greater than remaining buf len.`);let o=Qw(ce,e,e+r);return X=n+r,o}function MM(e,t){e+=1;let r=[];for(let n=e;e<t;){if(ce[e]===255){let c=Br(r.length);return c.set(r,0),X=e-n+2,Qw(c,0,c.length)}let o=(ce[e]&224)>>5,s=ce[e]&31;if(o!==3)throw new Error(`unexpected major type ${o} in indefinite string.`);if(s===31)throw new Error("nested indefinite string.");let i=jp(e,t);e+=X;for(let c=0;c<i.length;++c)r.push(i[c])}throw new Error("expected break marker.")}function jp(e,t){let r=Ls(e,t),n=X;if(e+=n,t-e<r)throw new Error(`unstructured byte string len ${r} greater than remaining buf len.`);let o=ce.subarray(e,e+r);return X=n+r,o}function BM(e,t){e+=1;let r=[];for(let n=e;e<t;){if(ce[e]===255){let c=Br(r.length);return c.set(r,0),X=e-n+2,c}let o=(ce[e]&224)>>5,s=ce[e]&31;if(o!==2)throw new Error(`unexpected major type ${o} in indefinite string.`);if(s===31)throw new Error("nested indefinite string.");let i=jp(e,t);e+=X;for(let c=0;c<i.length;++c)r.push(i[c])}throw new Error("expected break marker.")}function FM(e,t){let r=Ls(e,t),n=X;e+=n;let o=e,s=Array(r);for(let i=0;i<r;++i){let a=Ut(e,t),c=X;s[i]=a,e+=c}return X=n+(e-o),s}function UM(e,t){e+=1;let r=[];for(let n=e;e<t;){if(ce[e]===255)return X=e-n+2,r;let o=Ut(e,t);e+=X,r.push(o)}throw new Error("expected break marker.")}function LM(e,t){let r=Ls(e,t),n=X;e+=n;let o=e,s={};for(let i=0;i<r;++i){if(e>=t)throw new Error("unexpected end of map payload.");let a=(ce[e]&224)>>5;if(a!==3)throw new Error(`unexpected major type ${a} for map key at index ${e}.`);let c=Ut(e,t);e+=X;let l=Ut(e,t);e+=X,s[c]=l}return X=n+(e-o),s}function $M(e,t){e+=1;let r=e,n={};for(;e<t;){if(e>=t)throw new Error("unexpected end of map payload.");if(ce[e]===255)return X=e-r+2,n;let o=(ce[e]&224)>>5;if(o!==3)throw new Error(`unexpected major type ${o} for map key.`);let s=Ut(e,t);e+=X;let i=Ut(e,t);e+=X,n[s]=i}throw new Error("expected break marker.")}function HM(e,t){let r=ce[e]&31;switch(r){case 21:case 20:return X=1,r===21;case 22:return X=1,null;case 23:return X=1,null;case 25:if(t-e<3)throw new Error("incomplete float16 at end of buf.");return X=3,DM(ce[e+1],ce[e+2]);case 26:if(t-e<5)throw new Error("incomplete float32 at end of buf.");return X=5,fr.getFloat32(e+1);case 27:if(t-e<9)throw new Error("incomplete float64 at end of buf.");return X=9,fr.getFloat64(e+1);default:throw new Error(`unexpected minor value ${r}.`)}}function Up(e){if(typeof e=="number")return e;let t=Number(e);return Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:e}var Yw,PM,OM,ce,fr,Kw,X,Jw,Zw=v(()=>{Qe();Yw=C(Ce());oc();PM=typeof TextDecoder<"u",OM=typeof Buffer<"u",ce=Br(0),fr=new DataView(ce.buffer,ce.byteOffset,ce.byteLength),Kw=PM?new TextDecoder:null,X=0;Jw={24:1,25:2,26:4,27:8}});function Vp(e){q.byteLength-U<e&&(U<16e6?ic(Math.max(q.byteLength*4,q.byteLength+e)):ic(q.byteLength+e+16e6))}function Wp(){let e=Br(U);return e.set(q.subarray(0,U),0),U=0,e}function ic(e){let t=q;q=Br(e),t&&(t.copy?t.copy(q,0,0,t.byteLength):q.set(t,0)),hr=new DataView(q.buffer,q.byteOffset,q.byteLength)}function mr(e,t){t<24?q[U++]=e<<5|t:t<256?(q[U++]=e<<5|24,q[U++]=t):t<65536?(q[U++]=e<<5|25,hr.setUint16(U,t),U+=2):t<2**32?(q[U++]=e<<5|26,hr.setUint32(U,t),U+=4):(q[U++]=e<<5|27,hr.setBigUint64(U,typeof t=="bigint"?t:BigInt(t)),U+=8)}function r0(e){let t=[e];for(;t.length;){let r=t.pop();if(Vp(typeof r=="string"?r.length*4:64),typeof r=="string"){if(e0)mr(3,Buffer.byteLength(r)),U+=q.write(r,U);else{let n=(0,t0.fromUtf8)(r);mr(3,n.byteLength),q.set(n,U),U+=n.byteLength}continue}else if(typeof r=="number"){if(Number.isInteger(r)){let n=r>=0,o=n?0:1,s=n?r:-r-1;s<24?q[U++]=o<<5|s:s<256?(q[U++]=o<<5|24,q[U++]=s):s<65536?(q[U++]=o<<5|25,q[U++]=s>>8,q[U++]=s):s<4294967296?(q[U++]=o<<5|26,hr.setUint32(U,s),U+=4):(q[U++]=o<<5|27,hr.setBigUint64(U,BigInt(s)),U+=8);continue}q[U++]=251,hr.setFloat64(U,r),U+=8;continue}else if(typeof r=="bigint"){let n=r>=0,o=n?0:1,s=n?r:-r-BigInt(1),i=Number(s);if(i<24)q[U++]=o<<5|i;else if(i<256)q[U++]=o<<5|24,q[U++]=i;else if(i<65536)q[U++]=o<<5|25,q[U++]=i>>8,q[U++]=i&255;else if(i<4294967296)q[U++]=o<<5|26,hr.setUint32(U,i),U+=4;else if(s<BigInt("18446744073709551616"))q[U++]=o<<5|27,hr.setBigUint64(U,s),U+=8;else{let a=s.toString(2),c=new Uint8Array(Math.ceil(a.length/8)),l=s,m=0;for(;c.byteLength-++m>=0;)c[c.byteLength-m]=Number(l&BigInt(255)),l>>=BigInt(8);Vp(c.byteLength*2),q[U++]=n?194:195,e0?mr(2,Buffer.byteLength(c)):mr(2,c.byteLength),q.set(c,U),U+=c.byteLength}continue}else if(r===null){q[U++]=246;continue}else if(typeof r=="boolean"){q[U++]=224|(r?21:20);continue}else{if(typeof r>"u")throw new Error("@smithy/core/cbor: client may not serialize undefined value.");if(Array.isArray(r)){for(let n=r.length-1;n>=0;--n)t.push(r[n]);mr(4,r.length);continue}else if(typeof r.byteLength=="number"){Vp(r.length*2),mr(2,r.length),q.set(r,U),U+=r.byteLength;continue}else if(typeof r=="object"){if(r instanceof fe){let o=r.string.indexOf("."),s=o===-1?0:o-r.string.length+1,i=BigInt(r.string.replace(".",""));q[U++]=196,t.push(i),t.push(s),mr(4,2);continue}if(r[Fp])if("tag"in r&&"value"in r){t.push(r.value),mr(6,r.tag);continue}else throw new Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(r));let n=Object.keys(r);for(let o=n.length-1;o>=0;--o){let s=n[o];t.push(r[s]),t.push(s)}mr(5,n.length);continue}}throw new Error(`data type ${r?.constructor?.name??typeof r} not compatible for encoding.`)}}var t0,e0,qM,q,hr,U,n0=v(()=>{Qe();t0=C(Ce());oc();e0=typeof Buffer<"u",qM=2048,q=Br(qM),hr=new DataView(q.buffer,q.byteOffset,q.byteLength),U=0});var Kp,o0=v(()=>{Zw();n0();Kp={deserialize(e){return Xw(e),Ut(0,e.length)},serialize(e){try{return r0(e),Wp()}catch(t){throw Wp(),t}},resizeEncodingBuffer(e){ic(e)}}});var ac,cc,uc=v(()=>{oc();ac=e=>nc({tag:1,value:e.getTime()/1e3}),cc=(e,t)=>{let r=o=>{let s=o;return typeof s=="number"&&(s=s.toString()),s.indexOf(",")>=0&&(s=s.split(",")[0]),s.indexOf(":")>=0&&(s=s.split(":")[0]),s.indexOf("#")>=0&&(s=s.split("#")[1]),s};if(t.__type!==void 0)return r(t.__type);let n=Object.keys(t).find(o=>o.toLowerCase()==="code");if(n&&t[n]!==void 0)return r(t[n])}});var Qp,lc,Yp,Xp,Jp=v(()=>{Je();te();Qe();Qp=C(Ae());o0();uc();lc=class extends We{createSerializer(){let t=new Yp;return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new Xp;return t.setSerdeContext(this.serdeContext),t}},Yp=class extends We{constructor(){super(...arguments);u(this,"value")}write(r,n){this.value=this.serialize(r,n)}serialize(r,n){let o=B.of(r);if(n==null)return o.isIdempotencyToken()?(0,lt.v4)():n;if(o.isBlobSchema())return typeof n=="string"?(this.serdeContext?.base64Decoder??Qp.fromBase64)(n):n;if(o.isTimestampSchema())return typeof n=="number"||typeof n=="bigint"?ac(new Date(Number(n)/1e3|0)):ac(n);if(typeof n=="function"||typeof n=="object"){let s=n;if(o.isListSchema()&&Array.isArray(s)){let a=!!o.getMergedTraits().sparse,c=[],l=0;for(let m of s){let p=this.serialize(o.getValueSchema(),m);(p!=null||a)&&(c[l++]=p)}return c}if(s instanceof Date)return ac(s);let i={};if(o.isMapSchema()){let a=!!o.getMergedTraits().sparse;for(let c of Object.keys(s)){let l=this.serialize(o.getValueSchema(),s[c]);(l!=null||a)&&(i[c]=l)}}else if(o.isStructSchema())for(let[a,c]of o.structIterator()){let l=this.serialize(c,s[a]);l!=null&&(i[a]=l)}else if(o.isDocumentSchema())for(let a of Object.keys(s))i[a]=this.serialize(o.getValueSchema(),s[a]);return i}return n}flush(){let r=Kp.serialize(this.value);return this.value=void 0,r}},Xp=class extends We{read(t,r){let n=Kp.deserialize(r);return this.readValue(t,n)}readValue(t,r){let n=B.of(t);if(n.isTimestampSchema()&&typeof r=="number")return Ps(r);if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??Qp.fromBase64)(r):r;if(typeof r>"u"||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="bigint"||typeof r=="symbol")return r;if(typeof r=="function"||typeof r=="object"){if(r===null)return null;if("byteLength"in r||r instanceof Date||n.isDocumentSchema())return r;if(n.isListSchema()){let s=[],i=n.getValueSchema(),a=!!n.getMergedTraits().sparse;for(let c of r){let l=this.readValue(i,c);(l!=null||a)&&s.push(l)}return s}let o={};if(n.isMapSchema()){let s=!!n.getMergedTraits().sparse,i=n.getValueSchema();for(let a of Object.keys(r)){let c=this.readValue(i,r[a]);(c!=null||s)&&(o[a]=c)}}else if(n.isStructSchema())for(let[s,i]of n.structIterator()){let a=this.readValue(i,r[s]);a!=null&&(o[s]=a)}return o}else return r}}});var s0,dc,i0=v(()=>{Je();te();s0=C(je());Jp();uc();dc=class extends sr{constructor({defaultNamespace:r}){super({defaultNamespace:r});u(this,"codec",new lc);u(this,"serializer",this.codec.createSerializer());u(this,"deserializer",this.codec.createDeserializer())}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(r,n,o){let s=await super.serializeRequest(r,n,o);if(Object.assign(s.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),vt(r.input)==="unit")delete s.body,delete s.headers["content-type"];else{s.body||(this.serializer.write(15,{}),s.body=this.serializer.flush());try{s.headers["content-length"]=String(s.body.byteLength)}catch{}}let{service:i,operation:a}=(0,s0.getSmithyContext)(o),c=`/service/${i}/operation/${a}`;return s.path.endsWith("/")?s.path+=c.slice(1):s.path+=c,s}async deserializeResponse(r,n,o){return super.deserializeResponse(r,n,o)}async handleError(r,n,o,s,i){let a=cc(o,s)??"Unknown",c=this.options.defaultNamespace;a.includes("#")&&([c]=a.split("#"));let l={$metadata:i,$fault:o.statusCode<=500?"client":"server"},m=H.for(c),p;try{p=m.getSchema(a)}catch{s.Message&&(s.message=s.Message);let O=H.for("smithy.ts.sdk.synthetic."+c),D=O.getBaseException();if(D){let F=O.getErrorCtor(D);throw Object.assign(new F({name:a}),l,s)}throw Object.assign(new Error(a),l,s)}let h=B.of(p),g=m.getErrorCtor(p),S=s.message??s.Message??"Unknown",b=new g(S),x={};for(let[T,O]of h.structIterator())x[T]=this.deserializer.readValue(O,s[T]);throw Object.assign(b,l,{$fault:h.getMergedTraits().error,message:S},x)}getDefaultContentType(){return"application/cbor"}}});var a0=v(()=>{uc();i0();Jp()});var d0=I(l0=>{"use strict";var Fn=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let n of t)r.push(n);return r},$r=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,Zp=()=>{let e=[],t=[],r=!1,n=new Set,o=p=>p.sort((h,g)=>c0[g.step]-c0[h.step]||u0[g.priority||"normal"]-u0[h.priority||"normal"]),s=p=>{let h=!1,g=S=>{let b=Fn(S.name,S.aliases);if(b.includes(p)){h=!0;for(let x of b)n.delete(x);return!1}return!0};return e=e.filter(g),t=t.filter(g),h},i=p=>{let h=!1,g=S=>{if(S.middleware===p){h=!0;for(let b of Fn(S.name,S.aliases))n.delete(b);return!1}return!0};return e=e.filter(g),t=t.filter(g),h},a=p=>(e.forEach(h=>{p.add(h.middleware,{...h})}),t.forEach(h=>{p.addRelativeTo(h.middleware,{...h})}),p.identifyOnResolve?.(m.identifyOnResolve()),p),c=p=>{let h=[];return p.before.forEach(g=>{g.before.length===0&&g.after.length===0?h.push(g):h.push(...c(g))}),h.push(p),p.after.reverse().forEach(g=>{g.before.length===0&&g.after.length===0?h.push(g):h.push(...c(g))}),h},l=(p=!1)=>{let h=[],g=[],S={};return e.forEach(x=>{let T={...x,before:[],after:[]};for(let O of Fn(T.name,T.aliases))S[O]=T;h.push(T)}),t.forEach(x=>{let T={...x,before:[],after:[]};for(let O of Fn(T.name,T.aliases))S[O]=T;g.push(T)}),g.forEach(x=>{if(x.toMiddleware){let T=S[x.toMiddleware];if(T===void 0){if(p)return;throw new Error(`${x.toMiddleware} is not found when adding ${$r(x.name,x.aliases)} middleware ${x.relation} ${x.toMiddleware}`)}x.relation==="after"&&T.after.push(x),x.relation==="before"&&T.before.push(x)}}),o(h).map(c).reduce((x,T)=>(x.push(...T),x),[])},m={add:(p,h={})=>{let{name:g,override:S,aliases:b}=h,x={step:"initialize",priority:"normal",middleware:p,...h},T=Fn(g,b);if(T.length>0){if(T.some(O=>n.has(O))){if(!S)throw new Error(`Duplicate middleware name '${$r(g,b)}'`);for(let O of T){let D=e.findIndex($=>$.name===O||$.aliases?.some(z=>z===O));if(D===-1)continue;let F=e[D];if(F.step!==x.step||x.priority!==F.priority)throw new Error(`"${$r(F.name,F.aliases)}" middleware with ${F.priority} priority in ${F.step} step cannot be overridden by "${$r(g,b)}" middleware with ${x.priority} priority in ${x.step} step.`);e.splice(D,1)}}for(let O of T)n.add(O)}e.push(x)},addRelativeTo:(p,h)=>{let{name:g,override:S,aliases:b}=h,x={middleware:p,...h},T=Fn(g,b);if(T.length>0){if(T.some(O=>n.has(O))){if(!S)throw new Error(`Duplicate middleware name '${$r(g,b)}'`);for(let O of T){let D=t.findIndex($=>$.name===O||$.aliases?.some(z=>z===O));if(D===-1)continue;let F=t[D];if(F.toMiddleware!==x.toMiddleware||F.relation!==x.relation)throw new Error(`"${$r(F.name,F.aliases)}" middleware ${F.relation} "${F.toMiddleware}" middleware cannot be overridden by "${$r(g,b)}" middleware ${x.relation} "${x.toMiddleware}" middleware.`);t.splice(D,1)}}for(let O of T)n.add(O)}t.push(x)},clone:()=>a(Zp()),use:p=>{p.applyToStack(m)},remove:p=>typeof p=="string"?s(p):i(p),removeByTag:p=>{let h=!1,g=S=>{let{tags:b,name:x,aliases:T}=S;if(b&&b.includes(p)){let O=Fn(x,T);for(let D of O)n.delete(D);return h=!0,!1}return!0};return e=e.filter(g),t=t.filter(g),h},concat:p=>{let h=a(Zp());return h.use(p),h.identifyOnResolve(r||h.identifyOnResolve()||(p.identifyOnResolve?.()??!1)),h},applyToStack:a,identify:()=>l(!0).map(p=>{let h=p.step??p.relation+" "+p.toMiddleware;return $r(p.name,p.aliases)+" - "+h}),identifyOnResolve(p){return typeof p=="boolean"&&(r=p),r},resolve:(p,h)=>{for(let g of l().map(S=>S.middleware).reverse())p=g(p,h);return r&&console.log(m.identify()),p}};return m},c0={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},u0={high:3,normal:2,low:1};l0.constructStack=Zp});var j=I(ie=>{"use strict";var m0=d0(),cm=(Je(),K(y_)),tm=Cr(),GM=(te(),K(Na)),f0=(Qe(),K(n_)),rm=class{constructor(t){u(this,"config");u(this,"middlewareStack",m0.constructStack());u(this,"initConfig");u(this,"handlers");this.config=t}send(t,r,n){let o=typeof r!="function"?r:void 0,s=typeof r=="function"?r:n,i=o===void 0&&this.config.cacheMiddleware===!0,a;if(i){this.handlers||(this.handlers=new WeakMap);let c=this.handlers;c.has(t.constructor)?a=c.get(t.constructor):(a=t.resolveMiddleware(this.middlewareStack,this.config,o),c.set(t.constructor,a))}else delete this.handlers,a=t.resolveMiddleware(this.middlewareStack,this.config,o);if(s)a(t).then(c=>s(null,c.output),c=>s(c)).catch(()=>{});else return a(t).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},em="***SensitiveInformation***";function nm(e,t){if(t==null)return t;let r=GM.NormalizedSchema.of(e);if(r.getMergedTraits().sensitive)return em;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return em}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return em}else if(r.isStructSchema()&&typeof t=="object"){let n=t,o={};for(let[s,i]of r.structIterator())n[s]!=null&&(o[s]=nm(i,n[s]));return o}return t}var fc=class{constructor(){u(this,"middlewareStack",m0.constructStack());u(this,"schema")}static classBuilder(){return new om}resolveMiddlewareWithContext(t,r,n,{middlewareFn:o,clientName:s,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:l,additionalContext:m,CommandCtor:p}){for(let x of o.bind(this)(p,t,r,n))this.middlewareStack.use(x);let h=t.concat(this.middlewareStack),{logger:g}=r,S={logger:g,clientName:s,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[tm.SMITHY_CONTEXT_KEY]:{commandInstance:this,...l},...m},{requestHandler:b}=r;return h.resolve(x=>b.handle(x.request,n||{}),S)}},om=class{constructor(){u(this,"_init",()=>{});u(this,"_ep",{});u(this,"_middlewareFn",()=>[]);u(this,"_commandName","");u(this,"_clientName","");u(this,"_additionalContext",{});u(this,"_smithyContext",{});u(this,"_inputFilterSensitiveLog");u(this,"_outputFilterSensitiveLog");u(this,"_serializer",null);u(this,"_deserializer",null);u(this,"_operationSchema")}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,n={}){return this._smithyContext={service:t,operation:r,...n},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=n=>n,r=n=>n){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}sc(t){return this._operationSchema=t,this._smithyContext.operationSchema=t,this}build(){let t=this,r;return r=class extends fc{constructor(...[o]){super();u(this,"input");u(this,"serialize",t._serializer);u(this,"deserialize",t._deserializer);this.input=o??{},t._init(this),this.schema=t._operationSchema}static getEndpointParameterInstructions(){return t._ep}resolveMiddleware(o,s,i){let a=t._operationSchema,c=a?.[4]??a?.input,l=a?.[5]??a?.output;return this.resolveMiddlewareWithContext(o,s,i,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog??(a?nm.bind(null,c):m=>m),outputFilterSensitiveLog:t._outputFilterSensitiveLog??(a?nm.bind(null,l):m=>m),smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}},jM="***SensitiveInformation***",zM=(e,t)=>{for(let r of Object.keys(e)){let n=e[r],o=async function(i,a,c){let l=new n(i);if(typeof a=="function")this.send(l,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(l,a||{},c)}else return this.send(l,a)},s=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[s]=o}},sm=class e extends Error{constructor(r){super(r.message);u(this,"$fault");u(this,"$response");u(this,"$retryable");u(this,"$metadata");Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=r.name,this.$fault=r.$fault,this.$metadata=r.$metadata}static isInstance(r){if(!r)return!1;let n=r;return e.prototype.isPrototypeOf(n)||!!n.$fault&&!!n.$metadata&&(n.$fault==="client"||n.$fault==="server")}static[Symbol.hasInstance](r){if(!r)return!1;let n=r;return this===e?e.isInstance(r):e.isInstance(r)?n.name&&this.name?this.prototype.isPrototypeOf(r)||n.name===this.name:this.prototype.isPrototypeOf(r):!1}},h0=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(e[n]==null||e[n]==="")&&(e[n]=o)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},g0=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let o=WM(e),s=o.httpStatusCode?o.httpStatusCode+"":void 0,i=new r({name:t?.code||t?.Code||n||s||"UnknownError",$fault:"client",$metadata:o});throw h0(i,t)},VM=e=>({output:t,parsedBody:r,errorCode:n})=>{g0({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},WM=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),KM=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},p0=!1,YM=e=>{e&&!p0&&parseInt(e.substring(1,e.indexOf(".")))<16&&(p0=!0)},XM=e=>{let t=[];for(let r in tm.AlgorithmId){let n=tm.AlgorithmId[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},QM=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},JM=e=>({setRetryStrategy(t){e.retryStrategy=t},retryStrategy(){return e.retryStrategy}}),ZM=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t},y0=e=>Object.assign(XM(e),JM(e)),eB=y0,tB=e=>Object.assign(QM(e),ZM(e)),rB=e=>Array.isArray(e)?e:[e],E0=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=E0(e[r]));return e},nB=e=>e!=null,im=class{trace(){}debug(){}info(){}warn(){}error(){}};function S0(e,t,r){let n,o,s;if(typeof t>"u"&&typeof r>"u")n={},s=e;else{if(n=e,typeof t=="function")return o=t,s=r,iB(n,o,s);s=t}for(let i of Object.keys(s)){if(!Array.isArray(s[i])){n[i]=s[i];continue}_0(n,null,s,i)}return n}var oB=e=>{let t={};for(let[r,n]of Object.entries(e||{}))t[r]=[,n];return t},sB=(e,t)=>{let r={};for(let n in t)_0(r,e,t,n);return r},iB=(e,t,r)=>S0(e,Object.entries(r).reduce((n,[o,s])=>(Array.isArray(s)?n[o]=s:typeof s=="function"?n[o]=[t,s()]:n[o]=[t,s],n),{})),_0=(e,t,r,n)=>{if(t!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=aB,c=cB,l=n]=i;(typeof a=="function"&&a(t[l])||typeof a!="function"&&a)&&(e[n]=c(t[l]));return}let[o,s]=r[n];if(typeof s=="function"){let i,a=o===void 0&&(i=s())!=null,c=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;a?e[n]=i:c&&(e[n]=s())}else{let i=o===void 0&&s!=null,a=typeof o=="function"&&!!o(s)||typeof o!="function"&&!!o;(i||a)&&(e[n]=s)}},aB=e=>e!=null,cB=e=>e,uB=e=>{if(e!==e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}},lB=e=>e.toISOString().replace(".000Z","Z"),am=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(am);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=am(e[r]));return t}return e};Object.defineProperty(ie,"collectBody",{enumerable:!0,get:function(){return cm.collectBody}});Object.defineProperty(ie,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return cm.extendedEncodeURIComponent}});Object.defineProperty(ie,"resolvedPath",{enumerable:!0,get:function(){return cm.resolvedPath}});ie.Client=rm;ie.Command=fc;ie.NoOpLogger=im;ie.SENSITIVE_STRING=jM;ie.ServiceException=sm;ie._json=am;ie.convertMap=oB;ie.createAggregatedClient=zM;ie.decorateServiceException=h0;ie.emitWarningIfUnsupportedVersion=YM;ie.getArrayIfSingleItem=rB;ie.getDefaultClientConfiguration=eB;ie.getDefaultExtensionConfiguration=y0;ie.getValueFromTextNode=E0;ie.isSerializableHeaderValue=nB;ie.loadConfigsForDefaultMode=KM;ie.map=S0;ie.resolveDefaultRuntimeConfig=tB;ie.serializeDateTime=lB;ie.serializeFloat=uB;ie.take=sB;ie.throwDefaultError=g0;ie.withBaseException=VM;Object.keys(f0).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ie,e)&&Object.defineProperty(ie,e,{enumerable:!0,get:function(){return f0[e]}})})});var um,ft,Po=v(()=>{te();um=C(j()),ft=class{constructor(t=!1){u(this,"queryCompat");this.queryCompat=t}resolveRestContentType(t,r){let n=r.getMemberSchemas(),o=Object.values(n).find(s=>!!s.getMergedTraits().httpPayload);if(o){let s=o.getMergedTraits().mediaType;return s||(o.isStringSchema()?"text/plain":o.isBlobSchema()?"application/octet-stream":t)}else if(!r.isUnitSchema()&&Object.values(n).find(i=>{let{httpQuery:a,httpQueryParams:c,httpHeader:l,httpLabel:m,httpPrefixHeaders:p}=i.getMergedTraits();return!a&&!c&&!l&&!m&&p===void 0}))return t}async getErrorSchemaOrThrowBaseException(t,r,n,o,s,i){let a=r,c=t;t.includes("#")&&([a,c]=t.split("#"));let l={$metadata:s,$fault:n.statusCode<500?"client":"server"},m=H.for(a);try{return{errorSchema:i?.(m,c)??m.getSchema(t),errorMetadata:l}}catch{o.message=o.message??o.Message??"UnknownError";let h=H.for("smithy.ts.sdk.synthetic."+a),g=h.getBaseException();if(g){let S=h.getErrorCtor(g)??Error;throw this.decorateServiceException(Object.assign(new S({name:c}),l),o)}throw this.decorateServiceException(Object.assign(new Error(c),l),o)}}decorateServiceException(t,r={}){if(this.queryCompat){let n=t.Message??r.Message,o=(0,um.decorateServiceException)(t,r);return n&&(o.Message=n,o.message=n),o}return(0,um.decorateServiceException)(t,r)}setQueryCompatError(t,r){let n=r.headers?.["x-amzn-query-error"];if(t!==void 0&&n!=null){let[o,s]=n.split(";"),i=Object.entries(t),a={Code:o,Type:s};Object.assign(t,a);for(let[c,l]of i)a[c]=l;delete a.__type,t.Error=a}}queryCompatOutput(t,r){t.Error&&(r.Error=t.Error),t.Type&&(r.Type=t.Type),t.Code&&(r.Code=t.Code)}}});var pc,w0=v(()=>{a0();te();Po();pc=class extends dc{constructor({defaultNamespace:r,awsQueryCompatible:n}){super({defaultNamespace:r});u(this,"awsQueryCompatible");u(this,"mixin");this.awsQueryCompatible=!!n,this.mixin=new ft(this.awsQueryCompatible)}async serializeRequest(r,n,o){let s=await super.serializeRequest(r,n,o);return this.awsQueryCompatible&&(s.headers["x-amzn-query-mode"]="true"),s}async handleError(r,n,o,s,i){this.awsQueryCompatible&&this.mixin.setQueryCompatError(s,o);let a=cc(o,s)??"Unknown",{errorSchema:c,errorMetadata:l}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,o,s,i),m=B.of(c),p=s.message??s.Message??"Unknown",h=H.for(c[1]).getErrorCtor(c)??Error,g=new h(p),S={};for(let[b,x]of m.structIterator())S[b]=this.deserializer.readValue(x,s[b]);throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(s,S),this.mixin.decorateServiceException(Object.assign(g,l,{$fault:m.getMergedTraits().error,message:p},S),s)}}});var v0,C0,A0,b0=v(()=>{v0=e=>{if(e==null)return e;if(typeof e=="number"||typeof e=="bigint"){let t=new Error(`Received number ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}if(typeof e=="boolean"){let t=new Error(`Received boolean ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}return e},C0=e=>{if(e==null)return e;if(typeof e=="string"){let t=e.toLowerCase();if(e!==""&&t!=="false"&&t!=="true"){let r=new Error(`Received string "${e}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return e!==""&&t!=="false"}return e},A0=e=>{if(e==null)return e;if(typeof e=="string"){let t=Number(e);if(t.toString()!==e){let r=new Error(`Received string "${e}" where a number was expected.`);return r.name="Warning",console.warn(r),e}return t}return e}});var Fe,Hr=v(()=>{Fe=class{constructor(){u(this,"serdeContext")}setSerdeContext(t){this.serdeContext=t}}});function*Oo(e,t){if(e.isUnitSchema())return;let r=e.getSchema();for(let n=0;n<r[4].length;++n){let o=r[4][n],s=new B([r[5][n],0],o);!(o in t)&&!s.isIdempotencyToken()||(yield[o,s])}}function*T0(e,t,r){if(e.isUnitSchema())return;let n=e.getSchema(),o=Object.keys(t).length;for(let s=0;s<n[4].length&&o!==0;++s){let i=n[4][s],a=new B([n[5][s],0],i),c=i;r&&(c=a.getMergedTraits()[r]??i),c in t&&(yield[i,a],o-=1)}}var $s=v(()=>{te()});function x0(e,t,r){if(r?.source){let n=r.source;if(typeof t=="number"&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||n!==String(t)))return n.includes(".")?new fe(n,"bigDecimal"):BigInt(n)}return t}var R0=v(()=>{Qe()});var I0,P0,mc,lm=v(()=>{I0=C(j()),P0=C(Ce()),mc=(e,t)=>(0,I0.collectBody)(e,t).then(r=>(t?.utf8Encoder??P0.toUtf8)(r))});var Hs,O0,No,qs=v(()=>{lm();Hs=(e,t)=>mc(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),O0=async(e,t)=>{let r=await Hs(e,t);return r.message=r.message??r.Message,r},No=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t&&typeof t=="object"){let s=r(t,"code");if(s&&t[s]!==void 0)return n(t[s]);if(t.__type!==void 0)return n(t.__type)}}});var N0,Do,dm=v(()=>{Je();te();Qe();N0=C(Ae());Hr();$s();R0();qs();Do=class extends Fe{constructor(r){super();u(this,"settings");this.settings=r}async read(r,n){return this._read(r,typeof n=="string"?JSON.parse(n,x0):await Hs(n,this.serdeContext))}readObject(r,n){return this._read(r,n)}_read(r,n){let o=n!==null&&typeof n=="object",s=B.of(r);if(s.isListSchema()&&Array.isArray(n)){let a=s.getValueSchema(),c=[],l=!!s.getMergedTraits().sparse;for(let m of n)(l||m!=null)&&c.push(this._read(a,m));return c}else if(s.isMapSchema()&&o){let a=s.getValueSchema(),c={},l=!!s.getMergedTraits().sparse;for(let[m,p]of Object.entries(n))(l||p!=null)&&(c[m]=this._read(a,p));return c}else if(s.isStructSchema()&&o){let a={};for(let[c,l]of T0(s,n,this.settings.jsonName?"jsonName":!1)){let m=this.settings.jsonName?l.getMergedTraits().jsonName??c:c,p=this._read(l,n[m]);p!=null&&(a[c]=p)}return a}if(s.isBlobSchema()&&typeof n=="string")return(0,N0.fromBase64)(n);let i=s.getMergedTraits().mediaType;if(s.isStringSchema()&&typeof n=="string"&&i&&(i==="application/json"||i.endsWith("+json")))return Ve.from(n);if(s.isTimestampSchema()&&n!=null)switch(nt(s,this.settings)){case 5:return Df(n);case 6:return kf(n);case 7:return Mf(n);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",n),new Date(n)}if(s.isBigIntegerSchema()&&(typeof n=="number"||typeof n=="string"))return BigInt(n);if(s.isBigDecimalSchema()&&n!=null){if(n instanceof fe)return n;let a=n;return a.type==="bigDecimal"&&"string"in a?new fe(a.string,a.type):new fe(String(n),"bigDecimal")}if(s.isNumericSchema()&&typeof n=="string")switch(n){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}if(s.isDocumentSchema())if(o){let a=Array.isArray(n)?[]:{};for(let[c,l]of Object.entries(n))l instanceof fe?a[c]=l:a[c]=this._read(s,l);return a}else return structuredClone(n);return n}}});var D0,hc,k0=v(()=>{Qe();D0="\u039D",hc=class{constructor(){u(this,"values",new Map);u(this,"counter",0);u(this,"stage",0)}createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(t,r)=>{if(r instanceof fe){let n=`${D0+"nv"+this.counter++}_`+r.string;return this.values.set(`"${n}"`,r.string),n}if(typeof r=="bigint"){let n=r.toString(),o=`${D0+"b"+this.counter++}_`+n;return this.values.set(`"${o}"`,n),o}return r}}replaceInJson(t){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return t;for(let[r,n]of this.values)t=t.replace(r,n);return t}}});var M0,ko,fm=v(()=>{Je();te();Qe();M0=C(Ae());Hr();$s();k0();ko=class extends Fe{constructor(r){super();u(this,"settings");u(this,"buffer");u(this,"rootSchema");this.settings=r}write(r,n){this.rootSchema=B.of(r),this.buffer=this._write(this.rootSchema,n)}writeDiscriminatedDocument(r,n){this.write(r,n),typeof this.buffer=="object"&&(this.buffer.__type=B.of(r).getName(!0))}flush(){let{rootSchema:r}=this;if(this.rootSchema=void 0,r?.isStructSchema()||r?.isDocumentSchema()){let n=new hc;return n.replaceInJson(JSON.stringify(this.buffer,n.createReplacer(),0))}return this.buffer}_write(r,n,o){let s=n!==null&&typeof n=="object",i=B.of(r);if(i.isListSchema()&&Array.isArray(n)){let a=i.getValueSchema(),c=[],l=!!i.getMergedTraits().sparse;for(let m of n)(l||m!=null)&&c.push(this._write(a,m));return c}else if(i.isMapSchema()&&s){let a=i.getValueSchema(),c={},l=!!i.getMergedTraits().sparse;for(let[m,p]of Object.entries(n))(l||p!=null)&&(c[m]=this._write(a,p));return c}else if(i.isStructSchema()&&s){let a={};for(let[c,l]of Oo(i,n)){let m=this._write(l,n[c],i);if(m!==void 0){let p=this.settings.jsonName?l.getMergedTraits().jsonName??c:c;a[p]=m}}return a}if(!(n===null&&o?.isStructSchema())){if(i.isBlobSchema()&&(n instanceof Uint8Array||typeof n=="string")||i.isDocumentSchema()&&n instanceof Uint8Array)return i===this.rootSchema?n:(this.serdeContext?.base64Encoder??M0.toBase64)(n);if((i.isTimestampSchema()||i.isDocumentSchema())&&n instanceof Date)switch(nt(i,this.settings)){case 5:return n.toISOString().replace(".000Z","Z");case 6:return Is(n);case 7:return n.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",n),n.getTime()/1e3}if(i.isNumericSchema()&&typeof n=="number"&&(Math.abs(n)===1/0||isNaN(n)))return String(n);if(i.isStringSchema()){if(typeof n>"u"&&i.isIdempotencyToken())return(0,lt.v4)();let a=i.getMergedTraits().mediaType;if(n!=null&&a&&(a==="application/json"||a.endsWith("+json")))return Ve.from(n)}if(i.isDocumentSchema())if(s){let a=Array.isArray(n)?[]:{};for(let[c,l]of Object.entries(n))l instanceof fe?a[c]=l:a[c]=this._write(i,l);return a}else return structuredClone(n);return n}}}});var qr,gc=v(()=>{Hr();dm();fm();qr=class extends Fe{constructor(r){super();u(this,"settings");this.settings=r}createSerializer(){let r=new ko(this.settings);return r.setSerdeContext(this.serdeContext),r}createDeserializer(){let r=new Do(this.settings);return r.setSerdeContext(this.serdeContext),r}}});var Gr,yc=v(()=>{Je();te();Po();gc();qs();Gr=class extends sr{constructor({defaultNamespace:r,serviceTarget:n,awsQueryCompatible:o}){super({defaultNamespace:r});u(this,"serializer");u(this,"deserializer");u(this,"serviceTarget");u(this,"codec");u(this,"mixin");u(this,"awsQueryCompatible");this.serviceTarget=n,this.codec=new qr({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!o,this.mixin=new ft(this.awsQueryCompatible)}async serializeRequest(r,n,o){let s=await super.serializeRequest(r,n,o);return s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${r.name}`}),this.awsQueryCompatible&&(s.headers["x-amzn-query-mode"]="true"),(vt(r.input)==="unit"||!s.body)&&(s.body="{}"),s}getPayloadCodec(){return this.codec}async handleError(r,n,o,s,i){this.awsQueryCompatible&&this.mixin.setQueryCompatError(s,o);let a=No(o,s)??"Unknown",{errorSchema:c,errorMetadata:l}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,o,s,i),m=B.of(c),p=s.message??s.Message??"Unknown",h=H.for(c[1]).getErrorCtor(c)??Error,g=new h(p),S={};for(let[b,x]of m.structIterator()){let T=x.getMergedTraits().jsonName??b;S[b]=this.codec.createDeserializer().readObject(x,s[T])}throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(s,S),this.mixin.decorateServiceException(Object.assign(g,l,{$fault:m.getMergedTraits().error,message:p},S),s)}}});var Ec,B0=v(()=>{yc();Ec=class extends Gr{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var Sc,F0=v(()=>{yc();Sc=class extends Gr{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var jr,U0=v(()=>{Je();te();Po();gc();qs();jr=class extends In{constructor({defaultNamespace:r}){super({defaultNamespace:r});u(this,"serializer");u(this,"deserializer");u(this,"codec");u(this,"mixin",new ft);let n={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new qr(n),this.serializer=new Nn(this.codec.createSerializer(),n),this.deserializer=new On(this.codec.createDeserializer(),n)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(r){this.codec.setSerdeContext(r),super.setSerdeContext(r)}async serializeRequest(r,n,o){let s=await super.serializeRequest(r,n,o),i=B.of(r.input);if(!s.headers["content-type"]){let a=this.mixin.resolveRestContentType(this.getDefaultContentType(),i);a&&(s.headers["content-type"]=a)}return s.body==null&&s.headers["content-type"]===this.getDefaultContentType()&&(s.body="{}"),s}async deserializeResponse(r,n,o){let s=await super.deserializeResponse(r,n,o),i=B.of(r.output);for(let[a,c]of i.structIterator())c.getMemberTraits().httpPayload&&!(a in s)&&(s[a]=null);return s}async handleError(r,n,o,s,i){let a=No(o,s)??"Unknown",{errorSchema:c,errorMetadata:l}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,o,s,i),m=B.of(c),p=s.message??s.Message??"Unknown",h=H.for(c[1]).getErrorCtor(c)??Error,g=new h(p);await this.deserializeHttpMessage(c,n,o,s);let S={};for(let[b,x]of m.structIterator()){let T=x.getMergedTraits().jsonName??b;S[b]=this.codec.createDeserializer().readObject(x,s[T])}throw this.mixin.decorateServiceException(Object.assign(g,l,{$fault:m.getMergedTraits().error,message:p},S),s)}getDefaultContentType(){return"application/json"}}});var L0,$0,H0=v(()=>{L0=C(j()),$0=e=>{if(e!=null)return typeof e=="object"&&"__type"in e&&delete e.__type,(0,L0.expectUnion)(e)}});var G0=I((zre,q0)=>{(()=>{"use strict";var e={d:(d,f)=>{for(var y in f)e.o(f,y)&&!e.o(d,y)&&Object.defineProperty(d,y,{enumerable:!0,get:f[y]})},o:(d,f)=>Object.prototype.hasOwnProperty.call(d,f),r:d=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{XMLBuilder:()=>wr,XMLParser:()=>PN,XMLValidator:()=>UN});let r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=new RegExp("^["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function o(d,f){let y=[],A=f.exec(d);for(;A;){let _=[];_.startIndex=f.lastIndex-A[0].length;let w=A.length;for(let P=0;P<w;P++)_.push(A[P]);y.push(_),A=f.exec(d)}return y}let s=function(d){return n.exec(d)!=null},i={allowBooleanAttributes:!1,unpairedTags:[]};function a(d,f){f=Object.assign({},i,f);let y=[],A=!1,_=!1;d[0]==="\uFEFF"&&(d=d.substr(1));for(let w=0;w<d.length;w++)if(d[w]==="<"&&d[w+1]==="?"){if(w+=2,w=l(d,w),w.err)return w}else{if(d[w]!=="<"){if(c(d[w]))continue;return T("InvalidChar","char '"+d[w]+"' is not expected.",D(d,w))}{let P=w;if(w++,d[w]==="!"){w=m(d,w);continue}{let R=!1;d[w]==="/"&&(R=!0,w++);let N="";for(;w<d.length&&d[w]!==">"&&d[w]!==" "&&d[w]!=="	"&&d[w]!==`
`&&d[w]!=="\r";w++)N+=d[w];if(N=N.trim(),N[N.length-1]==="/"&&(N=N.substring(0,N.length-1),w--),!s(N)){let L;return L=N.trim().length===0?"Invalid space after '<'.":"Tag '"+N+"' is an invalid name.",T("InvalidTag",L,D(d,w))}let k=g(d,w);if(k===!1)return T("InvalidAttr","Attributes for '"+N+"' have open quote.",D(d,w));let G=k.value;if(w=k.index,G[G.length-1]==="/"){let L=w-G.length;G=G.substring(0,G.length-1);let J=b(G,f);if(J!==!0)return T(J.err.code,J.err.msg,D(d,L+J.err.line));A=!0}else if(R){if(!k.tagClosed)return T("InvalidTag","Closing tag '"+N+"' doesn't have proper closing.",D(d,w));if(G.trim().length>0)return T("InvalidTag","Closing tag '"+N+"' can't have attributes or invalid starting.",D(d,P));if(y.length===0)return T("InvalidTag","Closing tag '"+N+"' has not been opened.",D(d,P));{let L=y.pop();if(N!==L.tagName){let J=D(d,L.tagStartPos);return T("InvalidTag","Expected closing tag '"+L.tagName+"' (opened in line "+J.line+", col "+J.col+") instead of closing tag '"+N+"'.",D(d,P))}y.length==0&&(_=!0)}}else{let L=b(G,f);if(L!==!0)return T(L.err.code,L.err.msg,D(d,w-G.length+L.err.line));if(_===!0)return T("InvalidXml","Multiple possible root nodes found.",D(d,w));f.unpairedTags.indexOf(N)!==-1||y.push({tagName:N,tagStartPos:P}),A=!0}for(w++;w<d.length;w++)if(d[w]==="<"){if(d[w+1]==="!"){w++,w=m(d,w);continue}if(d[w+1]!=="?")break;if(w=l(d,++w),w.err)return w}else if(d[w]==="&"){let L=x(d,w);if(L==-1)return T("InvalidChar","char '&' is not expected.",D(d,w));w=L}else if(_===!0&&!c(d[w]))return T("InvalidXml","Extra text at the end",D(d,w));d[w]==="<"&&w--}}}return A?y.length==1?T("InvalidTag","Unclosed tag '"+y[0].tagName+"'.",D(d,y[0].tagStartPos)):!(y.length>0)||T("InvalidXml","Invalid '"+JSON.stringify(y.map((w=>w.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):T("InvalidXml","Start tag expected.",1)}function c(d){return d===" "||d==="	"||d===`
`||d==="\r"}function l(d,f){let y=f;for(;f<d.length;f++)if(!(d[f]!="?"&&d[f]!=" ")){let A=d.substr(y,f-y);if(f>5&&A==="xml")return T("InvalidXml","XML declaration allowed only at the start of the document.",D(d,f));if(d[f]=="?"&&d[f+1]==">"){f++;break}}return f}function m(d,f){if(d.length>f+5&&d[f+1]==="-"&&d[f+2]==="-"){for(f+=3;f<d.length;f++)if(d[f]==="-"&&d[f+1]==="-"&&d[f+2]===">"){f+=2;break}}else if(d.length>f+8&&d[f+1]==="D"&&d[f+2]==="O"&&d[f+3]==="C"&&d[f+4]==="T"&&d[f+5]==="Y"&&d[f+6]==="P"&&d[f+7]==="E"){let y=1;for(f+=8;f<d.length;f++)if(d[f]==="<")y++;else if(d[f]===">"&&(y--,y===0))break}else if(d.length>f+9&&d[f+1]==="["&&d[f+2]==="C"&&d[f+3]==="D"&&d[f+4]==="A"&&d[f+5]==="T"&&d[f+6]==="A"&&d[f+7]==="["){for(f+=8;f<d.length;f++)if(d[f]==="]"&&d[f+1]==="]"&&d[f+2]===">"){f+=2;break}}return f}let p='"',h="'";function g(d,f){let y="",A="",_=!1;for(;f<d.length;f++){if(d[f]===p||d[f]===h)A===""?A=d[f]:A!==d[f]||(A="");else if(d[f]===">"&&A===""){_=!0;break}y+=d[f]}return A===""&&{value:y,index:f,tagClosed:_}}let S=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function b(d,f){let y=o(d,S),A={};for(let _=0;_<y.length;_++){if(y[_][1].length===0)return T("InvalidAttr","Attribute '"+y[_][2]+"' has no space in starting.",F(y[_]));if(y[_][3]!==void 0&&y[_][4]===void 0)return T("InvalidAttr","Attribute '"+y[_][2]+"' is without value.",F(y[_]));if(y[_][3]===void 0&&!f.allowBooleanAttributes)return T("InvalidAttr","boolean attribute '"+y[_][2]+"' is not allowed.",F(y[_]));let w=y[_][2];if(!O(w))return T("InvalidAttr","Attribute '"+w+"' is an invalid name.",F(y[_]));if(A.hasOwnProperty(w))return T("InvalidAttr","Attribute '"+w+"' is repeated.",F(y[_]));A[w]=1}return!0}function x(d,f){if(d[++f]===";")return-1;if(d[f]==="#")return(function(A,_){let w=/\d/;for(A[_]==="x"&&(_++,w=/[\da-fA-F]/);_<A.length;_++){if(A[_]===";")return _;if(!A[_].match(w))break}return-1})(d,++f);let y=0;for(;f<d.length;f++,y++)if(!(d[f].match(/\w/)&&y<20)){if(d[f]===";")break;return-1}return f}function T(d,f,y){return{err:{code:d,msg:f,line:y.line||y,col:y.col}}}function O(d){return s(d)}function D(d,f){let y=d.substring(0,f).split(/\r?\n/);return{line:y.length,col:y[y.length-1].length+1}}function F(d){return d.startIndex+d[1].length}let $={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(d,f){return f},attributeValueProcessor:function(d,f){return f},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(d,f,y){return d},captureMetaData:!1},z;z=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class me{constructor(f){this.tagname=f,this.child=[],this[":@"]={}}add(f,y){f==="__proto__"&&(f="#__proto__"),this.child.push({[f]:y})}addChild(f,y){f.tagname==="__proto__"&&(f.tagname="#__proto__"),f[":@"]&&Object.keys(f[":@"]).length>0?this.child.push({[f.tagname]:f.child,":@":f[":@"]}):this.child.push({[f.tagname]:f.child}),y!==void 0&&(this.child[this.child.length-1][z]={startIndex:y})}static getMetaDataSymbol(){return z}}function Q(d,f){let y={};if(d[f+3]!=="O"||d[f+4]!=="C"||d[f+5]!=="T"||d[f+6]!=="Y"||d[f+7]!=="P"||d[f+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{f+=9;let A=1,_=!1,w=!1,P="";for(;f<d.length;f++)if(d[f]!=="<"||w)if(d[f]===">"){if(w?d[f-1]==="-"&&d[f-2]==="-"&&(w=!1,A--):A--,A===0)break}else d[f]==="["?_=!0:P+=d[f];else{if(_&&Sn(d,"!ENTITY",f)){let R,N;f+=7,[R,N,f]=ae(d,f+1),N.indexOf("&")===-1&&(y[R]={regx:RegExp(`&${R};`,"g"),val:N})}else if(_&&Sn(d,"!ELEMENT",f)){f+=8;let{index:R}=uN(d,f+1);f=R}else if(_&&Sn(d,"!ATTLIST",f))f+=8;else if(_&&Sn(d,"!NOTATION",f)){f+=9;let{index:R}=ye(d,f+1);f=R}else{if(!Sn(d,"!--",f))throw new Error("Invalid DOCTYPE");w=!0}A++,P=""}if(A!==0)throw new Error("Unclosed DOCTYPE")}return{entities:y,i:f}}let W=(d,f)=>{for(;f<d.length&&/\s/.test(d[f]);)f++;return f};function ae(d,f){f=W(d,f);let y="";for(;f<d.length&&!/\s/.test(d[f])&&d[f]!=='"'&&d[f]!=="'";)y+=d[f],f++;if(Cd(y),f=W(d,f),d.substring(f,f+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(d[f]==="%")throw new Error("Parameter entities are not supported");let A="";return[f,A]=uo(d,f,"entity"),[y,A,--f]}function ye(d,f){f=W(d,f);let y="";for(;f<d.length&&!/\s/.test(d[f]);)y+=d[f],f++;Cd(y),f=W(d,f);let A=d.substring(f,f+6).toUpperCase();if(A!=="SYSTEM"&&A!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${A}"`);f+=A.length,f=W(d,f);let _=null,w=null;if(A==="PUBLIC")[f,_]=uo(d,f,"publicIdentifier"),d[f=W(d,f)]!=='"'&&d[f]!=="'"||([f,w]=uo(d,f,"systemIdentifier"));else if(A==="SYSTEM"&&([f,w]=uo(d,f,"systemIdentifier"),!w))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:y,publicIdentifier:_,systemIdentifier:w,index:--f}}function uo(d,f,y){let A="",_=d[f];if(_!=='"'&&_!=="'")throw new Error(`Expected quoted string, found "${_}"`);for(f++;f<d.length&&d[f]!==_;)A+=d[f],f++;if(d[f]!==_)throw new Error(`Unterminated ${y} value`);return[++f,A]}function uN(d,f){f=W(d,f);let y="";for(;f<d.length&&!/\s/.test(d[f]);)y+=d[f],f++;if(!Cd(y))throw new Error(`Invalid element name: "${y}"`);let A="";if(d[f=W(d,f)]==="E"&&Sn(d,"MPTY",f))f+=4;else if(d[f]==="A"&&Sn(d,"NY",f))f+=2;else{if(d[f]!=="(")throw new Error(`Invalid Element Expression, found "${d[f]}"`);for(f++;f<d.length&&d[f]!==")";)A+=d[f],f++;if(d[f]!==")")throw new Error("Unterminated content model")}return{elementName:y,contentModel:A.trim(),index:f}}function Sn(d,f,y){for(let A=0;A<f.length;A++)if(f[A]!==d[y+A+1])return!1;return!0}function Cd(d){if(s(d))return d;throw new Error(`Invalid entity name ${d}`)}let lN=/^[-+]?0x[a-fA-F0-9]+$/,dN=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,fN={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},pN=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function sy(d){return typeof d=="function"?d:Array.isArray(d)?f=>{for(let y of d)if(typeof y=="string"&&f===y||y instanceof RegExp&&y.test(f))return!0}:()=>!1}class mN{constructor(f){this.options=f,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(y,A)=>String.fromCodePoint(Number.parseInt(A,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(y,A)=>String.fromCodePoint(Number.parseInt(A,16))}},this.addExternalEntities=hN,this.parseXml=_N,this.parseTextData=gN,this.resolveNameSpace=yN,this.buildAttributesMap=SN,this.isItStopNode=AN,this.replaceEntitiesValue=vN,this.readStopNodeData=bN,this.saveTextToParentTag=CN,this.addChild=wN,this.ignoreAttributesFn=sy(this.options.ignoreAttributes)}}function hN(d){let f=Object.keys(d);for(let y=0;y<f.length;y++){let A=f[y];this.lastEntities[A]={regex:new RegExp("&"+A+";","g"),val:d[A]}}}function gN(d,f,y,A,_,w,P){if(d!==void 0&&(this.options.trimValues&&!A&&(d=d.trim()),d.length>0)){P||(d=this.replaceEntitiesValue(d));let R=this.options.tagValueProcessor(f,d,y,_,w);return R==null?d:typeof R!=typeof d||R!==d?R:this.options.trimValues||d.trim()===d?iy(d,this.options.parseTagValue,this.options.numberParseOptions):d}}function yN(d){if(this.options.removeNSPrefix){let f=d.split(":"),y=d.charAt(0)==="/"?"/":"";if(f[0]==="xmlns")return"";f.length===2&&(d=y+f[1])}return d}let EN=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function SN(d,f,y){if(this.options.ignoreAttributes!==!0&&typeof d=="string"){let A=o(d,EN),_=A.length,w={};for(let P=0;P<_;P++){let R=this.resolveNameSpace(A[P][1]);if(this.ignoreAttributesFn(R,f))continue;let N=A[P][4],k=this.options.attributeNamePrefix+R;if(R.length)if(this.options.transformAttributeName&&(k=this.options.transformAttributeName(k)),k==="__proto__"&&(k="#__proto__"),N!==void 0){this.options.trimValues&&(N=N.trim()),N=this.replaceEntitiesValue(N);let G=this.options.attributeValueProcessor(R,N,f);w[k]=G==null?N:typeof G!=typeof N||G!==N?G:iy(N,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(w[k]=!0)}if(!Object.keys(w).length)return;if(this.options.attributesGroupName){let P={};return P[this.options.attributesGroupName]=w,P}return w}}let _N=function(d){d=d.replace(/\r\n?/g,`
`);let f=new me("!xml"),y=f,A="",_="";for(let w=0;w<d.length;w++)if(d[w]==="<")if(d[w+1]==="/"){let P=_n(d,">",w,"Closing Tag is not closed."),R=d.substring(w+2,P).trim();if(this.options.removeNSPrefix){let G=R.indexOf(":");G!==-1&&(R=R.substr(G+1))}this.options.transformTagName&&(R=this.options.transformTagName(R)),y&&(A=this.saveTextToParentTag(A,y,_));let N=_.substring(_.lastIndexOf(".")+1);if(R&&this.options.unpairedTags.indexOf(R)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${R}>`);let k=0;N&&this.options.unpairedTags.indexOf(N)!==-1?(k=_.lastIndexOf(".",_.lastIndexOf(".")-1),this.tagsNodeStack.pop()):k=_.lastIndexOf("."),_=_.substring(0,k),y=this.tagsNodeStack.pop(),A="",w=P}else if(d[w+1]==="?"){let P=Ad(d,w,!1,"?>");if(!P)throw new Error("Pi Tag is not closed.");if(A=this.saveTextToParentTag(A,y,_),!(this.options.ignoreDeclaration&&P.tagName==="?xml"||this.options.ignorePiTags)){let R=new me(P.tagName);R.add(this.options.textNodeName,""),P.tagName!==P.tagExp&&P.attrExpPresent&&(R[":@"]=this.buildAttributesMap(P.tagExp,_,P.tagName)),this.addChild(y,R,_,w)}w=P.closeIndex+1}else if(d.substr(w+1,3)==="!--"){let P=_n(d,"-->",w+4,"Comment is not closed.");if(this.options.commentPropName){let R=d.substring(w+4,P-2);A=this.saveTextToParentTag(A,y,_),y.add(this.options.commentPropName,[{[this.options.textNodeName]:R}])}w=P}else if(d.substr(w+1,2)==="!D"){let P=Q(d,w);this.docTypeEntities=P.entities,w=P.i}else if(d.substr(w+1,2)==="!["){let P=_n(d,"]]>",w,"CDATA is not closed.")-2,R=d.substring(w+9,P);A=this.saveTextToParentTag(A,y,_);let N=this.parseTextData(R,y.tagname,_,!0,!1,!0,!0);N==null&&(N=""),this.options.cdataPropName?y.add(this.options.cdataPropName,[{[this.options.textNodeName]:R}]):y.add(this.options.textNodeName,N),w=P+2}else{let P=Ad(d,w,this.options.removeNSPrefix),R=P.tagName,N=P.rawTagName,k=P.tagExp,G=P.attrExpPresent,L=P.closeIndex;this.options.transformTagName&&(R=this.options.transformTagName(R)),y&&A&&y.tagname!=="!xml"&&(A=this.saveTextToParentTag(A,y,_,!1));let J=y;J&&this.options.unpairedTags.indexOf(J.tagname)!==-1&&(y=this.tagsNodeStack.pop(),_=_.substring(0,_.lastIndexOf("."))),R!==f.tagname&&(_+=_?"."+R:R);let se=w;if(this.isItStopNode(this.options.stopNodes,_,R)){let Z="";if(k.length>0&&k.lastIndexOf("/")===k.length-1)R[R.length-1]==="/"?(R=R.substr(0,R.length-1),_=_.substr(0,_.length-1),k=R):k=k.substr(0,k.length-1),w=P.closeIndex;else if(this.options.unpairedTags.indexOf(R)!==-1)w=P.closeIndex;else{let Dt=this.readStopNodeData(d,N,L+1);if(!Dt)throw new Error(`Unexpected end of ${N}`);w=Dt.i,Z=Dt.tagContent}let Se=new me(R);R!==k&&G&&(Se[":@"]=this.buildAttributesMap(k,_,R)),Z&&(Z=this.parseTextData(Z,R,_,!0,G,!0,!0)),_=_.substr(0,_.lastIndexOf(".")),Se.add(this.options.textNodeName,Z),this.addChild(y,Se,_,se)}else{if(k.length>0&&k.lastIndexOf("/")===k.length-1){R[R.length-1]==="/"?(R=R.substr(0,R.length-1),_=_.substr(0,_.length-1),k=R):k=k.substr(0,k.length-1),this.options.transformTagName&&(R=this.options.transformTagName(R));let Z=new me(R);R!==k&&G&&(Z[":@"]=this.buildAttributesMap(k,_,R)),this.addChild(y,Z,_,se),_=_.substr(0,_.lastIndexOf("."))}else{let Z=new me(R);this.tagsNodeStack.push(y),R!==k&&G&&(Z[":@"]=this.buildAttributesMap(k,_,R)),this.addChild(y,Z,_,se),y=Z}A="",w=L}}else A+=d[w];return f.child};function wN(d,f,y,A){this.options.captureMetaData||(A=void 0);let _=this.options.updateTag(f.tagname,y,f[":@"]);_===!1||(typeof _=="string"&&(f.tagname=_),d.addChild(f,A))}let vN=function(d){if(this.options.processEntities){for(let f in this.docTypeEntities){let y=this.docTypeEntities[f];d=d.replace(y.regx,y.val)}for(let f in this.lastEntities){let y=this.lastEntities[f];d=d.replace(y.regex,y.val)}if(this.options.htmlEntities)for(let f in this.htmlEntities){let y=this.htmlEntities[f];d=d.replace(y.regex,y.val)}d=d.replace(this.ampEntity.regex,this.ampEntity.val)}return d};function CN(d,f,y,A){return d&&(A===void 0&&(A=f.child.length===0),(d=this.parseTextData(d,f.tagname,y,!1,!!f[":@"]&&Object.keys(f[":@"]).length!==0,A))!==void 0&&d!==""&&f.add(this.options.textNodeName,d),d=""),d}function AN(d,f,y){let A="*."+y;for(let _ in d){let w=d[_];if(A===w||f===w)return!0}return!1}function _n(d,f,y,A){let _=d.indexOf(f,y);if(_===-1)throw new Error(A);return _+f.length-1}function Ad(d,f,y,A=">"){let _=(function(L,J,se=">"){let Z,Se="";for(let Dt=J;Dt<L.length;Dt++){let vr=L[Dt];if(Z)vr===Z&&(Z="");else if(vr==='"'||vr==="'")Z=vr;else if(vr===se[0]){if(!se[1])return{data:Se,index:Dt};if(L[Dt+1]===se[1])return{data:Se,index:Dt}}else vr==="	"&&(vr=" ");Se+=vr}})(d,f+1,A);if(!_)return;let w=_.data,P=_.index,R=w.search(/\s/),N=w,k=!0;R!==-1&&(N=w.substring(0,R),w=w.substring(R+1).trimStart());let G=N;if(y){let L=N.indexOf(":");L!==-1&&(N=N.substr(L+1),k=N!==_.data.substr(L+1))}return{tagName:N,tagExp:w,closeIndex:P,attrExpPresent:k,rawTagName:G}}function bN(d,f,y){let A=y,_=1;for(;y<d.length;y++)if(d[y]==="<")if(d[y+1]==="/"){let w=_n(d,">",y,`${f} is not closed`);if(d.substring(y+2,w).trim()===f&&(_--,_===0))return{tagContent:d.substring(A,y),i:w};y=w}else if(d[y+1]==="?")y=_n(d,"?>",y+1,"StopNode is not closed.");else if(d.substr(y+1,3)==="!--")y=_n(d,"-->",y+3,"StopNode is not closed.");else if(d.substr(y+1,2)==="![")y=_n(d,"]]>",y,"StopNode is not closed.")-2;else{let w=Ad(d,y,">");w&&((w&&w.tagName)===f&&w.tagExp[w.tagExp.length-1]!=="/"&&_++,y=w.closeIndex)}}function iy(d,f,y){if(f&&typeof d=="string"){let A=d.trim();return A==="true"||A!=="false"&&(function(_,w={}){if(w=Object.assign({},fN,w),!_||typeof _!="string")return _;let P=_.trim();if(w.skipLike!==void 0&&w.skipLike.test(P))return _;if(_==="0")return 0;if(w.hex&&lN.test(P))return(function(N){if(parseInt)return parseInt(N,16);if(Number.parseInt)return Number.parseInt(N,16);if(window&&window.parseInt)return window.parseInt(N,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")})(P);if(P.search(/.+[eE].+/)!==-1)return(function(N,k,G){if(!G.eNotation)return N;let L=k.match(pN);if(L){let J=L[1]||"",se=L[3].indexOf("e")===-1?"E":"e",Z=L[2],Se=J?N[Z.length+1]===se:N[Z.length]===se;return Z.length>1&&Se?N:Z.length!==1||!L[3].startsWith(`.${se}`)&&L[3][0]!==se?G.leadingZeros&&!Se?(k=(L[1]||"")+L[3],Number(k)):N:Number(k)}return N})(_,P,w);{let N=dN.exec(P);if(N){let k=N[1]||"",G=N[2],L=((R=N[3])&&R.indexOf(".")!==-1&&((R=R.replace(/0+$/,""))==="."?R="0":R[0]==="."?R="0"+R:R[R.length-1]==="."&&(R=R.substring(0,R.length-1))),R),J=k?_[G.length+1]===".":_[G.length]===".";if(!w.leadingZeros&&(G.length>1||G.length===1&&!J))return _;{let se=Number(P),Z=String(se);if(se===0||se===-0)return se;if(Z.search(/[eE]/)!==-1)return w.eNotation?se:_;if(P.indexOf(".")!==-1)return Z==="0"||Z===L||Z===`${k}${L}`?se:_;let Se=G?L:P;return G?Se===Z||k+Se===Z?se:_:Se===Z||Se===k+Z?se:_}}return _}var R})(d,y)}return d!==void 0?d:""}let bd=me.getMetaDataSymbol();function TN(d,f){return ay(d,f)}function ay(d,f,y){let A,_={};for(let w=0;w<d.length;w++){let P=d[w],R=xN(P),N="";if(N=y===void 0?R:y+"."+R,R===f.textNodeName)A===void 0?A=P[R]:A+=""+P[R];else{if(R===void 0)continue;if(P[R]){let k=ay(P[R],f,N),G=IN(k,f);P[bd]!==void 0&&(k[bd]=P[bd]),P[":@"]?RN(k,P[":@"],N,f):Object.keys(k).length!==1||k[f.textNodeName]===void 0||f.alwaysCreateTextNode?Object.keys(k).length===0&&(f.alwaysCreateTextNode?k[f.textNodeName]="":k=""):k=k[f.textNodeName],_[R]!==void 0&&_.hasOwnProperty(R)?(Array.isArray(_[R])||(_[R]=[_[R]]),_[R].push(k)):f.isArray(R,N,G)?_[R]=[k]:_[R]=k}}}return typeof A=="string"?A.length>0&&(_[f.textNodeName]=A):A!==void 0&&(_[f.textNodeName]=A),_}function xN(d){let f=Object.keys(d);for(let y=0;y<f.length;y++){let A=f[y];if(A!==":@")return A}}function RN(d,f,y,A){if(f){let _=Object.keys(f),w=_.length;for(let P=0;P<w;P++){let R=_[P];A.isArray(R,y+"."+R,!0,!0)?d[R]=[f[R]]:d[R]=f[R]}}}function IN(d,f){let{textNodeName:y}=f,A=Object.keys(d).length;return A===0||!(A!==1||!d[y]&&typeof d[y]!="boolean"&&d[y]!==0)}class PN{constructor(f){this.externalEntities={},this.options=(function(y){return Object.assign({},$,y)})(f)}parse(f,y){if(typeof f!="string"){if(!f.toString)throw new Error("XML data is accepted in String or Bytes[] form.");f=f.toString()}if(y){y===!0&&(y={});let w=a(f,y);if(w!==!0)throw Error(`${w.err.msg}:${w.err.line}:${w.err.col}`)}let A=new mN(this.options);A.addExternalEntities(this.externalEntities);let _=A.parseXml(f);return this.options.preserveOrder||_===void 0?_:TN(_,this.options)}addEntity(f,y){if(y.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(f.indexOf("&")!==-1||f.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(y==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[f]=y}static getMetaDataSymbol(){return me.getMetaDataSymbol()}}function ON(d,f){let y="";return f.format&&f.indentBy.length>0&&(y=`
`),cy(d,f,"",y)}function cy(d,f,y,A){let _="",w=!1;for(let P=0;P<d.length;P++){let R=d[P],N=NN(R);if(N===void 0)continue;let k="";if(k=y.length===0?N:`${y}.${N}`,N===f.textNodeName){let se=R[N];DN(k,f)||(se=f.tagValueProcessor(N,se),se=ly(se,f)),w&&(_+=A),_+=se,w=!1;continue}if(N===f.cdataPropName){w&&(_+=A),_+=`<![CDATA[${R[N][0][f.textNodeName]}]]>`,w=!1;continue}if(N===f.commentPropName){_+=A+`<!--${R[N][0][f.textNodeName]}-->`,w=!0;continue}if(N[0]==="?"){let se=uy(R[":@"],f),Z=N==="?xml"?"":A,Se=R[N][0][f.textNodeName];Se=Se.length!==0?" "+Se:"",_+=Z+`<${N}${Se}${se}?>`,w=!0;continue}let G=A;G!==""&&(G+=f.indentBy);let L=A+`<${N}${uy(R[":@"],f)}`,J=cy(R[N],f,k,G);f.unpairedTags.indexOf(N)!==-1?f.suppressUnpairedNode?_+=L+">":_+=L+"/>":J&&J.length!==0||!f.suppressEmptyNode?J&&J.endsWith(">")?_+=L+`>${J}${A}</${N}>`:(_+=L+">",J&&A!==""&&(J.includes("/>")||J.includes("</"))?_+=A+f.indentBy+J+A:_+=J,_+=`</${N}>`):_+=L+"/>",w=!0}return _}function NN(d){let f=Object.keys(d);for(let y=0;y<f.length;y++){let A=f[y];if(d.hasOwnProperty(A)&&A!==":@")return A}}function uy(d,f){let y="";if(d&&!f.ignoreAttributes)for(let A in d){if(!d.hasOwnProperty(A))continue;let _=f.attributeValueProcessor(A,d[A]);_=ly(_,f),_===!0&&f.suppressBooleanAttributes?y+=` ${A.substr(f.attributeNamePrefix.length)}`:y+=` ${A.substr(f.attributeNamePrefix.length)}="${_}"`}return y}function DN(d,f){let y=(d=d.substr(0,d.length-f.textNodeName.length-1)).substr(d.lastIndexOf(".")+1);for(let A in f.stopNodes)if(f.stopNodes[A]===d||f.stopNodes[A]==="*."+y)return!0;return!1}function ly(d,f){if(d&&d.length>0&&f.processEntities)for(let y=0;y<f.entities.length;y++){let A=f.entities[y];d=d.replace(A.regex,A.val)}return d}let kN={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(d,f){return f},attributeValueProcessor:function(d,f){return f},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function wr(d){this.options=Object.assign({},kN,d),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=sy(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=FN),this.processTextOrObjNode=MN,this.options.format?(this.indentate=BN,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function MN(d,f,y,A){let _=this.j2x(d,y+1,A.concat(f));return d[this.options.textNodeName]!==void 0&&Object.keys(d).length===1?this.buildTextValNode(d[this.options.textNodeName],f,_.attrStr,y):this.buildObjectNode(_.val,f,_.attrStr,y)}function BN(d){return this.options.indentBy.repeat(d)}function FN(d){return!(!d.startsWith(this.options.attributeNamePrefix)||d===this.options.textNodeName)&&d.substr(this.attrPrefixLen)}wr.prototype.build=function(d){return this.options.preserveOrder?ON(d,this.options):(Array.isArray(d)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(d={[this.options.arrayNodeName]:d}),this.j2x(d,0,[]).val)},wr.prototype.j2x=function(d,f,y){let A="",_="",w=y.join(".");for(let P in d)if(Object.prototype.hasOwnProperty.call(d,P))if(d[P]===void 0)this.isAttribute(P)&&(_+="");else if(d[P]===null)this.isAttribute(P)||P===this.options.cdataPropName?_+="":P[0]==="?"?_+=this.indentate(f)+"<"+P+"?"+this.tagEndChar:_+=this.indentate(f)+"<"+P+"/"+this.tagEndChar;else if(d[P]instanceof Date)_+=this.buildTextValNode(d[P],P,"",f);else if(typeof d[P]!="object"){let R=this.isAttribute(P);if(R&&!this.ignoreAttributesFn(R,w))A+=this.buildAttrPairStr(R,""+d[P]);else if(!R)if(P===this.options.textNodeName){let N=this.options.tagValueProcessor(P,""+d[P]);_+=this.replaceEntitiesValue(N)}else _+=this.buildTextValNode(d[P],P,"",f)}else if(Array.isArray(d[P])){let R=d[P].length,N="",k="";for(let G=0;G<R;G++){let L=d[P][G];if(L!==void 0)if(L===null)P[0]==="?"?_+=this.indentate(f)+"<"+P+"?"+this.tagEndChar:_+=this.indentate(f)+"<"+P+"/"+this.tagEndChar;else if(typeof L=="object")if(this.options.oneListGroup){let J=this.j2x(L,f+1,y.concat(P));N+=J.val,this.options.attributesGroupName&&L.hasOwnProperty(this.options.attributesGroupName)&&(k+=J.attrStr)}else N+=this.processTextOrObjNode(L,P,f,y);else if(this.options.oneListGroup){let J=this.options.tagValueProcessor(P,L);J=this.replaceEntitiesValue(J),N+=J}else N+=this.buildTextValNode(L,P,"",f)}this.options.oneListGroup&&(N=this.buildObjectNode(N,P,k,f)),_+=N}else if(this.options.attributesGroupName&&P===this.options.attributesGroupName){let R=Object.keys(d[P]),N=R.length;for(let k=0;k<N;k++)A+=this.buildAttrPairStr(R[k],""+d[P][R[k]])}else _+=this.processTextOrObjNode(d[P],P,f,y);return{attrStr:A,val:_}},wr.prototype.buildAttrPairStr=function(d,f){return f=this.options.attributeValueProcessor(d,""+f),f=this.replaceEntitiesValue(f),this.options.suppressBooleanAttributes&&f==="true"?" "+d:" "+d+'="'+f+'"'},wr.prototype.buildObjectNode=function(d,f,y,A){if(d==="")return f[0]==="?"?this.indentate(A)+"<"+f+y+"?"+this.tagEndChar:this.indentate(A)+"<"+f+y+this.closeTag(f)+this.tagEndChar;{let _="</"+f+this.tagEndChar,w="";return f[0]==="?"&&(w="?",_=""),!y&&y!==""||d.indexOf("<")!==-1?this.options.commentPropName!==!1&&f===this.options.commentPropName&&w.length===0?this.indentate(A)+`<!--${d}-->`+this.newLine:this.indentate(A)+"<"+f+y+w+this.tagEndChar+d+this.indentate(A)+_:this.indentate(A)+"<"+f+y+w+">"+d+_}},wr.prototype.closeTag=function(d){let f="";return this.options.unpairedTags.indexOf(d)!==-1?this.options.suppressUnpairedNode||(f="/"):f=this.options.suppressEmptyNode?"/":`></${d}`,f},wr.prototype.buildTextValNode=function(d,f,y,A){if(this.options.cdataPropName!==!1&&f===this.options.cdataPropName)return this.indentate(A)+`<![CDATA[${d}]]>`+this.newLine;if(this.options.commentPropName!==!1&&f===this.options.commentPropName)return this.indentate(A)+`<!--${d}-->`+this.newLine;if(f[0]==="?")return this.indentate(A)+"<"+f+y+"?"+this.tagEndChar;{let _=this.options.tagValueProcessor(f,d);return _=this.replaceEntitiesValue(_),_===""?this.indentate(A)+"<"+f+y+this.closeTag(f)+this.tagEndChar:this.indentate(A)+"<"+f+y+">"+_+"</"+f+this.tagEndChar}},wr.prototype.replaceEntitiesValue=function(d){if(d&&d.length>0&&this.options.processEntities)for(let f=0;f<this.options.entities.length;f++){let y=this.options.entities[f];d=d.replace(y.regex,y.val)}return d};let UN={validate:a};q0.exports=t})()});var j0=I(mm=>{"use strict";Object.defineProperty(mm,"__esModule",{value:!0});mm.parseXML=fB;var dB=G0(),pm=new dB.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>t.trim()===""&&t.includes(`
`)?"":void 0});pm.addEntity("#xD","\r");pm.addEntity("#10",`
`);function fB(e){return pm.parse(e,!0)}});var vc=I(wc=>{"use strict";var pB=j0();function mB(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function hB(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}var _c=class{constructor(t){u(this,"value");this.value=t}toString(){return hB(""+this.value)}},hm=class e{constructor(t,r=[]){u(this,"name");u(this,"children");u(this,"attributes",{});this.name=t,this.children=r}static of(t,r,n){let o=new e(t);return r!==void 0&&o.addChildNode(new _c(r)),n!==void 0&&o.withName(n),o}withName(t){return this.name=t,this}addAttribute(t,r){return this.attributes[t]=r,this}addChildNode(t){return this.children.push(t),this}removeAttribute(t){return delete this.attributes[t],this}n(t){return this.name=t,this}c(t){return this.children.push(t),this}a(t,r){return r!=null&&(this.attributes[t]=r),this}cc(t,r,n=r){if(t[r]!=null){let o=e.of(r,t[r]).withName(n);this.c(o)}}l(t,r,n,o){t[r]!=null&&o().map(i=>{i.withName(n),this.c(i)})}lc(t,r,n,o){if(t[r]!=null){let s=o(),i=new e(n);s.map(a=>{i.c(a)}),this.c(i)}}toString(){let t=!!this.children.length,r=`<${this.name}`,n=this.attributes;for(let o of Object.keys(n)){let s=n[o];s!=null&&(r+=` ${o}="${mB(""+s)}"`)}return r+=t?`>${this.children.map(o=>o.toString()).join("")}</${this.name}>`:"/>"}};Object.defineProperty(wc,"parseXML",{enumerable:!0,get:function(){return pB.parseXML}});wc.XmlNode=hm;wc.XmlText=_c});var z0,V0,W0,zr,Cc=v(()=>{z0=C(vc());Je();te();V0=C(j()),W0=C(Ce());Hr();zr=class extends Fe{constructor(r){super();u(this,"settings");u(this,"stringDeserializer");this.settings=r,this.stringDeserializer=new Pn(r)}setSerdeContext(r){this.serdeContext=r,this.stringDeserializer.setSerdeContext(r)}read(r,n,o){let s=B.of(r),i=s.getMemberSchemas();if(s.isStructSchema()&&s.isMemberSchema()&&!!Object.values(i).find(m=>!!m.getMemberTraits().eventPayload)){let m={},p=Object.keys(i)[0];return i[p].isBlobSchema()?m[p]=n:m[p]=this.read(i[p],n),m}let c=(this.serdeContext?.utf8Encoder??W0.toUtf8)(n),l=this.parseXml(c);return this.readSchema(r,o?l[o]:l)}readSchema(r,n){let o=B.of(r);if(o.isUnitSchema())return;let s=o.getMergedTraits();if(o.isListSchema()&&!Array.isArray(n))return this.readSchema(o,[n]);if(n==null)return n;if(typeof n=="object"){let i=!!s.sparse,a=!!s.xmlFlattened;if(o.isListSchema()){let l=o.getValueSchema(),m=[],p=l.getMergedTraits().xmlName??"member",h=a?n:(n[0]??n)[p],g=Array.isArray(h)?h:[h];for(let S of g)(S!=null||i)&&m.push(this.readSchema(l,S));return m}let c={};if(o.isMapSchema()){let l=o.getKeySchema(),m=o.getValueSchema(),p;a?p=Array.isArray(n)?n:[n]:p=Array.isArray(n.entry)?n.entry:[n.entry];let h=l.getMergedTraits().xmlName??"key",g=m.getMergedTraits().xmlName??"value";for(let S of p){let b=S[h],x=S[g];(x!=null||i)&&(c[b]=this.readSchema(m,x))}return c}if(o.isStructSchema()){for(let[l,m]of o.structIterator()){let p=m.getMergedTraits(),h=p.httpPayload?p.xmlName??m.getName():m.getMemberTraits().xmlName??l;n[h]!=null&&(c[l]=this.readSchema(m,n[h]))}return c}if(o.isDocumentSchema())return n;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${o.getName(!0)}`)}return o.isListSchema()?[]:o.isMapSchema()||o.isStructSchema()?{}:this.stringDeserializer.read(o,n)}parseXml(r){if(r.length){let n;try{n=(0,z0.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let o="#text",s=Object.keys(n)[0],i=n[s];return i[o]&&(i[s]=i[o],delete i[o]),(0,V0.getValueFromTextNode)(i)}return{}}}});var K0,Y0,Ac,X0=v(()=>{Je();te();Qe();K0=C(j()),Y0=C(Ae());Hr();$s();Ac=class extends Fe{constructor(r){super();u(this,"settings");u(this,"buffer");this.settings=r}write(r,n,o=""){this.buffer===void 0&&(this.buffer="");let s=B.of(r);if(o&&!o.endsWith(".")&&(o+="."),s.isBlobSchema())(typeof n=="string"||n instanceof Uint8Array)&&(this.writeKey(o),this.writeValue((this.serdeContext?.base64Encoder??Y0.toBase64)(n)));else if(s.isBooleanSchema()||s.isNumericSchema()||s.isStringSchema())n!=null?(this.writeKey(o),this.writeValue(String(n))):s.isIdempotencyToken()&&(this.writeKey(o),this.writeValue((0,lt.v4)()));else if(s.isBigIntegerSchema())n!=null&&(this.writeKey(o),this.writeValue(String(n)));else if(s.isBigDecimalSchema())n!=null&&(this.writeKey(o),this.writeValue(n instanceof fe?n.string:String(n)));else if(s.isTimestampSchema()){if(n instanceof Date)switch(this.writeKey(o),nt(s,this.settings)){case 5:this.writeValue(n.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,K0.dateToUtcString)(n));break;case 7:this.writeValue(String(n.getTime()/1e3));break}}else{if(s.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${s.getName(!0)}`);if(s.isListSchema()){if(Array.isArray(n))if(n.length===0)this.settings.serializeEmptyLists&&(this.writeKey(o),this.writeValue(""));else{let i=s.getValueSchema(),a=this.settings.flattenLists||s.getMergedTraits().xmlFlattened,c=1;for(let l of n){if(l==null)continue;let m=this.getKey("member",i.getMergedTraits().xmlName),p=a?`${o}${c}`:`${o}${m}.${c}`;this.write(i,l,p),++c}}}else if(s.isMapSchema()){if(n&&typeof n=="object"){let i=s.getKeySchema(),a=s.getValueSchema(),c=s.getMergedTraits().xmlFlattened,l=1;for(let[m,p]of Object.entries(n)){if(p==null)continue;let h=this.getKey("key",i.getMergedTraits().xmlName),g=c?`${o}${l}.${h}`:`${o}entry.${l}.${h}`,S=this.getKey("value",a.getMergedTraits().xmlName),b=c?`${o}${l}.${S}`:`${o}entry.${l}.${S}`;this.write(i,m,g),this.write(a,p,b),++l}}}else if(s.isStructSchema()){if(n&&typeof n=="object")for(let[i,a]of Oo(s,n)){if(n[i]==null&&!a.isIdempotencyToken())continue;let c=this.getKey(i,a.getMergedTraits().xmlName),l=`${o}${c}`;this.write(a,n[i],l)}}else if(!s.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${s.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let r=this.buffer;return delete this.buffer,r}getKey(r,n){let o=n??r;return this.settings.capitalizeKeys?o[0].toUpperCase()+o.slice(1):o}writeKey(r){r.endsWith(".")&&(r=r.slice(0,r.length-1)),this.buffer+=`&${kt(r)}=`}writeValue(r){this.buffer+=kt(r)}}});var Vr,gm=v(()=>{Je();te();Po();Cc();X0();Vr=class extends sr{constructor(r){super({defaultNamespace:r.defaultNamespace});u(this,"options");u(this,"serializer");u(this,"deserializer");u(this,"mixin",new ft);this.options=r;let n={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:r.xmlNamespace,serviceNamespace:r.defaultNamespace,serializeEmptyLists:!0};this.serializer=new Ac(n),this.deserializer=new zr(n)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(r){this.serializer.setSerdeContext(r),this.deserializer.setSerdeContext(r)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(r,n,o){let s=await super.serializeRequest(r,n,o);s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":"application/x-www-form-urlencoded"}),(vt(r.input)==="unit"||!s.body)&&(s.body="");let i=r.name.split("#")[1]??r.name;return s.body=`Action=${i}&Version=${this.options.version}`+s.body,s.body.endsWith("&")&&(s.body=s.body.slice(-1)),s}async deserializeResponse(r,n,o){let s=this.deserializer,i=B.of(r.output),a={};if(o.statusCode>=300){let h=await ut(o.body,n);h.byteLength>0&&Object.assign(a,await s.read(15,h)),await this.handleError(r,n,o,a,this.deserializeMetadata(o))}for(let h in o.headers){let g=o.headers[h];delete o.headers[h],o.headers[h.toLowerCase()]=g}let c=r.name.split("#")[1]??r.name,l=i.isStructSchema()&&this.useNestedResult()?c+"Result":void 0,m=await ut(o.body,n);return m.byteLength>0&&Object.assign(a,await s.read(i,m,l)),{$metadata:this.deserializeMetadata(o),...a}}useNestedResult(){return!0}async handleError(r,n,o,s,i){let a=this.loadQueryErrorCode(o,s)??"Unknown",c=this.loadQueryError(s),l=this.loadQueryErrorMessage(s);c.message=l,c.Error={Type:c.Type,Code:c.Code,Message:l};let{errorSchema:m,errorMetadata:p}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,o,c,i,(x,T)=>{try{return x.getSchema(T)}catch{return x.find(D=>B.of(D).getMergedTraits().awsQueryError?.[0]===T)}}),h=B.of(m),g=H.for(m[1]).getErrorCtor(m)??Error,S=new g(l),b={Error:c.Error};for(let[x,T]of h.structIterator()){let O=T.getMergedTraits().xmlName??x,D=c[O]??s[O];b[x]=this.deserializer.readSchema(T,D)}throw this.mixin.decorateServiceException(Object.assign(S,p,{$fault:h.getMergedTraits().error,message:l},b),s)}loadQueryErrorCode(r,n){let o=(n.Errors?.[0]?.Error??n.Errors?.Error??n.Error)?.Code;if(o!==void 0)return o;if(r.statusCode==404)return"NotFound"}loadQueryError(r){return r.Errors?.[0]?.Error??r.Errors?.Error??r.Error}loadQueryErrorMessage(r){let n=this.loadQueryError(r);return n?.message??n?.Message??r.message??r.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var bc,Q0=v(()=>{gm();bc=class extends Vr{constructor(r){super(r);u(this,"options");this.options=r;let n={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,n)}useNestedResult(){return!1}}});var J0,Z0,ym,ev,Tc,Em=v(()=>{J0=C(vc()),Z0=C(j());lm();ym=(e,t)=>mc(e,t).then(r=>{if(r.length){let n;try{n=(0,J0.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let o="#text",s=Object.keys(n)[0],i=n[s];return i[o]&&(i[s]=i[o],delete i[o]),(0,Z0.getValueFromTextNode)(i)}return{}}),ev=async(e,t)=>{let r=await ym(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Tc=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"}});var pt,Sm,xc,Mo,_m=v(()=>{pt=C(vc());Je();te();Qe();Sm=C(j()),xc=C(Ae());Hr();$s();Mo=class extends Fe{constructor(r){super();u(this,"settings");u(this,"stringBuffer");u(this,"byteBuffer");u(this,"buffer");this.settings=r}write(r,n){let o=B.of(r);if(o.isStringSchema()&&typeof n=="string")this.stringBuffer=n;else if(o.isBlobSchema())this.byteBuffer="byteLength"in n?n:(this.serdeContext?.base64Decoder??xc.fromBase64)(n);else{this.buffer=this.writeStruct(o,n,void 0);let s=o.getMergedTraits();s.httpPayload&&!s.xmlName&&this.buffer.withName(o.getName())}}flush(){if(this.byteBuffer!==void 0){let n=this.byteBuffer;return delete this.byteBuffer,n}if(this.stringBuffer!==void 0){let n=this.stringBuffer;return delete this.stringBuffer,n}let r=this.buffer;return this.settings.xmlNamespace&&(r?.attributes?.xmlns||r.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,r.toString()}writeStruct(r,n,o){let s=r.getMergedTraits(),i=r.isMemberSchema()&&!s.httpPayload?r.getMemberTraits().xmlName??r.getMemberName():s.xmlName??r.getName();if(!i||!r.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${r.getName(!0)}.`);let a=pt.XmlNode.of(i),[c,l]=this.getXmlnsAttribute(r,o);for(let[m,p]of Oo(r,n)){let h=n[m];if(h!=null||p.isIdempotencyToken()){if(p.getMergedTraits().xmlAttribute){a.addAttribute(p.getMergedTraits().xmlName??m,this.writeSimple(p,h));continue}if(p.isListSchema())this.writeList(p,h,a,l);else if(p.isMapSchema())this.writeMap(p,h,a,l);else if(p.isStructSchema())a.addChildNode(this.writeStruct(p,h,l));else{let g=pt.XmlNode.of(p.getMergedTraits().xmlName??p.getMemberName());this.writeSimpleInto(p,h,g,l),a.addChildNode(g)}}}return l&&a.addAttribute(c,l),a}writeList(r,n,o,s){if(!r.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${r.getName(!0)}`);let i=r.getMergedTraits(),a=r.getValueSchema(),c=a.getMergedTraits(),l=!!c.sparse,m=!!i.xmlFlattened,[p,h]=this.getXmlnsAttribute(r,s),g=(S,b)=>{if(a.isListSchema())this.writeList(a,Array.isArray(b)?b:[b],S,h);else if(a.isMapSchema())this.writeMap(a,b,S,h);else if(a.isStructSchema()){let x=this.writeStruct(a,b,h);S.addChildNode(x.withName(m?i.xmlName??r.getMemberName():c.xmlName??"member"))}else{let x=pt.XmlNode.of(m?i.xmlName??r.getMemberName():c.xmlName??"member");this.writeSimpleInto(a,b,x,h),S.addChildNode(x)}};if(m)for(let S of n)(l||S!=null)&&g(o,S);else{let S=pt.XmlNode.of(i.xmlName??r.getMemberName());h&&S.addAttribute(p,h);for(let b of n)(l||b!=null)&&g(S,b);o.addChildNode(S)}}writeMap(r,n,o,s,i=!1){if(!r.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${r.getName(!0)}`);let a=r.getMergedTraits(),c=r.getKeySchema(),m=c.getMergedTraits().xmlName??"key",p=r.getValueSchema(),h=p.getMergedTraits(),g=h.xmlName??"value",S=!!h.sparse,b=!!a.xmlFlattened,[x,T]=this.getXmlnsAttribute(r,s),O=(D,F,$)=>{let z=pt.XmlNode.of(m,F),[me,Q]=this.getXmlnsAttribute(c,T);Q&&z.addAttribute(me,Q),D.addChildNode(z);let W=pt.XmlNode.of(g);p.isListSchema()?this.writeList(p,$,W,T):p.isMapSchema()?this.writeMap(p,$,W,T,!0):p.isStructSchema()?W=this.writeStruct(p,$,T):this.writeSimpleInto(p,$,W,T),D.addChildNode(W)};if(b){for(let[D,F]of Object.entries(n))if(S||F!=null){let $=pt.XmlNode.of(a.xmlName??r.getMemberName());O($,D,F),o.addChildNode($)}}else{let D;i||(D=pt.XmlNode.of(a.xmlName??r.getMemberName()),T&&D.addAttribute(x,T),o.addChildNode(D));for(let[F,$]of Object.entries(n))if(S||$!=null){let z=pt.XmlNode.of("entry");O(z,F,$),(i?o:D).addChildNode(z)}}}writeSimple(r,n){if(n===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let o=B.of(r),s=null;if(n&&typeof n=="object")if(o.isBlobSchema())s=(this.serdeContext?.base64Encoder??xc.toBase64)(n);else if(o.isTimestampSchema()&&n instanceof Date)switch(nt(o,this.settings)){case 5:s=n.toISOString().replace(".000Z","Z");break;case 6:s=(0,Sm.dateToUtcString)(n);break;case 7:s=String(n.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",n),s=(0,Sm.dateToUtcString)(n);break}else{if(o.isBigDecimalSchema()&&n)return n instanceof fe?n.string:String(n);throw o.isMapSchema()||o.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${o.getName(!0)}`)}if((o.isBooleanSchema()||o.isNumericSchema()||o.isBigIntegerSchema()||o.isBigDecimalSchema())&&(s=String(n)),o.isStringSchema()&&(n===void 0&&o.isIdempotencyToken()?s=(0,lt.v4)():s=String(n)),s===null)throw new Error(`Unhandled schema-value pair ${o.getName(!0)}=${n}`);return s}writeSimpleInto(r,n,o,s){let i=this.writeSimple(r,n),a=B.of(r),c=new pt.XmlText(i),[l,m]=this.getXmlnsAttribute(a,s);m&&o.addAttribute(l,m),o.addChildNode(c)}getXmlnsAttribute(r,n){let o=r.getMergedTraits(),[s,i]=o.xmlNamespace??[];return i&&i!==n?[s?`xmlns:${s}`:"xmlns",i]:[void 0,void 0]}}});var Bo,wm=v(()=>{Hr();Cc();_m();Bo=class extends Fe{constructor(r){super();u(this,"settings");this.settings=r}createSerializer(){let r=new Mo(this.settings);return r.setSerdeContext(this.serdeContext),r}createDeserializer(){let r=new zr(this.settings);return r.setSerdeContext(this.serdeContext),r}}});var Rc,tv=v(()=>{Je();te();Po();Em();wm();Rc=class extends In{constructor(r){super(r);u(this,"codec");u(this,"serializer");u(this,"deserializer");u(this,"mixin",new ft);let n={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:r.xmlNamespace,serviceNamespace:r.defaultNamespace};this.codec=new Bo(n),this.serializer=new Nn(this.codec.createSerializer(),n),this.deserializer=new On(this.codec.createDeserializer(),n)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(r,n,o){let s=await super.serializeRequest(r,n,o),i=B.of(r.input);if(!s.headers["content-type"]){let a=this.mixin.resolveRestContentType(this.getDefaultContentType(),i);a&&(s.headers["content-type"]=a)}return s.headers["content-type"]===this.getDefaultContentType()&&typeof s.body=="string"&&(s.body='<?xml version="1.0" encoding="UTF-8"?>'+s.body),s}async deserializeResponse(r,n,o){return super.deserializeResponse(r,n,o)}async handleError(r,n,o,s,i){let a=Tc(o,s)??"Unknown",{errorSchema:c,errorMetadata:l}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,o,s,i),m=B.of(c),p=s.Error?.message??s.Error?.Message??s.message??s.Message??"Unknown",h=H.for(c[1]).getErrorCtor(c)??Error,g=new h(p);await this.deserializeHttpMessage(c,n,o,s);let S={};for(let[b,x]of m.structIterator()){let T=x.getMergedTraits().xmlName??b,O=s.Error?.[T]??s[T];S[b]=this.codec.createDeserializer().readSchema(x,O)}throw this.mixin.decorateServiceException(Object.assign(g,l,{$fault:m.getMergedTraits().error,message:p},S),s)}getDefaultContentType(){return"application/xml"}}});var vm={};Ge(vm,{AwsEc2QueryProtocol:()=>bc,AwsJson1_0Protocol:()=>Ec,AwsJson1_1Protocol:()=>Sc,AwsJsonRpcProtocol:()=>Gr,AwsQueryProtocol:()=>Vr,AwsRestJsonProtocol:()=>jr,AwsRestXmlProtocol:()=>Rc,AwsSmithyRpcV2CborProtocol:()=>pc,JsonCodec:()=>qr,JsonShapeDeserializer:()=>Do,JsonShapeSerializer:()=>ko,XmlCodec:()=>Bo,XmlShapeDeserializer:()=>zr,XmlShapeSerializer:()=>Mo,_toBool:()=>C0,_toNum:()=>A0,_toStr:()=>v0,awsExpectUnion:()=>$0,loadRestJsonErrorCode:()=>No,loadRestXmlErrorCode:()=>Tc,parseJsonBody:()=>Hs,parseJsonErrorBody:()=>O0,parseXmlBody:()=>ym,parseXmlErrorBody:()=>ev});var Un=v(()=>{w0();b0();B0();F0();yc();U0();gc();dm();fm();H0();qs();Q0();gm();tv();wm();Cc();_m();Em()});var Wr={};Ge(Wr,{AWSSDKSigV4Signer:()=>yp,AwsEc2QueryProtocol:()=>bc,AwsJson1_0Protocol:()=>Ec,AwsJson1_1Protocol:()=>Sc,AwsJsonRpcProtocol:()=>Gr,AwsQueryProtocol:()=>Vr,AwsRestJsonProtocol:()=>jr,AwsRestXmlProtocol:()=>Rc,AwsSdkSigV4ASigner:()=>Ms,AwsSdkSigV4Signer:()=>Me,AwsSmithyRpcV2CborProtocol:()=>pc,JsonCodec:()=>qr,JsonShapeDeserializer:()=>Do,JsonShapeSerializer:()=>ko,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>kr,NODE_SIGV4A_CONFIG_OPTIONS:()=>Ew,XmlCodec:()=>Bo,XmlShapeDeserializer:()=>zr,XmlShapeSerializer:()=>Mo,_toBool:()=>C0,_toNum:()=>A0,_toStr:()=>v0,awsExpectUnion:()=>$0,emitWarningIfUnsupportedVersion:()=>Nr,getBearerTokenEnvKey:()=>Ya,loadRestJsonErrorCode:()=>No,loadRestXmlErrorCode:()=>Tc,parseJsonBody:()=>Hs,parseJsonErrorBody:()=>O0,parseXmlBody:()=>ym,parseXmlErrorBody:()=>ev,resolveAWSSDKSigV4Config:()=>jw,resolveAwsSdkSigV4AConfig:()=>yw,resolveAwsSdkSigV4Config:()=>lr,setCredentialFeature:()=>Dr,setFeature:()=>tw,setTokenFeature:()=>nw,state:()=>Ka,validateSigningProperties:()=>To});var Re=v(()=>{dt();Bp();Un()});var Ln=I(Fo=>{"use strict";var gB=(Te(),K(ar)),yB=kn(),EB=re(),Lt=(Re(),K(Wr)),sv=void 0;function SB(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function _B(e){let t=gB.normalizeProvider(e.userAgentAppId??sv),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let n=await t();if(!SB(n)){let o=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof n!="string"?o?.warn("userAgentAppId must be a string or undefined."):n.length>50&&o?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}})}var wB=/\d{12}\.ddb/;async function vB(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&Lt.setFeature(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let s=await t.retryStrategy();typeof s.acquireInitialRetryToken=="function"?s.constructor?.name?.includes("Adaptive")?Lt.setFeature(e,"RETRY_MODE_ADAPTIVE","F"):Lt.setFeature(e,"RETRY_MODE_STANDARD","E"):Lt.setFeature(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let s=e.endpointV2;switch(String(s?.url?.hostname).match(wB)&&Lt.setFeature(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":Lt.setFeature(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Lt.setFeature(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Lt.setFeature(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let o=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(o?.$source){let s=o;s.accountId&&Lt.setFeature(e,"RESOLVED_ACCOUNT_ID","T");for(let[i,a]of Object.entries(s.$source??{}))Lt.setFeature(e,i,a)}}var rv="user-agent",Cm="x-amz-user-agent",nv=" ",Am="/",CB=/[^!$%&'*+\-.^_`|~\w]/g,AB=/[^!$%&'*+\-.^_`|~\w#]/g,ov="-",bB=1024;function TB(e){let t="";for(let r in e){let n=e[r];if(t.length+n.length+1<=bB){t.length?t+=","+n:t+=n;continue}break}return t}var iv=e=>(t,r)=>async n=>{let{request:o}=n;if(!EB.HttpRequest.isInstance(o))return t(n);let{headers:s}=o,i=r?.userAgent?.map(Ic)||[],a=(await e.defaultUserAgentProvider()).map(Ic);await vB(r,e,n);let c=r;a.push(`m/${TB(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let l=e?.customUserAgent?.map(Ic)||[],m=await e.userAgentAppId();m&&a.push(Ic(["app",`${m}`]));let p=yB.getUserAgentPrefix(),h=(p?[p]:[]).concat([...a,...i,...l]).join(nv),g=[...a.filter(S=>S.startsWith("aws-sdk-")),...l].join(nv);return e.runtime!=="browser"?(g&&(s[Cm]=s[Cm]?`${s[rv]} ${g}`:g),s[rv]=h):s[Cm]=h,t({...n,request:o})},Ic=e=>{let t=e[0].split(Am).map(i=>i.replace(CB,ov)).join(Am),r=e[1]?.replace(AB,ov),n=t.indexOf(Am),o=t.substring(0,n),s=t.substring(n+1);return o==="api"&&(s=s.toLowerCase()),[o,s,r].filter(i=>i&&i.length>0).reduce((i,a,c)=>{switch(c){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},av={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},xB=e=>({applyToStack:t=>{t.add(iv(e),av)}});Fo.DEFAULT_UA_APP_ID=sv;Fo.getUserAgentMiddlewareOptions=av;Fo.getUserAgentPlugin=xB;Fo.resolveUserAgentConfig=_B;Fo.userAgentMiddleware=iv});var lv=I((ioe,uv)=>{var Pc=Object.defineProperty,RB=Object.getOwnPropertyDescriptor,IB=Object.getOwnPropertyNames,PB=Object.prototype.hasOwnProperty,OB=(e,t)=>Pc(e,"name",{value:t,configurable:!0}),NB=(e,t)=>{for(var r in t)Pc(e,r,{get:t[r],enumerable:!0})},DB=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of IB(t))!PB.call(e,o)&&o!==r&&Pc(e,o,{get:()=>t[o],enumerable:!(n=RB(t,o))||n.enumerable});return e},kB=e=>DB(Pc({},"__esModule",{value:!0}),e),cv={};NB(cv,{isArrayBuffer:()=>MB});uv.exports=kB(cv);var MB=OB(e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]","isArrayBuffer")});var mv=I((aoe,pv)=>{var Oc=Object.defineProperty,BB=Object.getOwnPropertyDescriptor,FB=Object.getOwnPropertyNames,UB=Object.prototype.hasOwnProperty,dv=(e,t)=>Oc(e,"name",{value:t,configurable:!0}),LB=(e,t)=>{for(var r in t)Oc(e,r,{get:t[r],enumerable:!0})},$B=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of FB(t))!UB.call(e,o)&&o!==r&&Oc(e,o,{get:()=>t[o],enumerable:!(n=BB(t,o))||n.enumerable});return e},HB=e=>$B(Oc({},"__esModule",{value:!0}),e),fv={};LB(fv,{fromArrayBuffer:()=>GB,fromString:()=>jB});pv.exports=HB(fv);var qB=lv(),bm=require("buffer"),GB=dv((e,t=0,r=e.byteLength-t)=>{if(!(0,qB.isArrayBuffer)(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return bm.Buffer.from(e,t,r)},"fromArrayBuffer"),jB=dv((e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?bm.Buffer.from(e,t):bm.Buffer.from(e)},"fromString")});var Sv=I((coe,Ev)=>{var Nc=Object.defineProperty,zB=Object.getOwnPropertyDescriptor,VB=Object.getOwnPropertyNames,WB=Object.prototype.hasOwnProperty,Tm=(e,t)=>Nc(e,"name",{value:t,configurable:!0}),KB=(e,t)=>{for(var r in t)Nc(e,r,{get:t[r],enumerable:!0})},YB=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of VB(t))!WB.call(e,o)&&o!==r&&Nc(e,o,{get:()=>t[o],enumerable:!(n=zB(t,o))||n.enumerable});return e},XB=e=>YB(Nc({},"__esModule",{value:!0}),e),hv={};KB(hv,{fromUtf8:()=>yv,toUint8Array:()=>QB,toUtf8:()=>JB});Ev.exports=XB(hv);var gv=mv(),yv=Tm(e=>{let t=(0,gv.fromString)(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},"fromUtf8"),QB=Tm(e=>typeof e=="string"?yv(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),"toUint8Array"),JB=Tm(e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,gv.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},"toUtf8")});var _v=I(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.convertToBuffer=void 0;var ZB=Sv(),eF=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:ZB.fromUtf8;function tF(e){return e instanceof Uint8Array?e:typeof e=="string"?eF(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}Dc.convertToBuffer=tF});var wv=I(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.isEmptyData=void 0;function rF(e){return typeof e=="string"?e.length===0:e.byteLength===0}kc.isEmptyData=rF});var vv=I(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.numToUint8=void 0;function nF(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}Mc.numToUint8=nF});var Cv=I(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.uint32ArrayFrom=void 0;function oF(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}Bc.uint32ArrayFrom=oF});var xm=I($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.uint32ArrayFrom=$t.numToUint8=$t.isEmptyData=$t.convertToBuffer=void 0;var sF=_v();Object.defineProperty($t,"convertToBuffer",{enumerable:!0,get:function(){return sF.convertToBuffer}});var iF=wv();Object.defineProperty($t,"isEmptyData",{enumerable:!0,get:function(){return iF.isEmptyData}});var aF=vv();Object.defineProperty($t,"numToUint8",{enumerable:!0,get:function(){return aF.numToUint8}});var cF=Cv();Object.defineProperty($t,"uint32ArrayFrom",{enumerable:!0,get:function(){return cF.uint32ArrayFrom}})});var Tv=I(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.AwsCrc32=void 0;var Av=(xn(),K(Tn)),Rm=xm(),bv=Im(),uF=(function(){function e(){this.crc32=new bv.Crc32}return e.prototype.update=function(t){(0,Rm.isEmptyData)(t)||this.crc32.update((0,Rm.convertToBuffer)(t))},e.prototype.digest=function(){return Av.__awaiter(this,void 0,void 0,function(){return Av.__generator(this,function(t){return[2,(0,Rm.numToUint8)(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new bv.Crc32},e})();Fc.AwsCrc32=uF});var Im=I(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.AwsCrc32=Kr.Crc32=Kr.crc32=void 0;var lF=(xn(),K(Tn)),dF=xm();function fF(e){return new xv().update(e).digest()}Kr.crc32=fF;var xv=(function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=lF.__values(t),s=o.next();!s.done;s=o.next()){var i=s.value;this.checksum=this.checksum>>>8^mF[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e})();Kr.Crc32=xv;var pF=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],mF=(0,dF.uint32ArrayFrom)(pF),hF=Tv();Object.defineProperty(Kr,"AwsCrc32",{enumerable:!0,get:function(){return hF.AwsCrc32}})});var Lc=I(Xr=>{"use strict";var Pv=Im(),$n=ws(),Uo=class e{constructor(t){u(this,"bytes");if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&Rv(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&Rv(t),parseInt($n.toHex(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function Rv(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var Uc=class{constructor(t,r){u(this,"toUtf8");u(this,"fromUtf8");this.toUtf8=t,this.fromUtf8=r}format(t){let r=[];for(let s of Object.keys(t)){let i=this.fromUtf8(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let n=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),o=0;for(let s of r)n.set(s,o),o+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let a=this.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let l=new Uint8Array(c.buffer);return l.set(a,3),l;case"timestamp":let m=new Uint8Array(9);return m[0]=8,m.set(Uo.fromNumber(t.value.valueOf()).bytes,1),m;case"uuid":if(!AF.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let p=new Uint8Array(17);return p[0]=9,p.set($n.fromHex(t.value.replace(/\-/g,"")),1),p}}parse(t){let r={},n=0;for(;n<t.byteLength;){let o=t.getUint8(n++),s=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,o));switch(n+=o,t.getUint8(n++)){case 0:r[s]={type:Iv,value:!0};break;case 1:r[s]={type:Iv,value:!1};break;case 2:r[s]={type:gF,value:t.getInt8(n++)};break;case 3:r[s]={type:yF,value:t.getInt16(n,!1)},n+=2;break;case 4:r[s]={type:EF,value:t.getInt32(n,!1)},n+=4;break;case 5:r[s]={type:SF,value:new Uo(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:let i=t.getUint16(n,!1);n+=2,r[s]={type:_F,value:new Uint8Array(t.buffer,t.byteOffset+n,i)},n+=i;break;case 7:let a=t.getUint16(n,!1);n+=2,r[s]={type:wF,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[s]={type:vF,value:new Date(new Uo(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let c=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[s]={type:CF,value:`${$n.toHex(c.subarray(0,4))}-${$n.toHex(c.subarray(4,6))}-${$n.toHex(c.subarray(6,8))}-${$n.toHex(c.subarray(8,10))}-${$n.toHex(c.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},Iv="boolean",gF="byte",yF="short",EF="integer",SF="long",_F="binary",wF="string",vF="timestamp",CF="uuid",AF=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,Ov=4,Yr=Ov*2,Hn=4,bF=Yr+Hn*2;function TF({byteLength:e,byteOffset:t,buffer:r}){if(e<bF)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,t,e),o=n.getUint32(0,!1);if(e!==o)throw new Error("Reported message length does not match received message length");let s=n.getUint32(Ov,!1),i=n.getUint32(Yr,!1),a=n.getUint32(e-Hn,!1),c=new Pv.Crc32().update(new Uint8Array(r,t,Yr));if(i!==c.digest())throw new Error(`The prelude checksum specified in the message (${i}) does not match the calculated CRC32 checksum (${c.digest()})`);if(c.update(new Uint8Array(r,t+Yr,e-(Yr+Hn))),a!==c.digest())throw new Error(`The message checksum (${c.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+Yr+Hn,s),body:new Uint8Array(r,t+Yr+Hn+s,o-s-(Yr+Hn+Hn))}}var Pm=class{constructor(t,r){u(this,"headerMarshaller");u(this,"messageBuffer");u(this,"isEndOfStream");this.headerMarshaller=new Uc(t,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){let t=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return r}}}getAvailableMessages(){let t=this.messageBuffer;this.messageBuffer=[];let r=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return r}}}encode({headers:t,body:r}){let n=this.headerMarshaller.format(t),o=n.byteLength+r.byteLength+16,s=new Uint8Array(o),i=new DataView(s.buffer,s.byteOffset,s.byteLength),a=new Pv.Crc32;return i.setUint32(0,o,!1),i.setUint32(4,n.byteLength,!1),i.setUint32(8,a.update(s.subarray(0,8)).digest(),!1),s.set(n,12),s.set(r,n.byteLength+12),i.setUint32(o-4,a.update(s.subarray(8,o-4)).digest(),!1),s}decode(t){let{headers:r,body:n}=TF(t);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(t){return this.headerMarshaller.format(t)}},Om=class{constructor(t){u(this,"options");this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.decoder.decode(t)}},Nm=class{constructor(t){u(this,"options");this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}},Dm=class{constructor(t){u(this,"options");this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream){let r=await this.options.deserializer(t);r!==void 0&&(yield r)}}},km=class{constructor(t){u(this,"options");this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.serializer(t)}};Xr.EventStreamCodec=Pm;Xr.HeaderMarshaller=Uc;Xr.Int64=Uo;Xr.MessageDecoderStream=Om;Xr.MessageEncoderStream=Nm;Xr.SmithyMessageDecoderStream=Dm;Xr.SmithyMessageEncoderStream=km});var Dv=I(Nv=>{"use strict";var xF=la();function RF(e){let{port:t,query:r}=e,{protocol:n,path:o,hostname:s}=e;n&&n.slice(-1)!==":"&&(n+=":"),t&&(s+=`:${t}`),o&&o.charAt(0)!=="/"&&(o=`/${o}`);let i=r?xF.buildQueryString(r):"";i&&i[0]!=="?"&&(i=`?${i}`);let a="";if(e.username!=null||e.password!=null){let l=e.username??"",m=e.password??"";a=`${l}:${m}@`}let c="";return e.fragment&&(c=`#${e.fragment}`),`${n}//${a}${s}${o}${i}${c}`}Nv.formatUrl=RF});var Bm=I(Mm=>{"use strict";var Gs=Lc();function IF(e){let t=0,r=0,n=null,o=null,s=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);t=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},i=async function*(){let a=e[Symbol.asyncIterator]();for(;;){let{value:c,done:l}=await a.next();if(l){if(t)if(t===r)yield n;else throw new Error("Truncated event message received.");else return;return}let m=c.length,p=0;for(;p<m;){if(!n){let g=m-p;o||(o=new Uint8Array(4));let S=Math.min(4-r,g);if(o.set(c.slice(p,p+S),r),r+=S,p+=S,r<4)break;s(new DataView(o.buffer).getUint32(0,!1)),o=null}let h=Math.min(t-r,m-p);n.set(c.slice(p,p+h),r),r+=h,p+=h,t&&t===r&&(yield n,n=null,t=0,r=0)}}};return{[Symbol.asyncIterator]:i}}function PF(e,t){return async function(r){let{value:n}=r.headers[":message-type"];if(n==="error"){let o=new Error(r.headers[":error-message"].value||"UnknownError");throw o.name=r.headers[":error-code"].value,o}else if(n==="exception"){let o=r.headers[":exception-type"].value,s={[o]:r},i=await e(s);if(i.$unknown){let a=new Error(t(r.body));throw a.name=o,a}throw i[o]}else if(n==="event"){let o={[r.headers[":event-type"].value]:r},s=await e(o);return s.$unknown?void 0:s}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}var $c=class{constructor({utf8Encoder:t,utf8Decoder:r}){u(this,"eventStreamCodec");u(this,"utfEncoder");this.eventStreamCodec=new Gs.EventStreamCodec(t,r),this.utfEncoder=t}deserialize(t,r){let n=IF(t);return new Gs.SmithyMessageDecoderStream({messageStream:new Gs.MessageDecoderStream({inputStream:n,decoder:this.eventStreamCodec}),deserializer:PF(r,this.utfEncoder)})}serialize(t,r){return new Gs.MessageEncoderStream({messageStream:new Gs.SmithyMessageEncoderStream({inputStream:t,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}},OF=e=>new $c(e);Mm.EventStreamMarshaller=$c;Mm.eventStreamSerdeProvider=OF});var Bv=I(js=>{"use strict";var NF=Bm(),kv=e=>({[Symbol.asyncIterator]:async function*(){let t=e.getReader();try{for(;;){let{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}}),Mv=e=>{let t=e[Symbol.asyncIterator]();return new ReadableStream({async pull(r){let{done:n,value:o}=await t.next();if(n)return r.close();r.enqueue(o)}})},Hc=class{constructor({utf8Encoder:t,utf8Decoder:r}){u(this,"universalMarshaller");this.universalMarshaller=new NF.EventStreamMarshaller({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){let n=DF(t)?kv(t):t;return this.universalMarshaller.deserialize(n,r)}serialize(t,r){let n=this.universalMarshaller.serialize(t,r);return typeof ReadableStream=="function"?Mv(n):n}},DF=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream,kF=e=>new Hc(e);js.EventStreamMarshaller=Hc;js.eventStreamSerdeProvider=kF;js.iterableToReadableStream=Mv;js.readableStreamtoIterable=kv});var $v=I(zs=>{"use strict";var MF=Lc(),BF=ws(),$m=re(),FF=Dv(),Uv=Bv(),Fv=df(),UF=(e,t,r,n)=>{let o=e,s={start(){},async transform(i,a){try{let c=new Date(Date.now()+await n()),l={":date":{type:"timestamp",value:c}},m=await t.sign({message:{body:i,headers:l},priorSignature:o},{signingDate:c});o=m.signature;let p=r.encode({headers:{...l,":chunk-signature":{type:"binary",value:BF.fromHex(m.signature)}},body:i});a.enqueue(p)}catch(c){a.error(c)}}};return new TransformStream({...s})},Fm=class{constructor(t){u(this,"messageSigner");u(this,"eventStreamCodec");u(this,"systemClockOffsetProvider");this.messageSigner=t.messageSigner,this.eventStreamCodec=new MF.EventStreamCodec(t.utf8Encoder,t.utf8Decoder),this.systemClockOffsetProvider=async()=>t.systemClockOffset??0}async handle(t,r,n={}){let o=r.request,{body:s,headers:i,query:a}=o;if(!(s instanceof ReadableStream))throw new Error("Eventstream payload must be a ReadableStream.");let c=new TransformStream;o.body=c.readable;let l;try{l=await t(r)}catch(S){throw o.body.cancel(),S}let p=((i.authorization||"").match(/Signature=([\w]+)$/)||[])[1]||a&&a["X-Amz-Signature"]||"",h=UF(p,await this.messageSigner(),this.eventStreamCodec,this.systemClockOffsetProvider);return s.pipeThrough(h).pipeThrough(c),l}},LF=e=>new Fm(e),$F=()=>e=>async t=>{let r={...t.input},n=await e(t),o=n.output;return r.SessionId&&o.SessionId==null&&(o.SessionId=r.SessionId),n},HF={step:"initialize",name:"injectSessionIdMiddleware",tags:["WEBSOCKET","EVENT_STREAM"],override:!0},qF=(e,t)=>r=>n=>{let{request:o}=n;if($m.HttpRequest.isInstance(o)&&e.requestHandler.metadata?.handlerProtocol?.toLowerCase().includes("websocket")){o.protocol="wss:",o.method="GET",o.path=`${o.path}-websocket`;let{headers:s}=o;delete s["content-type"],delete s["x-amz-content-sha256"];for(let i of Object.keys(s))if(i.indexOf(t.headerPrefix)===0){let a=i.replace(t.headerPrefix,"");o.query[a]=s[i]}s["x-amz-user-agent"]&&(o.query["user-agent"]=s["x-amz-user-agent"]),o.headers={host:s.host??o.hostname}}return r(n)},GF={name:"websocketEndpointMiddleware",tags:["WEBSOCKET","EVENT_STREAM"],relation:"after",toMiddleware:"eventStreamHeaderMiddleware",override:!0},jF=(e,t)=>({applyToStack:r=>{r.addRelativeTo(qF(e,t),GF),r.add($F(),HF)}}),Lv=e=>e.protocol==="ws:"||e.protocol==="wss:",Um=class{constructor(t){u(this,"signer");this.signer=t.signer}presign(t,r={}){return this.signer.presign(t,r)}async sign(t,r){return $m.HttpRequest.isInstance(t)&&Lv(t)?{...await this.signer.presign({...t,body:""},{...r,expiresIn:60,unsignableHeaders:new Set(Object.keys(t.headers).filter(o=>o!=="host"))}),body:t.body}:this.signer.sign(t,r)}},zF=e=>{let{signer:t}=e;return Object.assign(e,{signer:async r=>{let n=await t(r);if(VF(n))return new Um({signer:n});throw new Error("Expected WebsocketSignatureV4 signer, please check the client constructor.")}})},VF=e=>!!e,WF=2e3,Lm=class e{constructor(t,r=new Fv.FetchHttpHandler){u(this,"metadata",{handlerProtocol:"websocket/h1.1"});u(this,"config");u(this,"configPromise");u(this,"httpHandler");u(this,"sockets",{});this.httpHandler=r,typeof t=="function"?(this.config={},this.configPromise=t().then(n=>this.config=n??{})):(this.config=t??{},this.configPromise=Promise.resolve(this.config))}static create(t,r=new Fv.FetchHttpHandler){return typeof t?.handle=="function"?t:new e(t,r)}destroy(){for(let[t,r]of Object.entries(this.sockets)){for(let n of r)n.close(1e3,"Socket closed through destroy() call");delete this.sockets[t]}}async handle(t){if(!Lv(t))return this.httpHandler.handle(t);let r=FF.formatUrl(t),n=new WebSocket(r);this.sockets[r]||(this.sockets[r]=[]),this.sockets[r].push(n),n.binaryType="arraybuffer",this.config=await this.configPromise;let{connectionTimeout:o=WF}=this.config;await this.waitForReady(n,o);let{body:s}=t,i=KF(s),a=this.connect(n,i),c=YF(a);return{response:new $m.HttpResponse({statusCode:200,body:c})}}updateHttpClientConfig(t,r){this.configPromise=this.configPromise.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}removeNotUsableSockets(t){this.sockets[t]=(this.sockets[t]??[]).filter(r=>![WebSocket.CLOSING,WebSocket.CLOSED].includes(r.readyState))}waitForReady(t,r){return new Promise((n,o)=>{let s=setTimeout(()=>{this.removeNotUsableSockets(t.url),o({$metadata:{httpStatusCode:500}})},r);t.onopen=()=>{clearTimeout(s),n()}})}connect(t,r){let n,o=!1,s=()=>{},i=()=>{};t.onmessage=l=>{i({done:!1,value:new Uint8Array(l.data)})},t.onerror=l=>{o=!0,t.close(),s(l)},t.onclose=()=>{this.removeNotUsableSockets(t.url),!o&&(n?s(n):i({done:!0,value:void 0}))};let a={[Symbol.asyncIterator]:()=>({next:()=>new Promise((l,m)=>{i=l,s=m})})};return(async()=>{try{for await(let l of r)t.send(l)}catch(l){n=l}finally{t.close(1e3)}})(),a}},KF=e=>e[Symbol.asyncIterator]?e:XF(e)?Uv.readableStreamtoIterable(e):{[Symbol.asyncIterator]:async function*(){yield e}},YF=e=>typeof ReadableStream=="function"?Uv.iterableToReadableStream(e):e,XF=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;zs.WebSocketFetchHandler=Lm;zs.eventStreamPayloadHandlerProvider=LF;zs.getWebSocketPlugin=jF;zs.resolveWebSocketConfig=zF});var Hv=I(Lo=>{"use strict";var QF=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}},JF=(e,t,r)=>{if(!(t in e))return;let n=parseInt(e[t],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${t}'. Expected number, got '${e[t]}'.`);return n};Lo.SelectorType=void 0;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Lo.SelectorType||(Lo.SelectorType={}));Lo.booleanSelector=QF;Lo.numberSelector=JF});var Ze=I(Ie=>{"use strict";var Qr=Hv(),qc=je(),ZF=Or(),jv="AWS_USE_DUALSTACK_ENDPOINT",zv="use_dualstack_endpoint",eU=!1,tU={environmentVariableSelector:e=>Qr.booleanSelector(e,jv,Qr.SelectorType.ENV),configFileSelector:e=>Qr.booleanSelector(e,zv,Qr.SelectorType.CONFIG),default:!1},Vv="AWS_USE_FIPS_ENDPOINT",Wv="use_fips_endpoint",rU=!1,nU={environmentVariableSelector:e=>Qr.booleanSelector(e,Vv,Qr.SelectorType.ENV),configFileSelector:e=>Qr.booleanSelector(e,Wv,Qr.SelectorType.CONFIG),default:!1},oU=e=>{let{tls:t,endpoint:r,urlParser:n,useDualstackEndpoint:o}=e;return Object.assign(e,{tls:t??!0,endpoint:qc.normalizeProvider(typeof r=="string"?n(r):r),isCustomEndpoint:!0,useDualstackEndpoint:qc.normalizeProvider(o??!1)})},sU=async e=>{let{tls:t=!0}=e,r=await e.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let o=await e.useDualstackEndpoint(),s=await e.useFipsEndpoint(),{hostname:i}=await e.regionInfoProvider(r,{useDualstackEndpoint:o,useFipsEndpoint:s})??{};if(!i)throw new Error("Cannot resolve hostname from client config");return e.urlParser(`${t?"https:":"http:"}//${i}`)},iU=e=>{let t=qc.normalizeProvider(e.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:o,tls:s}=e;return Object.assign(e,{tls:s??!0,endpoint:r?qc.normalizeProvider(typeof r=="string"?o(r):r):()=>sU({...e,useDualstackEndpoint:t,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:t})},Kv="AWS_REGION",Yv="region",aU={environmentVariableSelector:e=>e[Kv],configFileSelector:e=>e[Yv],default:()=>{throw new Error("Region is missing")}},cU={preferredFile:"credentials"},qv=new Set,uU=(e,t=ZF.isValidHostLabel)=>{if(!qv.has(e)&&!t(e))if(e==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${e}" is not a valid hostname component.`);else qv.add(e)},Xv=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),lU=e=>Xv(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,dU=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:async()=>{let n=typeof t=="function"?await t():t,o=lU(n);return uU(o),o},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return Xv(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},Gv=(e=[],{useFipsEndpoint:t,useDualstackEndpoint:r})=>e.find(({tags:n})=>t===n.includes("fips")&&r===n.includes("dualstack"))?.hostname,fU=(e,{regionHostname:t,partitionHostname:r})=>t||(r?r.replace("{region}",e):void 0),pU=(e,{partitionHash:t})=>Object.keys(t||{}).find(r=>t[r].regions.includes(e))??"aws",mU=(e,{signingRegion:t,regionRegex:r,useFipsEndpoint:n})=>{if(t)return t;if(n){let o=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),s=e.match(o);if(s)return s[0].slice(1,-1)}},hU=(e,{useFipsEndpoint:t=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:o,partitionHash:s})=>{let i=pU(e,{partitionHash:s}),a=e in o?e:s[i]?.endpoint??e,c={useFipsEndpoint:t,useDualstackEndpoint:r},l=Gv(o[a]?.variants,c),m=Gv(s[i]?.variants,c),p=fU(a,{regionHostname:l,partitionHostname:m});if(p===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:t,useDualstackEndpoint:r}}`);let h=mU(p,{signingRegion:o[a]?.signingRegion,regionRegex:s[i].regionRegex,useFipsEndpoint:t});return{partition:i,signingService:n,hostname:p,...h&&{signingRegion:h},...o[a]?.signingService&&{signingService:o[a].signingService}}};Ie.CONFIG_USE_DUALSTACK_ENDPOINT=zv;Ie.CONFIG_USE_FIPS_ENDPOINT=Wv;Ie.DEFAULT_USE_DUALSTACK_ENDPOINT=eU;Ie.DEFAULT_USE_FIPS_ENDPOINT=rU;Ie.ENV_USE_DUALSTACK_ENDPOINT=jv;Ie.ENV_USE_FIPS_ENDPOINT=Vv;Ie.NODE_REGION_CONFIG_FILE_OPTIONS=cU;Ie.NODE_REGION_CONFIG_OPTIONS=aU;Ie.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=tU;Ie.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=nU;Ie.REGION_ENV_NAME=Kv;Ie.REGION_INI_NAME=Yv;Ie.getRegionInfo=hU;Ie.resolveCustomEndpointsConfig=oU;Ie.resolveEndpointsConfig=iU;Ie.resolveRegionConfig=dU});var Jv=I(Qv=>{"use strict";var gU=e=>Object.assign(e,{eventStreamMarshaller:e.eventStreamSerdeProvider(e)});Qv.resolveEventStreamSerdeConfig=gU});var $o=I(Gc=>{"use strict";var yU=re(),Zv="content-length";function eC(e){return t=>async r=>{let n=r.request;if(yU.HttpRequest.isInstance(n)){let{body:o,headers:s}=n;if(o&&Object.keys(s).map(i=>i.toLowerCase()).indexOf(Zv)===-1)try{let i=e(o);n.headers={...n.headers,[Zv]:String(i)}}catch{}}return t({...r,request:n})}}var tC={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},EU=e=>({applyToStack:t=>{t.add(eC(e.bodyLengthChecker),tC)}});Gc.contentLengthMiddleware=eC;Gc.contentLengthMiddlewareOptions=tC;Gc.getContentLengthPlugin=EU});var qm=I(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.getHomeDir=void 0;var SU=require("os"),_U=require("path"),Hm={},wU=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",vU=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${_U.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${n}${r}`;let o=wU();return Hm[o]||(Hm[o]=(0,SU.homedir)()),Hm[o]};jc.getHomeDir=vU});var Gm=I(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});zc.getSSOTokenFilepath=void 0;var CU=require("crypto"),AU=require("path"),bU=qm(),TU=e=>{let r=(0,CU.createHash)("sha1").update(e).digest("hex");return(0,AU.join)((0,bU.getHomeDir)(),".aws","sso","cache",`${r}.json`)};zc.getSSOTokenFilepath=TU});var rC=I(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.getSSOTokenFromFile=Jr.tokenIntercept=void 0;var xU=require("fs/promises"),RU=Gm();Jr.tokenIntercept={};var IU=async e=>{if(Jr.tokenIntercept[e])return Jr.tokenIntercept[e];let t=(0,RU.getSSOTokenFilepath)(e),r=await(0,xU.readFile)(t,"utf8");return JSON.parse(r)};Jr.getSSOTokenFromFile=IU});var nC=I(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.readFile=ot.fileIntercept=ot.filePromises=void 0;var PU=require("node:fs/promises");ot.filePromises={};ot.fileIntercept={};var OU=(e,t)=>ot.fileIntercept[e]!==void 0?ot.fileIntercept[e]:((!ot.filePromises[e]||t?.ignoreCache)&&(ot.filePromises[e]=(0,PU.readFile)(e,"utf8")),ot.filePromises[e]);ot.readFile=OU});var Ht=I(Ke=>{"use strict";var Vs=qm(),oC=Gm(),jm=rC(),Vc=require("path"),Wc=Cr(),Ho=nC(),iC="AWS_PROFILE",aC="default",NU=e=>e.profile||process.env[iC]||aC,qn=".",DU=e=>Object.entries(e).filter(([t])=>{let r=t.indexOf(qn);return r===-1?!1:Object.values(Wc.IniSectionType).includes(t.substring(0,r))}).reduce((t,[r,n])=>{let o=r.indexOf(qn),s=r.substring(0,o)===Wc.IniSectionType.PROFILE?r.substring(o+1):r;return t[s]=n,t},{...e.default&&{default:e.default}}),kU="AWS_CONFIG_FILE",cC=()=>process.env[kU]||Vc.join(Vs.getHomeDir(),".aws","config"),MU="AWS_SHARED_CREDENTIALS_FILE",BU=()=>process.env[MU]||Vc.join(Vs.getHomeDir(),".aws","credentials"),FU=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,UU=["__proto__","profile __proto__"],zm=e=>{let t={},r,n;for(let o of e.split(/\r?\n/)){let s=o.split(/(^|\s)[;#]/)[0].trim();if(s[0]==="["&&s[s.length-1]==="]"){r=void 0,n=void 0;let a=s.substring(1,s.length-1),c=FU.exec(a);if(c){let[,l,,m]=c;Object.values(Wc.IniSectionType).includes(l)&&(r=[l,m].join(qn))}else r=a;if(UU.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=s.indexOf("=");if(![0,-1].includes(a)){let[c,l]=[s.substring(0,a).trim(),s.substring(a+1).trim()];if(l==="")n=c;else{n&&o.trimStart()===o&&(n=void 0),t[r]=t[r]||{};let m=n?[n,c].join(qn):c;t[r][m]=l}}}}return t},sC=()=>({}),uC=async(e={})=>{let{filepath:t=BU(),configFilepath:r=cC()}=e,n=Vs.getHomeDir(),o="~/",s=t;t.startsWith(o)&&(s=Vc.join(n,t.slice(2)));let i=r;r.startsWith(o)&&(i=Vc.join(n,r.slice(2)));let a=await Promise.all([Ho.readFile(i,{ignoreCache:e.ignoreCache}).then(zm).then(DU).catch(sC),Ho.readFile(s,{ignoreCache:e.ignoreCache}).then(zm).catch(sC)]);return{configFile:a[0],credentialsFile:a[1]}},LU=e=>Object.entries(e).filter(([t])=>t.startsWith(Wc.IniSectionType.SSO_SESSION+qn)).reduce((t,[r,n])=>({...t,[r.substring(r.indexOf(qn)+1)]:n}),{}),$U=()=>({}),HU=async(e={})=>Ho.readFile(e.configFilepath??cC()).then(zm).then(LU).catch($U),qU=(...e)=>{let t={};for(let r of e)for(let[n,o]of Object.entries(r))t[n]!==void 0?Object.assign(t[n],o):t[n]=o;return t},GU=async e=>{let t=await uC(e);return qU(t.configFile,t.credentialsFile)},jU={getFileRecord(){return Ho.fileIntercept},interceptFile(e,t){Ho.fileIntercept[e]=Promise.resolve(t)},getTokenRecord(){return jm.tokenIntercept},interceptToken(e,t){jm.tokenIntercept[e]=t}};Object.defineProperty(Ke,"getSSOTokenFromFile",{enumerable:!0,get:function(){return jm.getSSOTokenFromFile}});Object.defineProperty(Ke,"readFile",{enumerable:!0,get:function(){return Ho.readFile}});Ke.CONFIG_PREFIX_SEPARATOR=qn;Ke.DEFAULT_PROFILE=aC;Ke.ENV_PROFILE=iC;Ke.externalDataInterceptor=jU;Ke.getProfileName=NU;Ke.loadSharedConfigFiles=uC;Ke.loadSsoSessionData=HU;Ke.parseKnownFiles=GU;Object.keys(Vs).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ke,e)&&Object.defineProperty(Ke,e,{enumerable:!0,get:function(){return Vs[e]}})});Object.keys(oC).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ke,e)&&Object.defineProperty(Ke,e,{enumerable:!0,get:function(){return oC[e]}})})});var qt=I(fC=>{"use strict";var Ws=Be(),lC=Ht();function dC(e){try{let t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch{return e}}var zU=(e,t)=>async()=>{try{let r=e(process.env,t);if(r===void 0)throw new Error;return r}catch(r){throw new Ws.CredentialsProviderError(r.message||`Not found in ENV: ${dC(e.toString())}`,{logger:t?.logger})}},VU=(e,{preferredFile:t="config",...r}={})=>async()=>{let n=lC.getProfileName(r),{configFile:o,credentialsFile:s}=await lC.loadSharedConfigFiles(r),i=s[n]||{},a=o[n]||{},c=t==="config"?{...i,...a}:{...a,...i};try{let m=e(c,t==="config"?o:s);if(m===void 0)throw new Error;return m}catch(l){throw new Ws.CredentialsProviderError(l.message||`Not found in config files w/ profile [${n}]: ${dC(e.toString())}`,{logger:r.logger})}},WU=e=>typeof e=="function",KU=e=>WU(e)?async()=>await e():Ws.fromStatic(e),YU=({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>{let{signingName:o,logger:s}=n,i={signingName:o,logger:s};return Ws.memoize(Ws.chain(zU(e,i),VU(t,n),KU(r)))};fC.loadConfig=YU});var gC=I(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.getEndpointUrlConfig=void 0;var pC=Ht(),mC="AWS_ENDPOINT_URL",hC="endpoint_url",XU=e=>({environmentVariableSelector:t=>{let r=e.split(" ").map(s=>s.toUpperCase()),n=t[[mC,...r].join("_")];if(n)return n;let o=t[mC];if(o)return o},configFileSelector:(t,r)=>{if(r&&t.services){let o=r[["services",t.services].join(pC.CONFIG_PREFIX_SEPARATOR)];if(o){let s=e.split(" ").map(a=>a.toLowerCase()),i=o[[s.join("_"),hC].join(pC.CONFIG_PREFIX_SEPARATOR)];if(i)return i}}let n=t[hC];if(n)return n},default:void 0});Kc.getEndpointUrlConfig=XU});var yC=I(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});Yc.getEndpointFromConfig=void 0;var QU=qt(),JU=gC(),ZU=async e=>(0,QU.loadConfig)((0,JU.getEndpointUrlConfig)(e??""))();Yc.getEndpointFromConfig=ZU});var Gt=I(gr=>{"use strict";var SC=yC(),EC=cr(),eL=(Te(),K(ar)),Xc=je(),tL=Ld(),rL=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),aL(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!iL(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},nL=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,oL=/(\d+\.){3}\d+/,sL=/\.\./,iL=e=>nL.test(e)&&!oL.test(e)&&!sL.test(e),aL=e=>{let[t,r,n,,,o]=e.split(":"),s=t==="arn"&&e.split(":").length>=6,i=!!(s&&r&&n&&o);if(s&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i},cL=(e,t,r)=>{let n=async()=>{let o=r[e]??r[t];return typeof o=="function"?o():o};return e==="credentialScope"||t==="CredentialScope"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.credentialScope??o?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.accountId??o?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let o=await n();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:s,hostname:i,port:a,path:c}=o;return`${s}//${i}${a?":"+a:""}${c}`}}return o}:n},Vm=e=>typeof e=="object"?"url"in e?EC.parseUrl(e.url):e:EC.parseUrl(e),_C=async(e,t,r,n)=>{if(!r.isCustomEndpoint){let i;r.serviceConfiguredEndpoint?i=await r.serviceConfiguredEndpoint():i=await SC.getEndpointFromConfig(r.serviceId),i&&(r.endpoint=()=>Promise.resolve(Vm(i)),r.isCustomEndpoint=!0)}let o=await wC(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},wC=async(e,t,r)=>{let n={},o=t?.getEndpointParameterInstructions?.()||{};for(let[s,i]of Object.entries(o))switch(i.type){case"staticContextParams":n[s]=i.value;break;case"contextParams":n[s]=e[i.name];break;case"clientContextParams":case"builtInParams":n[s]=await cL(i.name,s,r)();break;case"operationContextParams":n[s]=i.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(o).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await rL(n),n},vC=({config:e,instructions:t})=>(r,n)=>async o=>{e.isCustomEndpoint&&eL.setFeature(n,"ENDPOINT_OVERRIDE","N");let s=await _C(o.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=s,n.authSchemes=s.properties?.authSchemes;let i=n.authSchemes?.[0];if(i){n.signing_region=i.signingRegion,n.signing_service=i.signingName;let c=Xc.getSmithyContext(n)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...o})},CC={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:tL.serializerMiddlewareOption.name},uL=(e,t)=>({applyToStack:r=>{r.addRelativeTo(vC({config:e,instructions:t}),CC)}}),lL=e=>{let t=e.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:o}=e,s=r!=null?async()=>Vm(await Xc.normalizeProvider(r)()):void 0,a=Object.assign(e,{endpoint:s,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:Xc.normalizeProvider(n??!1),useFipsEndpoint:Xc.normalizeProvider(o??!1)}),c;return a.serviceConfiguredEndpoint=async()=>(e.serviceId&&!c&&(c=SC.getEndpointFromConfig(e.serviceId)),c),a},dL=e=>{let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),e};gr.endpointMiddleware=vC;gr.endpointMiddlewareOptions=CC;gr.getEndpointFromInstructions=_C;gr.getEndpointPlugin=uL;gr.resolveEndpointConfig=lL;gr.resolveEndpointRequiredConfig=dL;gr.resolveParams=wC;gr.toEndpointV1=Vm});var Km=I(Zr=>{"use strict";var fL=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],pL=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],mL=["TimeoutError","RequestTimeout","RequestTimeoutException"],hL=[500,502,503,504],gL=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],yL=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],AC=e=>e?.$retryable!==void 0,EL=e=>fL.includes(e.name),bC=e=>e.$metadata?.clockSkewCorrected,TC=e=>{let t=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return e&&e instanceof TypeError?t.has(e.message):!1},SL=e=>e.$metadata?.httpStatusCode===429||pL.includes(e.name)||e.$retryable?.throttling==!0,Wm=(e,t=0)=>AC(e)||bC(e)||mL.includes(e.name)||gL.includes(e?.code||"")||yL.includes(e?.code||"")||hL.includes(e.$metadata?.httpStatusCode||0)||TC(e)||e.cause!==void 0&&t<=10&&Wm(e.cause,t+1),_L=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!Wm(e)}return!1};Zr.isBrowserNetworkError=TC;Zr.isClockSkewCorrectedError=bC;Zr.isClockSkewError=EL;Zr.isRetryableByTrait=AC;Zr.isServerError=_L;Zr.isThrottlingError=SL;Zr.isTransientError=Wm});var Gn=I(he=>{"use strict";var wL=Km();he.RETRY_MODES=void 0;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(he.RETRY_MODES||(he.RETRY_MODES={}));var Ym=3,vL=he.RETRY_MODES.STANDARD,Jc=class Jc{constructor(t){u(this,"beta");u(this,"minCapacity");u(this,"minFillRate");u(this,"scaleConstant");u(this,"smooth");u(this,"currentCapacity",0);u(this,"enabled",!1);u(this,"lastMaxRate",0);u(this,"measuredTxRate",0);u(this,"requestCount",0);u(this,"fillRate");u(this,"lastThrottleTime");u(this,"lastTimestamp",0);u(this,"lastTxRateBucket");u(this,"maxCapacity");u(this,"timeWindow",0);this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>Jc.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),wL.isThrottlingError(t)){let o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}};u(Jc,"setTimeoutFn",setTimeout);var Qc=Jc,Ks=100,Zm=20*1e3,RC=500,Xm=500,IC=5,PC=10,OC=1,CL="amz-sdk-invocation-id",AL="amz-sdk-request",bL=()=>{let e=Ks;return{computeNextBackoffDelay:n=>Math.floor(Math.min(Zm,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}},xC=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(Zm,e),getRetryCost:()=>r}),Ys=class{constructor(t){u(this,"maxAttempts");u(this,"mode",he.RETRY_MODES.STANDARD);u(this,"capacity",Xm);u(this,"retryBackoffStrategy",bL());u(this,"maxAttemptsProvider");this.maxAttempts=t,this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return xC({retryDelay:Ks,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let o=r.errorType;this.retryBackoffStrategy.setDelayBase(o==="THROTTLING"?RC:Ks);let s=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,s):s,a=this.getCapacityCost(o);return this.capacity-=a,xC({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(Xm,this.capacity+(t.getRetryCost()??OC))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Ym}`),Ym}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?PC:IC}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}},Qm=class{constructor(t,r){u(this,"maxAttemptsProvider");u(this,"rateLimiter");u(this,"standardRetryStrategy");u(this,"mode",he.RETRY_MODES.ADAPTIVE);this.maxAttemptsProvider=t;let{rateLimiter:n}=r??{};this.rateLimiter=n??new Qc,this.standardRetryStrategy=new Ys(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}},Jm=class extends Ys{constructor(r,n=Ks){super(typeof r=="function"?r:async()=>r);u(this,"computeNextBackoffDelay");typeof n=="number"?this.computeNextBackoffDelay=()=>n:this.computeNextBackoffDelay=n}async refreshRetryTokenForRetry(r,n){let o=await super.refreshRetryTokenForRetry(r,n);return o.getRetryDelay=()=>this.computeNextBackoffDelay(o.getRetryCount()),o}};he.AdaptiveRetryStrategy=Qm;he.ConfiguredRetryStrategy=Jm;he.DEFAULT_MAX_ATTEMPTS=Ym;he.DEFAULT_RETRY_DELAY_BASE=Ks;he.DEFAULT_RETRY_MODE=vL;he.DefaultRateLimiter=Qc;he.INITIAL_RETRY_TOKENS=Xm;he.INVOCATION_ID_HEADER=CL;he.MAXIMUM_RETRY_DELAY=Zm;he.NO_RETRY_INCREMENT=OC;he.REQUEST_HEADER=AL;he.RETRY_COST=IC;he.StandardRetryStrategy=Ys;he.THROTTLING_RETRY_DELAY_BASE=RC;he.TIMEOUT_RETRY_COST=PC});var NC=I(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});Zc.isStreamingPayload=void 0;var TL=require("stream"),xL=e=>e?.body instanceof TL.Readable||typeof ReadableStream<"u"&&e?.body instanceof ReadableStream;Zc.isStreamingPayload=xL});var bt=I(ve=>{"use strict";var pe=Gn(),qo=re(),en=Km(),kC=Lf(),DC=je(),RL=j(),IL=NC(),PL=(e,t)=>{let r=e,n=pe.NO_RETRY_INCREMENT,o=pe.RETRY_COST,s=pe.TIMEOUT_RETRY_COST,i=e,a=p=>p.name==="TimeoutError"?s:o,c=p=>a(p)<=i;return Object.freeze({hasRetryTokens:c,retrieveRetryTokens:p=>{if(!c(p))throw new Error("No retry token available");let h=a(p);return i-=h,h},releaseRetryTokens:p=>{i+=p??n,i=Math.min(i,r)}})},MC=(e,t)=>Math.floor(Math.min(pe.MAXIMUM_RETRY_DELAY,Math.random()*2**t*e)),BC=e=>e?en.isRetryableByTrait(e)||en.isClockSkewError(e)||en.isThrottlingError(e)||en.isTransientError(e):!1,FC=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),eu=class{constructor(t,r){u(this,"maxAttemptsProvider");u(this,"retryDecider");u(this,"delayDecider");u(this,"retryQuota");u(this,"mode",pe.RETRY_MODES.STANDARD);this.maxAttemptsProvider=t,this.retryDecider=r?.retryDecider??BC,this.delayDecider=r?.delayDecider??MC,this.retryQuota=r?.retryQuota??PL(pe.INITIAL_RETRY_TOKENS)}shouldRetry(t,r,n){return r<n&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)}async getMaxAttempts(){let t;try{t=await this.maxAttemptsProvider()}catch{t=pe.DEFAULT_MAX_ATTEMPTS}return t}async retry(t,r,n){let o,s=0,i=0,a=await this.getMaxAttempts(),{request:c}=r;for(qo.HttpRequest.isInstance(c)&&(c.headers[pe.INVOCATION_ID_HEADER]=kC.v4());;)try{qo.HttpRequest.isInstance(c)&&(c.headers[pe.REQUEST_HEADER]=`attempt=${s+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:l,output:m}=await t(r);return n?.afterRequest&&n.afterRequest(l),this.retryQuota.releaseRetryTokens(o),m.$metadata.attempts=s+1,m.$metadata.totalRetryDelay=i,{response:l,output:m}}catch(l){let m=FC(l);if(s++,this.shouldRetry(m,s,a)){o=this.retryQuota.retrieveRetryTokens(m);let p=this.delayDecider(en.isThrottlingError(m)?pe.THROTTLING_RETRY_DELAY_BASE:pe.DEFAULT_RETRY_DELAY_BASE,s),h=OL(m.$response),g=Math.max(h||0,p);i+=g,await new Promise(S=>setTimeout(S,g));continue}throw m.$metadata||(m.$metadata={}),m.$metadata.attempts=s,m.$metadata.totalRetryDelay=i,m}}},OL=e=>{if(!qo.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},eh=class extends eu{constructor(r,n){let{rateLimiter:o,...s}=n??{};super(r,s);u(this,"rateLimiter");this.rateLimiter=o??new pe.DefaultRateLimiter,this.mode=pe.RETRY_MODES.ADAPTIVE}async retry(r,n){return super.retry(r,n,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:o=>{this.rateLimiter.updateClientSendingRate(o)}})}},th="AWS_MAX_ATTEMPTS",rh="max_attempts",NL={environmentVariableSelector:e=>{let t=e[th];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${th} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[rh];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${rh} mast be a number, got "${t}"`);return r},default:pe.DEFAULT_MAX_ATTEMPTS},DL=e=>{let{retryStrategy:t,retryMode:r,maxAttempts:n}=e,o=DC.normalizeProvider(n??pe.DEFAULT_MAX_ATTEMPTS);return Object.assign(e,{maxAttempts:o,retryStrategy:async()=>t||(await DC.normalizeProvider(r)()===pe.RETRY_MODES.ADAPTIVE?new pe.AdaptiveRetryStrategy(o):new pe.StandardRetryStrategy(o))})},UC="AWS_RETRY_MODE",LC="retry_mode",kL={environmentVariableSelector:e=>e[UC],configFileSelector:e=>e[LC],default:pe.DEFAULT_RETRY_MODE},$C=()=>e=>async t=>{let{request:r}=t;return qo.HttpRequest.isInstance(r)&&(delete r.headers[pe.INVOCATION_ID_HEADER],delete r.headers[pe.REQUEST_HEADER]),e(t)},HC={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},ML=e=>({applyToStack:t=>{t.addRelativeTo($C(),HC)}}),qC=e=>(t,r)=>async n=>{let o=await e.retryStrategy(),s=await e.maxAttempts();if(BL(o)){o=o;let i=await o.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,l=0,{request:m}=n,p=qo.HttpRequest.isInstance(m);for(p&&(m.headers[pe.INVOCATION_ID_HEADER]=kC.v4());;)try{p&&(m.headers[pe.REQUEST_HEADER]=`attempt=${c+1}; max=${s}`);let{response:h,output:g}=await t(n);return o.recordSuccess(i),g.$metadata.attempts=c+1,g.$metadata.totalRetryDelay=l,{response:h,output:g}}catch(h){let g=FL(h);if(a=FC(h),p&&IL.isStreamingPayload(m))throw(r.logger instanceof RL.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{i=await o.refreshRetryTokenForRetry(i,g)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=l,a}c=i.getRetryCount();let S=i.getRetryDelay();l+=S,await new Promise(b=>setTimeout(b,S))}}else return o=o,o?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,n)},BL=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",FL=e=>{let t={error:e,errorType:UL(e)},r=jC(e.$response);return r&&(t.retryAfterHint=r),t},UL=e=>en.isThrottlingError(e)?"THROTTLING":en.isTransientError(e)?"TRANSIENT":en.isServerError(e)?"SERVER_ERROR":"CLIENT_ERROR",GC={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},LL=e=>({applyToStack:t=>{t.add(qC(e),GC)}}),jC=e=>{if(!qo.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};ve.AdaptiveRetryStrategy=eh;ve.CONFIG_MAX_ATTEMPTS=rh;ve.CONFIG_RETRY_MODE=LC;ve.ENV_MAX_ATTEMPTS=th;ve.ENV_RETRY_MODE=UC;ve.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=NL;ve.NODE_RETRY_MODE_CONFIG_OPTIONS=kL;ve.StandardRetryStrategy=eu;ve.defaultDelayDecider=MC;ve.defaultRetryDecider=BC;ve.getOmitRetryHeadersPlugin=ML;ve.getRetryAfterHint=jC;ve.getRetryPlugin=LL;ve.omitRetryHeadersMiddleware=$C;ve.omitRetryHeadersMiddlewareOptions=HC;ve.resolveRetryConfig=DL;ve.retryMiddleware=qC;ve.retryMiddlewareOptions=GC});var sh=I(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.resolveHttpAuthSchemeConfig=tn.defaultBedrockRuntimeHttpAuthSchemeProvider=tn.defaultBedrockRuntimeHttpAuthSchemeParametersProvider=void 0;var $L=(Re(),K(Wr)),nh=(Te(),K(ar)),oh=je(),HL=async(e,t,r)=>({operation:(0,oh.getSmithyContext)(t).operation,region:await(0,oh.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});tn.defaultBedrockRuntimeHttpAuthSchemeParametersProvider=HL;function qL(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"bedrock",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function GL(e){return{schemeId:"smithy.api#httpBearerAuth",propertiesExtractor:({profile:t,filepath:r,configFilepath:n,ignoreCache:o},s)=>({identityProperties:{profile:t,filepath:r,configFilepath:n,ignoreCache:o}})}}var jL=e=>{let t=[];switch(e.operation){default:t.push(qL(e)),t.push(GL(e))}return t};tn.defaultBedrockRuntimeHttpAuthSchemeProvider=jL;var zL=e=>{let t=(0,nh.memoizeIdentityProvider)(e.token,nh.isIdentityExpired,nh.doesIdentityRequireRefresh),r=(0,$L.resolveAwsSdkSigV4Config)(e);return Object.assign(r,{authSchemePreference:(0,oh.normalizeProvider)(e.authSchemePreference??[]),token:t})};tn.resolveHttpAuthSchemeConfig=zL});var zC=I((zoe,VL)=>{VL.exports={name:"@aws-sdk/client-bedrock-runtime",description:"AWS SDK for JavaScript Bedrock Runtime Client for Node.js, Browser and React Native",version:"3.941.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-bedrock-runtime","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo bedrock-runtime"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.940.0","@aws-sdk/credential-provider-node":"3.940.0","@aws-sdk/eventstream-handler-node":"3.936.0","@aws-sdk/middleware-eventstream":"3.936.0","@aws-sdk/middleware-host-header":"3.936.0","@aws-sdk/middleware-logger":"3.936.0","@aws-sdk/middleware-recursion-detection":"3.936.0","@aws-sdk/middleware-user-agent":"3.940.0","@aws-sdk/middleware-websocket":"3.936.0","@aws-sdk/region-config-resolver":"3.936.0","@aws-sdk/token-providers":"3.940.0","@aws-sdk/types":"3.936.0","@aws-sdk/util-endpoints":"3.936.0","@aws-sdk/util-user-agent-browser":"3.936.0","@aws-sdk/util-user-agent-node":"3.940.0","@smithy/config-resolver":"^4.4.3","@smithy/core":"^3.18.5","@smithy/eventstream-serde-browser":"^4.2.5","@smithy/eventstream-serde-config-resolver":"^4.3.5","@smithy/eventstream-serde-node":"^4.2.5","@smithy/fetch-http-handler":"^5.3.6","@smithy/hash-node":"^4.2.5","@smithy/invalid-dependency":"^4.2.5","@smithy/middleware-content-length":"^4.2.5","@smithy/middleware-endpoint":"^4.3.12","@smithy/middleware-retry":"^4.4.12","@smithy/middleware-serde":"^4.2.6","@smithy/middleware-stack":"^4.2.5","@smithy/node-config-provider":"^4.3.5","@smithy/node-http-handler":"^4.4.5","@smithy/protocol-http":"^5.3.5","@smithy/smithy-client":"^4.9.8","@smithy/types":"^4.9.0","@smithy/url-parser":"^4.2.5","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.11","@smithy/util-defaults-mode-node":"^4.2.14","@smithy/util-endpoints":"^3.2.5","@smithy/util-middleware":"^4.2.5","@smithy/util-retry":"^4.2.5","@smithy/util-stream":"^4.5.6","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-bedrock-runtime",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-bedrock-runtime"}}});var ih=I(rn=>{"use strict";var WL=(dt(),K(ur)),KL=Be(),VC="AWS_ACCESS_KEY_ID",WC="AWS_SECRET_ACCESS_KEY",KC="AWS_SESSION_TOKEN",YC="AWS_CREDENTIAL_EXPIRATION",XC="AWS_CREDENTIAL_SCOPE",QC="AWS_ACCOUNT_ID",YL=e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let t=process.env[VC],r=process.env[WC],n=process.env[KC],o=process.env[YC],s=process.env[XC],i=process.env[QC];if(t&&r){let a={accessKeyId:t,secretAccessKey:r,...n&&{sessionToken:n},...o&&{expiration:new Date(o)},...s&&{credentialScope:s},...i&&{accountId:i}};return WL.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new KL.CredentialsProviderError("Unable to find environment variable credentials.",{logger:e?.logger})};rn.ENV_ACCOUNT_ID=QC;rn.ENV_CREDENTIAL_SCOPE=XC;rn.ENV_EXPIRATION=YC;rn.ENV_KEY=VC;rn.ENV_SECRET=WC;rn.ENV_SESSION=KC;rn.fromEnv=YL});var Qs=I(Ue=>{"use strict";var jt=Be(),XL=require("url"),QL=require("buffer"),JL=require("http"),dh=qt(),ZL=cr();function Xs(e){return new Promise((t,r)=>{let n=JL.request({method:"GET",...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",o=>{r(Object.assign(new jt.ProviderError("Unable to connect to instance metadata service"),o)),n.destroy()}),n.on("timeout",()=>{r(new jt.ProviderError("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",o=>{let{statusCode:s=400}=o;(s<200||300<=s)&&(r(Object.assign(new jt.ProviderError("Error response received from instance metadata service"),{statusCode:s})),n.destroy());let i=[];o.on("data",a=>{i.push(a)}),o.on("end",()=>{t(QL.Buffer.concat(i)),n.destroy()})}),n.end()})}var tA=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",rA=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration),...e.AccountId&&{accountId:e.AccountId}}),nA=1e3,oA=0,fh=({maxRetries:e=oA,timeout:t=nA})=>({maxRetries:e,timeout:t}),ch=(e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r},tu="AWS_CONTAINER_CREDENTIALS_FULL_URI",ru="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",uh="AWS_CONTAINER_AUTHORIZATION_TOKEN",e$=(e={})=>{let{timeout:t,maxRetries:r}=fh(e);return()=>ch(async()=>{let n=await s$({logger:e.logger}),o=JSON.parse(await t$(t,n));if(!tA(o))throw new jt.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:e.logger});return rA(o)},r)},t$=async(e,t)=>(process.env[uh]&&(t.headers={...t.headers,Authorization:process.env[uh]}),(await Xs({...t,timeout:e})).toString()),r$="169.254.170.2",n$={localhost:!0,"127.0.0.1":!0},o$={"http:":!0,"https:":!0},s$=async({logger:e})=>{if(process.env[ru])return{hostname:r$,path:process.env[ru]};if(process.env[tu]){let t=XL.parse(process.env[tu]);if(!t.hostname||!(t.hostname in n$))throw new jt.CredentialsProviderError(`${t.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:e});if(!t.protocol||!(t.protocol in o$))throw new jt.CredentialsProviderError(`${t.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:e});return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new jt.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${ru} or ${tu} environment variable is set`,{tryNextLink:!1,logger:e})},lh=class e extends jt.CredentialsProviderError{constructor(r,n=!0){super(r,n);u(this,"tryNextLink");u(this,"name","InstanceMetadataV1FallbackError");this.tryNextLink=n,Object.setPrototypeOf(this,e.prototype)}};Ue.Endpoint=void 0;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(Ue.Endpoint||(Ue.Endpoint={}));var i$="AWS_EC2_METADATA_SERVICE_ENDPOINT",a$="ec2_metadata_service_endpoint",c$={environmentVariableSelector:e=>e[i$],configFileSelector:e=>e[a$],default:void 0},Go;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(Go||(Go={}));var u$="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",l$="ec2_metadata_service_endpoint_mode",d$={environmentVariableSelector:e=>e[u$],configFileSelector:e=>e[l$],default:Go.IPv4},sA=async()=>ZL.parseUrl(await f$()||await p$()),f$=async()=>dh.loadConfig(c$)(),p$=async()=>{let e=await dh.loadConfig(d$)();switch(e){case Go.IPv4:return Ue.Endpoint.IPv4;case Go.IPv6:return Ue.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(Go)}`)}},m$=300,h$=300,g$="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",JC=(e,t)=>{let r=m$+Math.floor(Math.random()*h$),n=new Date(Date.now()+r*1e3);t.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+g$);let o=e.originalExpiration??e.expiration;return{...e,...o?{originalExpiration:o}:{},expiration:n}},y$=(e,t={})=>{let r=t?.logger||console,n;return async()=>{let o;try{o=await e(),o.expiration&&o.expiration.getTime()<Date.now()&&(o=JC(o,r))}catch(s){if(n)r.warn("Credential renew failed: ",s),o=JC(n,r);else throw s}return n=o,o}},iA="/latest/meta-data/iam/security-credentials/",E$="/latest/api/token",ah="AWS_EC2_METADATA_V1_DISABLED",ZC="ec2_metadata_v1_disabled",eA="x-aws-ec2-metadata-token",S$=(e={})=>y$(_$(e),{logger:e.logger}),_$=(e={})=>{let t=!1,{logger:r,profile:n}=e,{timeout:o,maxRetries:s}=fh(e),i=async(a,c)=>{if(t||c.headers?.[eA]==null){let p=!1,h=!1,g=await dh.loadConfig({environmentVariableSelector:S=>{let b=S[ah];if(h=!!b&&b!=="false",b===void 0)throw new jt.CredentialsProviderError(`${ah} not set in env, checking config file next.`,{logger:e.logger});return h},configFileSelector:S=>{let b=S[ZC];return p=!!b&&b!=="false",p},default:!1},{profile:n})();if(e.ec2MetadataV1Disabled||g){let S=[];throw e.ec2MetadataV1Disabled&&S.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),p&&S.push(`config file profile (${ZC})`),h&&S.push(`process environment variable (${ah})`),new lh(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${S.join(", ")}].`)}}let m=(await ch(async()=>{let p;try{p=await v$(c)}catch(h){throw h.statusCode===401&&(t=!1),h}return p},a)).trim();return ch(async()=>{let p;try{p=await C$(m,c,e)}catch(h){throw h.statusCode===401&&(t=!1),h}return p},a)};return async()=>{let a=await sA();if(t)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),i(s,{...a,timeout:o});{let c;try{c=(await w$({...a,timeout:o})).toString()}catch(l){if(l?.statusCode===400)throw Object.assign(l,{message:"EC2 Metadata token request returned error"});return(l.message==="TimeoutError"||[403,404,405].includes(l.statusCode))&&(t=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),i(s,{...a,timeout:o})}return i(s,{...a,headers:{[eA]:c},timeout:o})}}},w$=async e=>Xs({...e,path:E$,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),v$=async e=>(await Xs({...e,path:iA})).toString(),C$=async(e,t,r)=>{let n=JSON.parse((await Xs({...t,path:iA+e})).toString());if(!tA(n))throw new jt.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return rA(n)};Ue.DEFAULT_MAX_RETRIES=oA;Ue.DEFAULT_TIMEOUT=nA;Ue.ENV_CMDS_AUTH_TOKEN=uh;Ue.ENV_CMDS_FULL_URI=tu;Ue.ENV_CMDS_RELATIVE_URI=ru;Ue.fromContainerMetadata=e$;Ue.fromInstanceMetadata=S$;Ue.getInstanceMetadataEndpoint=sA;Ue.httpRequest=Xs;Ue.providerConfigFromInit=fh});var aA=I(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});nu.checkUrl=void 0;var A$=Be(),b$="169.254.170.2",T$="169.254.170.23",x$="[fd00:ec2::23]",R$=(e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===b$||e.hostname===T$||e.hostname===x$)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;let r=e.hostname.split("."),n=o=>{let s=parseInt(o,10);return 0<=s&&s<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new A$.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}};nu.checkUrl=R$});var cA=I(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.createGetRequest=N$;ou.getCredentials=D$;var ph=Be(),I$=re(),P$=j(),O$=ya();function N$(e){return new I$.HttpRequest({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,n])=>(t[r]=n,t),{}),fragment:e.hash})}async function D$(e,t){let n=await(0,O$.sdkStreamMixin)(e.body).transformToString();if(e.statusCode===200){let o=JSON.parse(n);if(typeof o.AccessKeyId!="string"||typeof o.SecretAccessKey!="string"||typeof o.Token!="string"||typeof o.Expiration!="string")throw new ph.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.Token,expiration:(0,P$.parseRfc3339DateTime)(o.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let o={};try{o=JSON.parse(n)}catch{}throw Object.assign(new ph.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:o.Code,Message:o.Message})}throw new ph.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t})}});var uA=I(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.retryWrapper=void 0;var k$=(e,t,r)=>async()=>{for(let n=0;n<t;++n)try{return await e()}catch{await new Promise(s=>setTimeout(s,r))}return await e()};su.retryWrapper=k$});var fA=I(iu=>{"use strict";Object.defineProperty(iu,"__esModule",{value:!0});iu.fromHttp=void 0;var M$=(xn(),K(Tn)),B$=(dt(),K(ur)),F$=xr(),lA=Be(),U$=M$.__importDefault(require("fs/promises")),L$=aA(),dA=cA(),$$=uA(),H$="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",q$="http://169.254.170.2",G$="AWS_CONTAINER_CREDENTIALS_FULL_URI",j$="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",z$="AWS_CONTAINER_AUTHORIZATION_TOKEN",V$=(e={})=>{e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let t,r=e.awsContainerCredentialsRelativeUri??process.env[H$],n=e.awsContainerCredentialsFullUri??process.env[G$],o=e.awsContainerAuthorizationToken??process.env[z$],s=e.awsContainerAuthorizationTokenFile??process.env[j$],i=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?.warn?console.warn:e.logger.warn.bind(e.logger);if(r&&n&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.")),o&&s&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.")),n)t=n;else if(r)t=`${q$}${r}`;else throw new lA.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let a=new URL(t);(0,L$.checkUrl)(a,e.logger);let c=F$.NodeHttpHandler.create({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return(0,$$.retryWrapper)(async()=>{let l=(0,dA.createGetRequest)(a);o?l.headers.Authorization=o:s&&(l.headers.Authorization=(await U$.default.readFile(s)).toString());try{let m=await c.handle(l);return(0,dA.getCredentials)(m.response).then(p=>(0,B$.setCredentialFeature)(p,"CREDENTIALS_HTTP","z"))}catch(m){throw new lA.CredentialsProviderError(String(m),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)};iu.fromHttp=V$});var mh=I(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});au.fromHttp=void 0;var W$=fA();Object.defineProperty(au,"fromHttp",{enumerable:!0,get:function(){return W$.fromHttp}})});function K$(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Y$(e){return{schemeId:"smithy.api#noAuth"}}var Js,pA,mA,hA,hh=v(()=>{Re();Js=C(je()),pA=async(e,t,r)=>({operation:(0,Js.getSmithyContext)(t).operation,region:await(0,Js.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});mA=e=>{let t=[];return e.operation==="CreateToken"?t.push(Y$(e)):t.push(K$(e)),t},hA=e=>{let t=lr(e);return Object.assign(t,{authSchemePreference:(0,Js.normalizeProvider)(e.authSchemePreference??[])})}});var gA,yA,gh=v(()=>{gA=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),yA={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var jo,cu=v(()=>{jo={name:"@aws-sdk/nested-clients",version:"3.940.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.940.0","@aws-sdk/middleware-host-header":"3.936.0","@aws-sdk/middleware-logger":"3.936.0","@aws-sdk/middleware-recursion-detection":"3.936.0","@aws-sdk/middleware-user-agent":"3.940.0","@aws-sdk/region-config-resolver":"3.936.0","@aws-sdk/types":"3.936.0","@aws-sdk/util-endpoints":"3.936.0","@aws-sdk/util-user-agent-browser":"3.936.0","@aws-sdk/util-user-agent-node":"3.940.0","@smithy/config-resolver":"^4.4.3","@smithy/core":"^3.18.5","@smithy/fetch-http-handler":"^5.3.6","@smithy/hash-node":"^4.2.5","@smithy/invalid-dependency":"^4.2.5","@smithy/middleware-content-length":"^4.2.5","@smithy/middleware-endpoint":"^4.3.12","@smithy/middleware-retry":"^4.4.12","@smithy/middleware-serde":"^4.2.6","@smithy/middleware-stack":"^4.2.5","@smithy/node-config-provider":"^4.3.5","@smithy/node-http-handler":"^4.4.5","@smithy/protocol-http":"^5.3.5","@smithy/smithy-client":"^4.9.8","@smithy/types":"^4.9.0","@smithy/url-parser":"^4.2.5","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.11","@smithy/util-defaults-mode-node":"^4.2.14","@smithy/util-endpoints":"^3.2.5","@smithy/util-middleware":"^4.2.5","@smithy/util-retry":"^4.2.5","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./signin.d.ts","./signin.js","./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/signin/runtimeConfig":"./dist-es/submodules/signin/runtimeConfig.browser","./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./package.json":"./package.json","./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"},"./signin":{types:"./dist-types/submodules/signin/index.d.ts",module:"./dist-es/submodules/signin/index.js",node:"./dist-cjs/submodules/signin/index.js",import:"./dist-es/submodules/signin/index.js",require:"./dist-cjs/submodules/signin/index.js"}}}});var zo=I(jn=>{"use strict";var EA=require("os"),yh=require("process"),Q$=Ln(),SA={isCrtAvailable:!1},J$=()=>SA.isCrtAvailable?["md/crt-avail"]:null,_A=({serviceId:e,clientVersion:t})=>async r=>{let n=[["aws-sdk-js",t],["ua","2.1"],[`os/${EA.platform()}`,EA.release()],["lang/js"],["md/nodejs",`${yh.versions.node}`]],o=J$();o&&n.push(o),e&&n.push([`api/${e}`,t]),yh.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${yh.env.AWS_EXECUTION_ENV}`]);let s=await r?.userAgentAppId?.();return s?[...n,[`app/${s}`]]:[...n]},Z$=_A,wA="AWS_SDK_UA_APP_ID",vA="sdk_ua_app_id",eH="sdk-ua-app-id",tH={environmentVariableSelector:e=>e[wA],configFileSelector:e=>e[vA]??e[eH],default:Q$.DEFAULT_UA_APP_ID};jn.NODE_APP_ID_CONFIG_OPTIONS=tH;jn.UA_APP_ID_ENV_NAME=wA;jn.UA_APP_ID_INI_NAME=vA;jn.createDefaultUserAgentProvider=_A;jn.crtAvailability=SA;jn.defaultUserAgent=Z$});var Vo=I(bA=>{"use strict";var Eh=go(),rH=Ce(),nH=require("buffer"),CA=require("crypto"),Sh=class{constructor(t,r){u(this,"algorithmIdentifier");u(this,"secret");u(this,"hash");this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(rH.toUint8Array(AA(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?CA.createHmac(this.algorithmIdentifier,AA(this.secret)):CA.createHash(this.algorithmIdentifier)}};function AA(e,t){return nH.Buffer.isBuffer(e)?e:typeof e=="string"?Eh.fromString(e,t):ArrayBuffer.isView(e)?Eh.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength):Eh.fromArrayBuffer(e)}bA.Hash=Sh});var Wo=I(TA=>{"use strict";var _h=require("node:fs"),oH=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(e instanceof _h.ReadStream){if(e.path!=null)return _h.lstatSync(e.path).size;if(typeof e.fd=="number")return _h.fstatSync(e.fd).size}throw new Error(`Body Length computation failed for ${e}`)};TA.calculateBodyLength=oH});var BA,ht,xA,Zs,Ko,Yo,yr,wh,vh,RA,IA,PA,FA,UA,mt,OA,LA,NA,DA,kA,MA,sH,$A,HA=v(()=>{BA="required",ht="argv",xA="isSet",Zs="booleanEquals",Ko="error",Yo="endpoint",yr="tree",wh="PartitionResult",vh="getAttr",RA={[BA]:!1,type:"string"},IA={[BA]:!0,default:!1,type:"boolean"},PA={ref:"Endpoint"},FA={fn:Zs,[ht]:[{ref:"UseFIPS"},!0]},UA={fn:Zs,[ht]:[{ref:"UseDualStack"},!0]},mt={},OA={fn:vh,[ht]:[{ref:wh},"supportsFIPS"]},LA={ref:wh},NA={fn:Zs,[ht]:[!0,{fn:vh,[ht]:[LA,"supportsDualStack"]}]},DA=[FA],kA=[UA],MA=[{ref:"Region"}],sH={version:"1.0",parameters:{Region:RA,UseDualStack:IA,UseFIPS:IA,Endpoint:RA},rules:[{conditions:[{fn:xA,[ht]:[PA]}],rules:[{conditions:DA,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ko},{conditions:kA,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ko},{endpoint:{url:PA,properties:mt,headers:mt},type:Yo}],type:yr},{conditions:[{fn:xA,[ht]:MA}],rules:[{conditions:[{fn:"aws.partition",[ht]:MA,assign:wh}],rules:[{conditions:[FA,UA],rules:[{conditions:[{fn:Zs,[ht]:[!0,OA]},NA],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:mt,headers:mt},type:Yo}],type:yr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ko}],type:yr},{conditions:DA,rules:[{conditions:[{fn:Zs,[ht]:[OA,!0]}],rules:[{conditions:[{fn:"stringEquals",[ht]:[{fn:vh,[ht]:[LA,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:mt,headers:mt},type:Yo},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:mt,headers:mt},type:Yo}],type:yr},{error:"FIPS is enabled but this partition does not support FIPS",type:Ko}],type:yr},{conditions:kA,rules:[{conditions:[NA],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:mt,headers:mt},type:Yo}],type:yr},{error:"DualStack is enabled but this partition does not support DualStack",type:Ko}],type:yr},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:mt,headers:mt},type:Yo}],type:yr}],type:yr},{error:"Invalid Configuration: Missing Region",type:Ko}]},$A=sH});var qA,Xo,iH,GA,jA=v(()=>{qA=C(kn()),Xo=C(Or());HA();iH=new Xo.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),GA=(e,t={})=>iH.get(e,()=>(0,Xo.resolveEndpoint)($A,{endpointParams:e,logger:t.logger}));Xo.customEndpointFunctions.aws=qA.awsEndpointFunctions});var zA,VA,uu,lu,WA,KA=v(()=>{Re();Un();Te();zA=C(j()),VA=C(cr()),uu=C(Ae()),lu=C(Ce());hh();jA();WA=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??uu.fromBase64,base64Encoder:e?.base64Encoder??uu.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??GA,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??mA,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Me},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Ct}],logger:e?.logger??new zA.NoOpLogger,protocol:e?.protocol??new jr({defaultNamespace:"com.amazonaws.ssooidc"}),serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??VA.parseUrl,utf8Decoder:e?.utf8Decoder??lu.fromUtf8,utf8Encoder:e?.utf8Encoder??lu.toUtf8})});var Qo=I(JA=>{"use strict";var aH=Ze(),YA=qt(),cH=Be(),uH="AWS_EXECUTION_ENV",XA="AWS_REGION",QA="AWS_DEFAULT_REGION",lH="AWS_EC2_METADATA_DISABLED",dH=["in-region","cross-region","mobile","standard","legacy"],fH="/latest/meta-data/placement/region",pH="AWS_DEFAULTS_MODE",mH="defaults_mode",hH={environmentVariableSelector:e=>e[pH],configFileSelector:e=>e[mH],default:"legacy"},gH=({region:e=YA.loadConfig(aH.NODE_REGION_CONFIG_OPTIONS),defaultsMode:t=YA.loadConfig(hH)}={})=>cH.memoize(async()=>{let r=typeof t=="function"?await t():t;switch(r?.toLowerCase()){case"auto":return yH(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${dH.join(", ")}, got ${r}`)}}),yH=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await EH();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},EH=async()=>{if(process.env[uH]&&(process.env[XA]||process.env[QA]))return process.env[XA]??process.env[QA];if(!process.env[lH])try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>C(Qs())),r=await e();return(await t({...r,path:fH})).toString()}catch{}};JA.resolveDefaultsModeConfig=gH});var du,on,ZA,fu,nn,pu,eb,tb,rb,nb,ob,sb,ib=v(()=>{cu();Re();du=C(zo()),on=C(Ze()),ZA=C(Vo()),fu=C(bt()),nn=C(qt()),pu=C(xr()),eb=C(Wo()),tb=C(Gn());KA();rb=C(j()),nb=C(Qo()),ob=C(j()),sb=e=>{(0,ob.emitWarningIfUnsupportedVersion)(process.version);let t=(0,nb.resolveDefaultsModeConfig)(e),r=()=>t().then(rb.loadConfigsForDefaultMode),n=WA(e);Nr(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,nn.loadConfig)(kr,o),bodyLengthChecker:e?.bodyLengthChecker??eb.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,du.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:jo.version}),maxAttempts:e?.maxAttempts??(0,nn.loadConfig)(fu.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,nn.loadConfig)(on.NODE_REGION_CONFIG_OPTIONS,{...on.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:pu.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,nn.loadConfig)({...fu.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||tb.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??ZA.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??pu.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,nn.loadConfig)(on.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,nn.loadConfig)(on.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,nn.loadConfig)(du.NODE_APP_ID_CONFIG_OPTIONS,o)}}});var cb=I(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.warning=void 0;Jo.stsRegionDefaultResolver=_H;var ab=Ze(),SH=qt();function _H(e={}){return(0,SH.loadConfig)({...ab.NODE_REGION_CONFIG_OPTIONS,async default(){return Jo.warning.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...ab.NODE_REGION_CONFIG_FILE_OPTIONS,...e})}Jo.warning={silence:!1}});var zn=I(zt=>{"use strict";var ei=Ze(),ub=cb(),wH=e=>({setRegion(t){e.region=t},region(){return e.region}}),vH=e=>({region:e.region()});Object.defineProperty(zt,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return ei.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(zt,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return ei.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(zt,"REGION_ENV_NAME",{enumerable:!0,get:function(){return ei.REGION_ENV_NAME}});Object.defineProperty(zt,"REGION_INI_NAME",{enumerable:!0,get:function(){return ei.REGION_INI_NAME}});Object.defineProperty(zt,"resolveRegionConfig",{enumerable:!0,get:function(){return ei.resolveRegionConfig}});zt.getAwsRegionExtensionConfiguration=wH;zt.resolveAwsRegionExtensionConfiguration=vH;Object.keys(ub).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(zt,e)&&Object.defineProperty(zt,e,{enumerable:!0,get:function(){return ub[e]}})})});var lb,db,fb=v(()=>{lb=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},db=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var mu,hu,gu,pb,mb=v(()=>{mu=C(zn()),hu=C(re()),gu=C(j());fb();pb=(e,t)=>{let r=Object.assign((0,mu.getAwsRegionExtensionConfiguration)(e),(0,gu.getDefaultExtensionConfiguration)(e),(0,hu.getHttpHandlerExtensionConfiguration)(e),lb(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,mu.resolveAwsRegionExtensionConfiguration)(r),(0,gu.resolveDefaultRuntimeConfig)(r),(0,hu.resolveHttpHandlerRuntimeConfig)(r),db(r))}});var yu,hb,gb,Eu,yb,Eb,Sb,Su,Ch,ti,Ah=v(()=>{yu=C(lo()),hb=C(fo()),gb=C(mo()),Eu=C(Ln()),yb=C(Ze());Te();te();Eb=C($o()),Sb=C(Gt()),Su=C(bt()),Ch=C(j());hh();gh();ib();mb();ti=class extends Ch.Client{constructor(...[r]){let n=sb(r||{});super(n);u(this,"config");this.initConfig=n;let o=gA(n),s=(0,Eu.resolveUserAgentConfig)(o),i=(0,Su.resolveRetryConfig)(s),a=(0,yb.resolveRegionConfig)(i),c=(0,yu.resolveHostHeaderConfig)(a),l=(0,Sb.resolveEndpointConfig)(c),m=hA(l),p=pb(m,r?.extensions||[]);this.config=p,this.middlewareStack.use(An(this.config)),this.middlewareStack.use((0,Eu.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Su.getRetryPlugin)(this.config)),this.middlewareStack.use((0,Eb.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,yu.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,hb.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,gb.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(vn(this.config,{httpAuthSchemeParametersProvider:pA,identityProviderConfigProvider:async h=>new ir({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(Cn(this.config))}destroy(){super.destroy()}}});var _b,xe,_u=v(()=>{_b=C(j()),xe=class e extends _b.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var ri,ni,oi,si,ii,ai,ci,ui,li,di,fi,bh=v(()=>{_u();ri=class e extends xe{constructor(r){super({name:"AccessDeniedException",$fault:"client",...r});u(this,"name","AccessDeniedException");u(this,"$fault","client");u(this,"error");u(this,"reason");u(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.reason=r.reason,this.error_description=r.error_description}},ni=class e extends xe{constructor(r){super({name:"AuthorizationPendingException",$fault:"client",...r});u(this,"name","AuthorizationPendingException");u(this,"$fault","client");u(this,"error");u(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},oi=class e extends xe{constructor(r){super({name:"ExpiredTokenException",$fault:"client",...r});u(this,"name","ExpiredTokenException");u(this,"$fault","client");u(this,"error");u(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},si=class e extends xe{constructor(r){super({name:"InternalServerException",$fault:"server",...r});u(this,"name","InternalServerException");u(this,"$fault","server");u(this,"error");u(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},ii=class e extends xe{constructor(r){super({name:"InvalidClientException",$fault:"client",...r});u(this,"name","InvalidClientException");u(this,"$fault","client");u(this,"error");u(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},ai=class e extends xe{constructor(r){super({name:"InvalidGrantException",$fault:"client",...r});u(this,"name","InvalidGrantException");u(this,"$fault","client");u(this,"error");u(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},ci=class e extends xe{constructor(r){super({name:"InvalidRequestException",$fault:"client",...r});u(this,"name","InvalidRequestException");u(this,"$fault","client");u(this,"error");u(this,"reason");u(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.reason=r.reason,this.error_description=r.error_description}},ui=class e extends xe{constructor(r){super({name:"InvalidScopeException",$fault:"client",...r});u(this,"name","InvalidScopeException");u(this,"$fault","client");u(this,"error");u(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},li=class e extends xe{constructor(r){super({name:"SlowDownException",$fault:"client",...r});u(this,"name","SlowDownException");u(this,"$fault","client");u(this,"error");u(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},di=class e extends xe{constructor(r){super({name:"UnauthorizedClientException",$fault:"client",...r});u(this,"name","UnauthorizedClientException");u(this,"$fault","client");u(this,"error");u(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},fi=class e extends xe{constructor(r){super({name:"UnsupportedGrantTypeException",$fault:"client",...r});u(this,"name","UnsupportedGrantTypeException");u(this,"$fault","client");u(this,"error");u(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}}});var CH,AH,bH,TH,xH,RH,IH,PH,OH,NH,DH,kH,MH,BH,FH,UH,LH,$H,HH,qH,Vt,GH,jH,zH,VH,WH,ge,KH,Tt,YH,XH,xt,QH,wb,vb,JH,ZH,e3,Cb,t3,ne,r3,n3,o3,s3,Ab,i3,a3,c3,u3,l3,d3,f3,p3,m3,h3,g3,y3,E3,S3,bb,Tb=v(()=>{te();bh();_u();CH="AccessDeniedException",AH="AuthorizationPendingException",bH="AccessToken",TH="ClientSecret",xH="CreateToken",RH="CreateTokenRequest",IH="CreateTokenResponse",PH="CodeVerifier",OH="ExpiredTokenException",NH="InvalidClientException",DH="InvalidGrantException",kH="InvalidRequestException",MH="InternalServerException",BH="InvalidScopeException",FH="IdToken",UH="RefreshToken",LH="SlowDownException",$H="UnauthorizedClientException",HH="UnsupportedGrantTypeException",qH="accessToken",Vt="client",GH="clientId",jH="clientSecret",zH="codeVerifier",VH="code",WH="deviceCode",ge="error",KH="expiresIn",Tt="error_description",YH="grantType",XH="http",xt="httpError",QH="idToken",wb="reason",vb="refreshToken",JH="redirectUri",ZH="scope",e3="server",Cb="smithy.ts.sdk.synthetic.com.amazonaws.ssooidc",t3="tokenType",ne="com.amazonaws.ssooidc",r3=[0,ne,bH,8,0],n3=[0,ne,TH,8,0],o3=[0,ne,PH,8,0],s3=[0,ne,FH,8,0],Ab=[0,ne,UH,8,0],i3=[-3,ne,CH,{[ge]:Vt,[xt]:400},[ge,wb,Tt],[0,0,0]];H.for(ne).registerError(i3,ri);a3=[-3,ne,AH,{[ge]:Vt,[xt]:400},[ge,Tt],[0,0]];H.for(ne).registerError(a3,ni);c3=[3,ne,RH,0,[GH,jH,YH,WH,VH,vb,ZH,JH,zH],[0,[()=>n3,0],0,0,0,[()=>Ab,0],64,0,[()=>o3,0]]],u3=[3,ne,IH,0,[qH,t3,KH,vb,QH],[[()=>r3,0],0,1,[()=>Ab,0],[()=>s3,0]]],l3=[-3,ne,OH,{[ge]:Vt,[xt]:400},[ge,Tt],[0,0]];H.for(ne).registerError(l3,oi);d3=[-3,ne,MH,{[ge]:e3,[xt]:500},[ge,Tt],[0,0]];H.for(ne).registerError(d3,si);f3=[-3,ne,NH,{[ge]:Vt,[xt]:401},[ge,Tt],[0,0]];H.for(ne).registerError(f3,ii);p3=[-3,ne,DH,{[ge]:Vt,[xt]:400},[ge,Tt],[0,0]];H.for(ne).registerError(p3,ai);m3=[-3,ne,kH,{[ge]:Vt,[xt]:400},[ge,wb,Tt],[0,0,0]];H.for(ne).registerError(m3,ci);h3=[-3,ne,BH,{[ge]:Vt,[xt]:400},[ge,Tt],[0,0]];H.for(ne).registerError(h3,ui);g3=[-3,ne,LH,{[ge]:Vt,[xt]:400},[ge,Tt],[0,0]];H.for(ne).registerError(g3,li);y3=[-3,ne,$H,{[ge]:Vt,[xt]:400},[ge,Tt],[0,0]];H.for(ne).registerError(y3,di);E3=[-3,ne,HH,{[ge]:Vt,[xt]:400},[ge,Tt],[0,0]];H.for(ne).registerError(E3,fi);S3=[-3,Cb,"SSOOIDCServiceException",0,[],[]];H.for(Cb).registerError(S3,xe);bb=[9,ne,xH,{[XH]:["POST","/token",200]},()=>c3,()=>u3]});var xb,Th,pi,xh=v(()=>{xb=C(Gt()),Th=C(j());gh();Tb();pi=class extends Th.Command.classBuilder().ep(yA).m(function(t,r,n,o){return[(0,xb.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").sc(bb).build(){}});var Rb,_3,wu,Ib=v(()=>{Rb=C(j());xh();Ah();_3={CreateTokenCommand:pi},wu=class extends ti{};(0,Rb.createAggregatedClient)(_3,wu)});var Pb=v(()=>{xh()});var w3,v3,Ob=v(()=>{w3={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},v3={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"}});var Rh={};Ge(Rh,{$Command:()=>Th.Command,AccessDeniedException:()=>ri,AccessDeniedExceptionReason:()=>w3,AuthorizationPendingException:()=>ni,CreateTokenCommand:()=>pi,ExpiredTokenException:()=>oi,InternalServerException:()=>si,InvalidClientException:()=>ii,InvalidGrantException:()=>ai,InvalidRequestException:()=>ci,InvalidRequestExceptionReason:()=>v3,InvalidScopeException:()=>ui,SSOOIDC:()=>wu,SSOOIDCClient:()=>ti,SSOOIDCServiceException:()=>xe,SlowDownException:()=>li,UnauthorizedClientException:()=>di,UnsupportedGrantTypeException:()=>fi,__Client:()=>Ch.Client});var Ih=v(()=>{Ah();Ib();Pb();Ob();bh();_u()});var Oh=I(hi=>{"use strict";var C3=(dt(),K(ur)),A3=(Bp(),K(Ww)),st=Be(),mi=Ht(),b3=require("fs"),T3=({logger:e,signingName:t}={})=>async()=>{if(e?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!t)throw new st.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:e});let r=A3.getBearerTokenEnvKey(t);if(!(r in process.env))throw new st.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:e});let n={token:process.env[r]};return C3.setTokenFeature(n,"BEARER_SERVICE_ENV_VARS","3"),n},x3=300*1e3,Ph="To refresh this SSO session run 'aws sso login' with the corresponding profile.",R3=async(e,t={})=>{let{SSOOIDCClient:r}=await Promise.resolve().then(()=>(Ih(),Rh)),n=s=>t.clientConfig?.[s]??t.parentClientConfig?.[s];return new r(Object.assign({},t.clientConfig??{},{region:e??t.clientConfig?.region,logger:n("logger"),userAgentAppId:n("userAgentAppId")}))},I3=async(e,t,r={})=>{let{CreateTokenCommand:n}=await Promise.resolve().then(()=>(Ih(),Rh));return(await R3(t,r)).send(new n({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}))},Nb=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new st.TokenProviderError(`Token is expired. ${Ph}`,!1)},Vn=(e,t,r=!1)=>{if(typeof t>"u")throw new st.TokenProviderError(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${Ph}`,!1)},{writeFile:P3}=b3.promises,O3=(e,t)=>{let r=mi.getSSOTokenFilepath(e),n=JSON.stringify(t,null,2);return P3(r,n)},Db=new Date(0),kb=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/token-providers - fromSso");let n=await mi.parseKnownFiles(r),o=mi.getProfileName({profile:r.profile??t?.profile}),s=n[o];if(s){if(!s.sso_session)throw new st.TokenProviderError(`Profile '${o}' is missing required property 'sso_session'.`)}else throw new st.TokenProviderError(`Profile '${o}' could not be found in shared credentials file.`,!1);let i=s.sso_session,c=(await mi.loadSsoSessionData(r))[i];if(!c)throw new st.TokenProviderError(`Sso session '${i}' could not be found in shared credentials file.`,!1);for(let S of["sso_start_url","sso_region"])if(!c[S])throw new st.TokenProviderError(`Sso session '${i}' is missing required property '${S}'.`,!1);c.sso_start_url;let l=c.sso_region,m;try{m=await mi.getSSOTokenFromFile(i)}catch{throw new st.TokenProviderError(`The SSO session token associated with profile=${o} was not found or is invalid. ${Ph}`,!1)}Vn("accessToken",m.accessToken),Vn("expiresAt",m.expiresAt);let{accessToken:p,expiresAt:h}=m,g={token:p,expiration:new Date(h)};if(g.expiration.getTime()-Date.now()>x3)return g;if(Date.now()-Db.getTime()<30*1e3)return Nb(g),g;Vn("clientId",m.clientId,!0),Vn("clientSecret",m.clientSecret,!0),Vn("refreshToken",m.refreshToken,!0);try{Db.setTime(Date.now());let S=await I3(m,l,r);Vn("accessToken",S.accessToken),Vn("expiresIn",S.expiresIn);let b=new Date(Date.now()+S.expiresIn*1e3);try{await O3(i,{...m,accessToken:S.accessToken,expiresAt:b.toISOString(),refreshToken:S.refreshToken})}catch{}return{token:S.accessToken,expiration:b}}catch{return Nb(g),g}},N3=({token:e,logger:t})=>async()=>{if(t?.debug("@aws-sdk/token-providers - fromStatic"),!e||!e.token)throw new st.TokenProviderError("Please pass a valid token to fromStatic",!1);return e},D3=(e={})=>st.memoize(st.chain(kb(e),async()=>{throw new st.TokenProviderError("Could not load token from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);hi.fromEnvSigningName=T3;hi.fromSso=kb;hi.fromStatic=N3;hi.nodeProvider=D3});var Dh=I(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.resolveHttpAuthSchemeConfig=sn.defaultSSOHttpAuthSchemeProvider=sn.defaultSSOHttpAuthSchemeParametersProvider=void 0;var k3=(Re(),K(Wr)),Nh=je(),M3=async(e,t,r)=>({operation:(0,Nh.getSmithyContext)(t).operation,region:await(0,Nh.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});sn.defaultSSOHttpAuthSchemeParametersProvider=M3;function B3(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function vu(e){return{schemeId:"smithy.api#noAuth"}}var F3=e=>{let t=[];switch(e.operation){case"GetRoleCredentials":{t.push(vu(e));break}case"ListAccountRoles":{t.push(vu(e));break}case"ListAccounts":{t.push(vu(e));break}case"Logout":{t.push(vu(e));break}default:t.push(B3(e))}return t};sn.defaultSSOHttpAuthSchemeProvider=F3;var U3=e=>{let t=(0,k3.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,Nh.normalizeProvider)(e.authSchemePreference??[])})};sn.resolveHttpAuthSchemeConfig=U3});var Mb=I((iie,L3)=>{L3.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.940.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.940.0","@aws-sdk/middleware-host-header":"3.936.0","@aws-sdk/middleware-logger":"3.936.0","@aws-sdk/middleware-recursion-detection":"3.936.0","@aws-sdk/middleware-user-agent":"3.940.0","@aws-sdk/region-config-resolver":"3.936.0","@aws-sdk/types":"3.936.0","@aws-sdk/util-endpoints":"3.936.0","@aws-sdk/util-user-agent-browser":"3.936.0","@aws-sdk/util-user-agent-node":"3.940.0","@smithy/config-resolver":"^4.4.3","@smithy/core":"^3.18.5","@smithy/fetch-http-handler":"^5.3.6","@smithy/hash-node":"^4.2.5","@smithy/invalid-dependency":"^4.2.5","@smithy/middleware-content-length":"^4.2.5","@smithy/middleware-endpoint":"^4.3.12","@smithy/middleware-retry":"^4.4.12","@smithy/middleware-serde":"^4.2.6","@smithy/middleware-stack":"^4.2.5","@smithy/node-config-provider":"^4.3.5","@smithy/node-http-handler":"^4.4.5","@smithy/protocol-http":"^5.3.5","@smithy/smithy-client":"^4.9.8","@smithy/types":"^4.9.0","@smithy/url-parser":"^4.2.5","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.11","@smithy/util-defaults-mode-node":"^4.2.14","@smithy/util-endpoints":"^3.2.5","@smithy/util-middleware":"^4.2.5","@smithy/util-retry":"^4.2.5","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var Xb=I(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.ruleSet=void 0;var Vb="required",yt="fn",Et="argv",ts="ref",Bb=!0,Fb="isSet",gi="booleanEquals",Zo="error",es="endpoint",Er="tree",kh="PartitionResult",Mh="getAttr",Ub={[Vb]:!1,type:"string"},Lb={[Vb]:!0,default:!1,type:"boolean"},$b={[ts]:"Endpoint"},Wb={[yt]:gi,[Et]:[{[ts]:"UseFIPS"},!0]},Kb={[yt]:gi,[Et]:[{[ts]:"UseDualStack"},!0]},gt={},Hb={[yt]:Mh,[Et]:[{[ts]:kh},"supportsFIPS"]},Yb={[ts]:kh},qb={[yt]:gi,[Et]:[!0,{[yt]:Mh,[Et]:[Yb,"supportsDualStack"]}]},Gb=[Wb],jb=[Kb],zb=[{[ts]:"Region"}],$3={version:"1.0",parameters:{Region:Ub,UseDualStack:Lb,UseFIPS:Lb,Endpoint:Ub},rules:[{conditions:[{[yt]:Fb,[Et]:[$b]}],rules:[{conditions:Gb,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Zo},{conditions:jb,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Zo},{endpoint:{url:$b,properties:gt,headers:gt},type:es}],type:Er},{conditions:[{[yt]:Fb,[Et]:zb}],rules:[{conditions:[{[yt]:"aws.partition",[Et]:zb,assign:kh}],rules:[{conditions:[Wb,Kb],rules:[{conditions:[{[yt]:gi,[Et]:[Bb,Hb]},qb],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:gt,headers:gt},type:es}],type:Er},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Zo}],type:Er},{conditions:Gb,rules:[{conditions:[{[yt]:gi,[Et]:[Hb,Bb]}],rules:[{conditions:[{[yt]:"stringEquals",[Et]:[{[yt]:Mh,[Et]:[Yb,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:gt,headers:gt},type:es},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:gt,headers:gt},type:es}],type:Er},{error:"FIPS is enabled but this partition does not support FIPS",type:Zo}],type:Er},{conditions:jb,rules:[{conditions:[qb],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:gt,headers:gt},type:es}],type:Er},{error:"DualStack is enabled but this partition does not support DualStack",type:Zo}],type:Er},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:gt,headers:gt},type:es}],type:Er}],type:Er},{error:"Invalid Configuration: Missing Region",type:Zo}]};Cu.ruleSet=$3});var Qb=I(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.defaultEndpointResolver=void 0;var H3=kn(),Bh=Or(),q3=Xb(),G3=new Bh.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),j3=(e,t={})=>G3.get(e,()=>(0,Bh.resolveEndpoint)(q3.ruleSet,{endpointParams:e,logger:t.logger}));Au.defaultEndpointResolver=j3;Bh.customEndpointFunctions.aws=H3.awsEndpointFunctions});var eT=I(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.getRuntimeConfig=void 0;var z3=(Re(),K(Wr)),V3=(Un(),K(vm)),W3=(Te(),K(ar)),K3=j(),Y3=cr(),Jb=Ae(),Zb=Ce(),X3=Dh(),Q3=Qb(),J3=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Jb.fromBase64,base64Encoder:e?.base64Encoder??Jb.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Q3.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??X3.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new z3.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new W3.NoAuthSigner}],logger:e?.logger??new K3.NoOpLogger,protocol:e?.protocol??new V3.AwsRestJsonProtocol({defaultNamespace:"com.amazonaws.sso"}),serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??Y3.parseUrl,utf8Decoder:e?.utf8Decoder??Zb.fromUtf8,utf8Encoder:e?.utf8Encoder??Zb.toUtf8});bu.getRuntimeConfig=J3});var sT=I(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.getRuntimeConfig=void 0;var Z3=(xn(),K(Tn)),e2=Z3.__importDefault(Mb()),tT=(Re(),K(Wr)),rT=zo(),Tu=Ze(),t2=Vo(),nT=bt(),Wn=qt(),oT=xr(),r2=Wo(),n2=Gn(),o2=eT(),s2=j(),i2=Qo(),a2=j(),c2=e=>{(0,a2.emitWarningIfUnsupportedVersion)(process.version);let t=(0,i2.resolveDefaultsModeConfig)(e),r=()=>t().then(s2.loadConfigsForDefaultMode),n=(0,o2.getRuntimeConfig)(e);(0,tT.emitWarningIfUnsupportedVersion)(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Wn.loadConfig)(tT.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,o),bodyLengthChecker:e?.bodyLengthChecker??r2.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,rT.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:e2.default.version}),maxAttempts:e?.maxAttempts??(0,Wn.loadConfig)(nT.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Wn.loadConfig)(Tu.NODE_REGION_CONFIG_OPTIONS,{...Tu.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:oT.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Wn.loadConfig)({...nT.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||n2.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??t2.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??oT.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Wn.loadConfig)(Tu.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,Wn.loadConfig)(Tu.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,Wn.loadConfig)(rT.NODE_APP_ID_CONFIG_OPTIONS,o)}};xu.getRuntimeConfig=c2});var xT=I(Le=>{"use strict";var iT=lo(),u2=fo(),l2=mo(),aT=Ln(),d2=Ze(),yi=(Te(),K(ar)),ns=(te(),K(Na)),f2=$o(),_i=Gt(),cT=bt(),Rt=j(),uT=Dh(),p2=sT(),lT=zn(),dT=re(),m2=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),Ou={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},h2=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},g2=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),y2=(e,t)=>{let r=Object.assign(lT.getAwsRegionExtensionConfiguration(e),Rt.getDefaultExtensionConfiguration(e),dT.getHttpHandlerExtensionConfiguration(e),h2(e));return t.forEach(n=>n.configure(r)),Object.assign(e,lT.resolveAwsRegionExtensionConfiguration(r),Rt.resolveDefaultRuntimeConfig(r),dT.resolveHttpHandlerRuntimeConfig(r),g2(r))},rs=class extends Rt.Client{constructor(...[r]){let n=p2.getRuntimeConfig(r||{});super(n);u(this,"config");this.initConfig=n;let o=m2(n),s=aT.resolveUserAgentConfig(o),i=cT.resolveRetryConfig(s),a=d2.resolveRegionConfig(i),c=iT.resolveHostHeaderConfig(a),l=_i.resolveEndpointConfig(c),m=uT.resolveHttpAuthSchemeConfig(l),p=y2(m,r?.extensions||[]);this.config=p,this.middlewareStack.use(ns.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(aT.getUserAgentPlugin(this.config)),this.middlewareStack.use(cT.getRetryPlugin(this.config)),this.middlewareStack.use(f2.getContentLengthPlugin(this.config)),this.middlewareStack.use(iT.getHostHeaderPlugin(this.config)),this.middlewareStack.use(u2.getLoggerPlugin(this.config)),this.middlewareStack.use(l2.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(yi.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:uT.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async h=>new yi.DefaultIdentityProviderConfig({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(yi.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},os=class fT extends Rt.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,fT.prototype)}},pT=class mT extends os{constructor(r){super({name:"InvalidRequestException",$fault:"client",...r});u(this,"name","InvalidRequestException");u(this,"$fault","client");Object.setPrototypeOf(this,mT.prototype)}},hT=class gT extends os{constructor(r){super({name:"ResourceNotFoundException",$fault:"client",...r});u(this,"name","ResourceNotFoundException");u(this,"$fault","client");Object.setPrototypeOf(this,gT.prototype)}},yT=class ET extends os{constructor(r){super({name:"TooManyRequestsException",$fault:"client",...r});u(this,"name","TooManyRequestsException");u(this,"$fault","client");Object.setPrototypeOf(this,ET.prototype)}},ST=class _T extends os{constructor(r){super({name:"UnauthorizedException",$fault:"client",...r});u(this,"name","UnauthorizedException");u(this,"$fault","client");Object.setPrototypeOf(this,_T.prototype)}},E2="AccountInfo",S2="AccountListType",_2="AccessTokenType",w2="GetRoleCredentials",v2="GetRoleCredentialsRequest",C2="GetRoleCredentialsResponse",A2="InvalidRequestException",b2="Logout",T2="ListAccounts",x2="ListAccountsRequest",R2="ListAccountRolesRequest",I2="ListAccountRolesResponse",P2="ListAccountsResponse",O2="ListAccountRoles",N2="LogoutRequest",D2="RoleCredentials",k2="RoleInfo",M2="RoleListType",B2="ResourceNotFoundException",F2="SecretAccessKeyType",U2="SessionTokenType",L2="TooManyRequestsException",$2="UnauthorizedException",Nu="accountId",H2="accessKeyId",q2="accountList",G2="accountName",Du="accessToken",wT="account_id",ku="client",Mu="error",j2="emailAddress",z2="expiration",Bu="http",Fu="httpError",Uu="httpHeader",Kn="httpQuery",Lu="message",vT="maxResults",CT="max_result",$u="nextToken",AT="next_token",V2="roleCredentials",W2="roleList",bT="roleName",K2="role_name",TT="smithy.ts.sdk.synthetic.com.amazonaws.sso",Y2="secretAccessKey",X2="sessionToken",Hu="x-amz-sso_bearer_token",le="com.amazonaws.sso",qu=[0,le,_2,8,0],Q2=[0,le,F2,8,0],J2=[0,le,U2,8,0],Z2=[3,le,E2,0,[Nu,G2,j2],[0,0,0]],eq=[3,le,v2,0,[bT,Nu,Du],[[0,{[Kn]:K2}],[0,{[Kn]:wT}],[()=>qu,{[Uu]:Hu}]]],tq=[3,le,C2,0,[V2],[[()=>uq,0]]],rq=[-3,le,A2,{[Mu]:ku,[Fu]:400},[Lu],[0]];ns.TypeRegistry.for(le).registerError(rq,pT);var nq=[3,le,R2,0,[$u,vT,Du,Nu],[[0,{[Kn]:AT}],[1,{[Kn]:CT}],[()=>qu,{[Uu]:Hu}],[0,{[Kn]:wT}]]],oq=[3,le,I2,0,[$u,W2],[0,()=>gq]],sq=[3,le,x2,0,[$u,vT,Du],[[0,{[Kn]:AT}],[1,{[Kn]:CT}],[()=>qu,{[Uu]:Hu}]]],iq=[3,le,P2,0,[$u,q2],[0,()=>hq]],aq=[3,le,N2,0,[Du],[[()=>qu,{[Uu]:Hu}]]],cq=[-3,le,B2,{[Mu]:ku,[Fu]:404},[Lu],[0]];ns.TypeRegistry.for(le).registerError(cq,hT);var uq=[3,le,D2,0,[H2,Y2,X2,z2],[0,[()=>Q2,0],[()=>J2,0],1]],lq=[3,le,k2,0,[bT,Nu],[0,0]],dq=[-3,le,L2,{[Mu]:ku,[Fu]:429},[Lu],[0]];ns.TypeRegistry.for(le).registerError(dq,yT);var fq=[-3,le,$2,{[Mu]:ku,[Fu]:401},[Lu],[0]];ns.TypeRegistry.for(le).registerError(fq,ST);var pq="unit",mq=[-3,TT,"SSOServiceException",0,[],[]];ns.TypeRegistry.for(TT).registerError(mq,os);var hq=[1,le,S2,0,()=>Z2],gq=[1,le,M2,0,()=>lq],yq=[9,le,w2,{[Bu]:["GET","/federation/credentials",200]},()=>eq,()=>tq],Eq=[9,le,O2,{[Bu]:["GET","/assignment/roles",200]},()=>nq,()=>oq],Sq=[9,le,T2,{[Bu]:["GET","/assignment/accounts",200]},()=>sq,()=>iq],_q=[9,le,b2,{[Bu]:["POST","/logout",200]},()=>aq,()=>pq],Ru=class extends Rt.Command.classBuilder().ep(Ou).m(function(t,r,n,o){return[_i.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").sc(yq).build(){},Ei=class extends Rt.Command.classBuilder().ep(Ou).m(function(t,r,n,o){return[_i.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").sc(Eq).build(){},Si=class extends Rt.Command.classBuilder().ep(Ou).m(function(t,r,n,o){return[_i.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").sc(Sq).build(){},Iu=class extends Rt.Command.classBuilder().ep(Ou).m(function(t,r,n,o){return[_i.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").sc(_q).build(){},wq={GetRoleCredentialsCommand:Ru,ListAccountRolesCommand:Ei,ListAccountsCommand:Si,LogoutCommand:Iu},Pu=class extends rs{};Rt.createAggregatedClient(wq,Pu);var vq=yi.createPaginator(rs,Ei,"nextToken","nextToken","maxResults"),Cq=yi.createPaginator(rs,Si,"nextToken","nextToken","maxResults");Object.defineProperty(Le,"$Command",{enumerable:!0,get:function(){return Rt.Command}});Object.defineProperty(Le,"__Client",{enumerable:!0,get:function(){return Rt.Client}});Le.GetRoleCredentialsCommand=Ru;Le.InvalidRequestException=pT;Le.ListAccountRolesCommand=Ei;Le.ListAccountsCommand=Si;Le.LogoutCommand=Iu;Le.ResourceNotFoundException=hT;Le.SSO=Pu;Le.SSOClient=rs;Le.SSOServiceException=os;Le.TooManyRequestsException=yT;Le.UnauthorizedException=ST;Le.paginateListAccountRoles=vq;Le.paginateListAccounts=Cq});var IT=I(Fh=>{"use strict";var RT=xT();Object.defineProperty(Fh,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return RT.GetRoleCredentialsCommand}});Object.defineProperty(Fh,"SSOClient",{enumerable:!0,get:function(){return RT.SSOClient}})});var Uh=I(ju=>{"use strict";var It=Be(),Gu=Ht(),PT=(dt(),K(ur)),Aq=Oh(),NT=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),wi=!1,OT=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,clientConfig:i,parentClientConfig:a,profile:c,filepath:l,configFilepath:m,ignoreCache:p,logger:h})=>{let g,S="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let ye=await Aq.fromSso({profile:c,filepath:l,configFilepath:m,ignoreCache:p})();g={accessToken:ye.token,expiresAt:new Date(ye.expiration).toISOString()}}catch(ye){throw new It.CredentialsProviderError(ye.message,{tryNextLink:wi,logger:h})}else try{g=await Gu.getSSOTokenFromFile(e)}catch{throw new It.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${S}`,{tryNextLink:wi,logger:h})}if(new Date(g.expiresAt).getTime()-Date.now()<=0)throw new It.CredentialsProviderError(`The SSO session associated with this profile has expired. ${S}`,{tryNextLink:wi,logger:h});let{accessToken:b}=g,{SSOClient:x,GetRoleCredentialsCommand:T}=await Promise.resolve().then(function(){return IT()}),O=s||new x(Object.assign({},i??{},{logger:i?.logger??a?.logger,region:i?.region??n,userAgentAppId:i?.userAgentAppId??a?.userAgentAppId})),D;try{D=await O.send(new T({accountId:r,roleName:o,accessToken:b}))}catch(ye){throw new It.CredentialsProviderError(ye,{tryNextLink:wi,logger:h})}let{roleCredentials:{accessKeyId:F,secretAccessKey:$,sessionToken:z,expiration:me,credentialScope:Q,accountId:W}={}}=D;if(!F||!$||!z||!me)throw new It.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:wi,logger:h});let ae={accessKeyId:F,secretAccessKey:$,sessionToken:z,expiration:new Date(me),...Q&&{credentialScope:Q},...W&&{accountId:W}};return t?PT.setCredentialFeature(ae,"CREDENTIALS_SSO","s"):PT.setCredentialFeature(ae,"CREDENTIALS_SSO_LEGACY","u"),ae},DT=(e,t)=>{let{sso_start_url:r,sso_account_id:n,sso_region:o,sso_role_name:s}=e;if(!r||!n||!o||!s)throw new It.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:t});return e},bq=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:o,ssoRoleName:s,ssoSession:i}=e,{ssoClient:a}=e,c=Gu.getProfileName({profile:e.profile??t?.profile});if(!r&&!n&&!o&&!s&&!i){let m=(await Gu.parseKnownFiles(e))[c];if(!m)throw new It.CredentialsProviderError(`Profile ${c} was not found.`,{logger:e.logger});if(!NT(m))throw new It.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`,{logger:e.logger});if(m?.sso_session){let T=(await Gu.loadSsoSessionData(e))[m.sso_session],O=` configurations in profile ${c} and sso-session ${m.sso_session}`;if(o&&o!==T.sso_region)throw new It.CredentialsProviderError("Conflicting SSO region"+O,{tryNextLink:!1,logger:e.logger});if(r&&r!==T.sso_start_url)throw new It.CredentialsProviderError("Conflicting SSO start_url"+O,{tryNextLink:!1,logger:e.logger});m.sso_region=T.sso_region,m.sso_start_url=T.sso_start_url}let{sso_start_url:p,sso_account_id:h,sso_region:g,sso_role_name:S,sso_session:b}=DT(m,e.logger);return OT({ssoStartUrl:p,ssoSession:b,ssoAccountId:h,ssoRegion:g,ssoRoleName:S,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}else{if(!r||!n||!o||!s)throw new It.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:e.logger});return OT({ssoStartUrl:r,ssoSession:i,ssoAccountId:n,ssoRegion:o,ssoRoleName:s,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}};ju.fromSSO=bq;ju.isSsoProfile=NT;ju.validateSsoProfile=DT});function Tq(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"signin",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function xq(e){return{schemeId:"smithy.api#noAuth"}}var vi,kT,MT,BT,Lh=v(()=>{Re();vi=C(je()),kT=async(e,t,r)=>({operation:(0,vi.getSmithyContext)(t).operation,region:await(0,vi.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});MT=e=>{let t=[];return e.operation==="CreateOAuth2Token"?t.push(xq(e)):t.push(Tq(e)),t},BT=e=>{let t=lr(e);return Object.assign(t,{authSchemePreference:(0,vi.normalizeProvider)(e.authSchemePreference??[])})}});var FT,UT,$h=v(()=>{FT=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"signin"}),UT={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var VT,He,LT,Yn,ss,an,Pt,Wu,Hh,$T,HT,qT,qh,Gh,$e,jh,zu,Vu,GT,jT,zT,Rq,WT,KT=v(()=>{VT="required",He="argv",LT="isSet",Yn="booleanEquals",ss="error",an="endpoint",Pt="tree",Wu="PartitionResult",Hh="stringEquals",$T={[VT]:!0,default:!1,type:"boolean"},HT={[VT]:!1,type:"string"},qT={ref:"Endpoint"},qh={fn:Yn,[He]:[{ref:"UseFIPS"},!0]},Gh={fn:Yn,[He]:[{ref:"UseDualStack"},!0]},$e={},jh={fn:"getAttr",[He]:[{ref:Wu},"name"]},zu={fn:Yn,[He]:[{ref:"UseFIPS"},!1]},Vu={fn:Yn,[He]:[{ref:"UseDualStack"},!1]},GT={fn:"getAttr",[He]:[{ref:Wu},"supportsFIPS"]},jT={fn:Yn,[He]:[!0,{fn:"getAttr",[He]:[{ref:Wu},"supportsDualStack"]}]},zT=[{ref:"Region"}],Rq={version:"1.0",parameters:{UseDualStack:$T,UseFIPS:$T,Endpoint:HT,Region:HT},rules:[{conditions:[{fn:LT,[He]:[qT]}],rules:[{conditions:[qh],error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ss},{rules:[{conditions:[Gh],error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ss},{endpoint:{url:qT,properties:$e,headers:$e},type:an}],type:Pt}],type:Pt},{rules:[{conditions:[{fn:LT,[He]:zT}],rules:[{conditions:[{fn:"aws.partition",[He]:zT,assign:Wu}],rules:[{conditions:[{fn:Hh,[He]:[jh,"aws"]},zu,Vu],endpoint:{url:"https://{Region}.signin.aws.amazon.com",properties:$e,headers:$e},type:an},{conditions:[{fn:Hh,[He]:[jh,"aws-cn"]},zu,Vu],endpoint:{url:"https://{Region}.signin.amazonaws.cn",properties:$e,headers:$e},type:an},{conditions:[{fn:Hh,[He]:[jh,"aws-us-gov"]},zu,Vu],endpoint:{url:"https://{Region}.signin.amazonaws-us-gov.com",properties:$e,headers:$e},type:an},{conditions:[qh,Gh],rules:[{conditions:[{fn:Yn,[He]:[!0,GT]},jT],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:$e,headers:$e},type:an}],type:Pt},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ss}],type:Pt},{conditions:[qh,Vu],rules:[{conditions:[{fn:Yn,[He]:[GT,!0]}],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dnsSuffix}",properties:$e,headers:$e},type:an}],type:Pt},{error:"FIPS is enabled but this partition does not support FIPS",type:ss}],type:Pt},{conditions:[zu,Gh],rules:[{conditions:[jT],rules:[{endpoint:{url:"https://signin.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:$e,headers:$e},type:an}],type:Pt},{error:"DualStack is enabled but this partition does not support DualStack",type:ss}],type:Pt},{endpoint:{url:"https://signin.{Region}.{PartitionResult#dnsSuffix}",properties:$e,headers:$e},type:an}],type:Pt}],type:Pt},{error:"Invalid Configuration: Missing Region",type:ss}],type:Pt}]},WT=Rq});var YT,is,Iq,XT,QT=v(()=>{YT=C(kn()),is=C(Or());KT();Iq=new is.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),XT=(e,t={})=>Iq.get(e,()=>(0,is.resolveEndpoint)(WT,{endpointParams:e,logger:t.logger}));is.customEndpointFunctions.aws=YT.awsEndpointFunctions});var JT,ZT,Ku,Yu,ex,tx=v(()=>{Re();Un();Te();JT=C(j()),ZT=C(cr()),Ku=C(Ae()),Yu=C(Ce());Lh();QT();ex=e=>({apiVersion:"2023-01-01",base64Decoder:e?.base64Decoder??Ku.fromBase64,base64Encoder:e?.base64Encoder??Ku.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??XT,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??MT,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Me},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Ct}],logger:e?.logger??new JT.NoOpLogger,protocol:e?.protocol??new jr({defaultNamespace:"com.amazonaws.signin"}),serviceId:e?.serviceId??"Signin",urlParser:e?.urlParser??ZT.parseUrl,utf8Decoder:e?.utf8Decoder??Yu.fromUtf8,utf8Encoder:e?.utf8Encoder??Yu.toUtf8})});var Xu,un,rx,Qu,cn,Ju,nx,ox,sx,ix,ax,cx,ux=v(()=>{cu();Re();Xu=C(zo()),un=C(Ze()),rx=C(Vo()),Qu=C(bt()),cn=C(qt()),Ju=C(xr()),nx=C(Wo()),ox=C(Gn());tx();sx=C(j()),ix=C(Qo()),ax=C(j()),cx=e=>{(0,ax.emitWarningIfUnsupportedVersion)(process.version);let t=(0,ix.resolveDefaultsModeConfig)(e),r=()=>t().then(sx.loadConfigsForDefaultMode),n=ex(e);Nr(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,cn.loadConfig)(kr,o),bodyLengthChecker:e?.bodyLengthChecker??nx.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Xu.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:jo.version}),maxAttempts:e?.maxAttempts??(0,cn.loadConfig)(Qu.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,cn.loadConfig)(un.NODE_REGION_CONFIG_OPTIONS,{...un.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:Ju.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,cn.loadConfig)({...Qu.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||ox.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??rx.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??Ju.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,cn.loadConfig)(un.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,cn.loadConfig)(un.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,cn.loadConfig)(Xu.NODE_APP_ID_CONFIG_OPTIONS,o)}}});var lx,dx,fx=v(()=>{lx=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},dx=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var Zu,el,tl,px,mx=v(()=>{Zu=C(zn()),el=C(re()),tl=C(j());fx();px=(e,t)=>{let r=Object.assign((0,Zu.getAwsRegionExtensionConfiguration)(e),(0,tl.getDefaultExtensionConfiguration)(e),(0,el.getHttpHandlerExtensionConfiguration)(e),lx(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,Zu.resolveAwsRegionExtensionConfiguration)(r),(0,tl.resolveDefaultRuntimeConfig)(r),(0,el.resolveHttpHandlerRuntimeConfig)(r),dx(r))}});var rl,hx,gx,nl,yx,Ex,Sx,ol,zh,Ci,Vh=v(()=>{rl=C(lo()),hx=C(fo()),gx=C(mo()),nl=C(Ln()),yx=C(Ze());Te();te();Ex=C($o()),Sx=C(Gt()),ol=C(bt()),zh=C(j());Lh();$h();ux();mx();Ci=class extends zh.Client{constructor(...[r]){let n=cx(r||{});super(n);u(this,"config");this.initConfig=n;let o=FT(n),s=(0,nl.resolveUserAgentConfig)(o),i=(0,ol.resolveRetryConfig)(s),a=(0,yx.resolveRegionConfig)(i),c=(0,rl.resolveHostHeaderConfig)(a),l=(0,Sx.resolveEndpointConfig)(c),m=BT(l),p=px(m,r?.extensions||[]);this.config=p,this.middlewareStack.use(An(this.config)),this.middlewareStack.use((0,nl.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,ol.getRetryPlugin)(this.config)),this.middlewareStack.use((0,Ex.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,rl.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,hx.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,gx.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(vn(this.config,{httpAuthSchemeParametersProvider:kT,identityProviderConfigProvider:async h=>new ir({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(Cn(this.config))}destroy(){super.destroy()}}});var _x,Ot,sl=v(()=>{_x=C(j()),Ot=class e extends _x.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var Ai,bi,Ti,xi,Wh=v(()=>{sl();Ai=class e extends Ot{constructor(r){super({name:"AccessDeniedException",$fault:"client",...r});u(this,"name","AccessDeniedException");u(this,"$fault","client");u(this,"error");Object.setPrototypeOf(this,e.prototype),this.error=r.error}},bi=class e extends Ot{constructor(r){super({name:"InternalServerException",$fault:"server",...r});u(this,"name","InternalServerException");u(this,"$fault","server");u(this,"error");Object.setPrototypeOf(this,e.prototype),this.error=r.error}},Ti=class e extends Ot{constructor(r){super({name:"TooManyRequestsError",$fault:"client",...r});u(this,"name","TooManyRequestsError");u(this,"$fault","client");u(this,"error");Object.setPrototypeOf(this,e.prototype),this.error=r.error}},xi=class e extends Ot{constructor(r){super({name:"ValidationException",$fault:"client",...r});u(this,"name","ValidationException");u(this,"$fault","client");u(this,"error");Object.setPrototypeOf(this,e.prototype),this.error=r.error}}});var Pq,Oq,Nq,Dq,kq,Mq,Bq,Fq,Uq,Lq,$q,wx,vx,Kh,Cx,Ax,Hq,ln,bx,Tx,qq,Yh,xx,it,al,il,Rx,Gq,Ix,Px,Nx,jq,zq,Ox,Ye,Dx,Vq,Wq,Kq,Yq,Xq,Qq,Jq,Zq,eG,tG,kx,Mx=v(()=>{te();Wh();sl();Pq="AccessDeniedException",Oq="AccessToken",Nq="CreateOAuth2Token",Dq="CreateOAuth2TokenRequest",kq="CreateOAuth2TokenRequestBody",Mq="CreateOAuth2TokenResponseBody",Bq="CreateOAuth2TokenResponse",Fq="InternalServerException",Uq="RefreshToken",Lq="TooManyRequestsError",$q="ValidationException",wx="accessKeyId",vx="accessToken",Kh="client",Cx="clientId",Ax="codeVerifier",Hq="code",ln="error",bx="expiresIn",Tx="grantType",qq="http",Yh="httpError",xx="idToken",it="jsonName",al="message",il="refreshToken",Rx="redirectUri",Gq="server",Ix="secretAccessKey",Px="sessionToken",Nx="smithy.ts.sdk.synthetic.com.amazonaws.signin",jq="tokenInput",zq="tokenOutput",Ox="tokenType",Ye="com.amazonaws.signin",Dx=[0,Ye,Uq,8,0],Vq=[-3,Ye,Pq,{[ln]:Kh},[ln,al],[0,0]];H.for(Ye).registerError(Vq,Ai);Wq=[3,Ye,Oq,8,[wx,Ix,Px],[[0,{[it]:wx}],[0,{[it]:Ix}],[0,{[it]:Px}]]],Kq=[3,Ye,Dq,0,[jq],[[()=>Yq,16]]],Yq=[3,Ye,kq,0,[Cx,Tx,Hq,Rx,Ax,il],[[0,{[it]:Cx}],[0,{[it]:Tx}],0,[0,{[it]:Rx}],[0,{[it]:Ax}],[()=>Dx,{[it]:il}]]],Xq=[3,Ye,Bq,0,[zq],[[()=>Qq,16]]],Qq=[3,Ye,Mq,0,[vx,Ox,bx,il,xx],[[()=>Wq,{[it]:vx}],[0,{[it]:Ox}],[1,{[it]:bx}],[()=>Dx,{[it]:il}],[0,{[it]:xx}]]],Jq=[-3,Ye,Fq,{[ln]:Gq,[Yh]:500},[ln,al],[0,0]];H.for(Ye).registerError(Jq,bi);Zq=[-3,Ye,Lq,{[ln]:Kh,[Yh]:429},[ln,al],[0,0]];H.for(Ye).registerError(Zq,Ti);eG=[-3,Ye,$q,{[ln]:Kh,[Yh]:400},[ln,al],[0,0]];H.for(Ye).registerError(eG,xi);tG=[-3,Nx,"SigninServiceException",0,[],[]];H.for(Nx).registerError(tG,Ot);kx=[9,Ye,Nq,{[qq]:["POST","/v1/token",200]},()=>Kq,()=>Xq]});var Bx,Xh,Ri,Qh=v(()=>{Bx=C(Gt()),Xh=C(j());$h();Mx();Ri=class extends Xh.Command.classBuilder().ep(UT).m(function(t,r,n,o){return[(0,Bx.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Signin","CreateOAuth2Token",{}).n("SigninClient","CreateOAuth2TokenCommand").sc(kx).build(){}});var Fx,rG,cl,Ux=v(()=>{Fx=C(j());Qh();Vh();rG={CreateOAuth2TokenCommand:Ri},cl=class extends Ci{};(0,Fx.createAggregatedClient)(rG,cl)});var Lx=v(()=>{Qh()});var nG,$x=v(()=>{nG={AUTHCODE_EXPIRED:"AUTHCODE_EXPIRED",INSUFFICIENT_PERMISSIONS:"INSUFFICIENT_PERMISSIONS",INVALID_REQUEST:"INVALID_REQUEST",SERVER_ERROR:"server_error",TOKEN_EXPIRED:"TOKEN_EXPIRED",USER_CREDENTIALS_CHANGED:"USER_CREDENTIALS_CHANGED"}});var Hx={};Ge(Hx,{$Command:()=>Xh.Command,AccessDeniedException:()=>Ai,CreateOAuth2TokenCommand:()=>Ri,InternalServerException:()=>bi,OAuth2ErrorCode:()=>nG,Signin:()=>cl,SigninClient:()=>Ci,SigninServiceException:()=>Ot,TooManyRequestsError:()=>Ti,ValidationException:()=>xi,__Client:()=>zh.Client});var qx=v(()=>{Vh();Ux();Lx();$x();Wh();sl()});var jx=I(Gx=>{"use strict";var oG=(dt(),K(ur)),dn=Be(),eg=Ht(),sG=re(),ul=require("node:crypto"),Jh=require("node:fs"),iG=require("node:os"),Zh=require("node:path"),ll=class ll{constructor(t,r,n){u(this,"profileData");u(this,"init");u(this,"callerClientConfig");this.profileData=t,this.init=r,this.callerClientConfig=n}async loadCredentials(){let t=await this.loadToken();if(!t)throw new dn.CredentialsProviderError(`Failed to load a token for session ${this.loginSession}, please re-authenticate using aws login`,{tryNextLink:!1,logger:this.logger});let r=t.accessToken,n=Date.now();return new Date(r.expiresAt).getTime()-n<=ll.REFRESH_THRESHOLD?this.refresh(t):{accessKeyId:r.accessKeyId,secretAccessKey:r.secretAccessKey,sessionToken:r.sessionToken,accountId:r.accountId,expiration:new Date(r.expiresAt)}}get logger(){return this.init?.logger}get loginSession(){return this.profileData.login_session}async refresh(t){let{SigninClient:r,CreateOAuth2TokenCommand:n}=await Promise.resolve().then(()=>(qx(),Hx)),{logger:o,userAgentAppId:s}=this.callerClientConfig??{},a=(p=>p?.metadata?.handlerProtocol==="h2")(this.callerClientConfig?.requestHandler)?void 0:this.callerClientConfig?.requestHandler,c=this.profileData.region??await this.callerClientConfig?.region?.()??process.env.AWS_REGION,l=new r({credentials:{accessKeyId:"",secretAccessKey:""},region:c,requestHandler:a,logger:o,userAgentAppId:s,...this.init?.clientConfig});this.createDPoPInterceptor(l.middlewareStack);let m={tokenInput:{clientId:t.clientId,refreshToken:t.refreshToken,grantType:"refresh_token"}};try{let p=await l.send(new n(m)),{accessKeyId:h,secretAccessKey:g,sessionToken:S}=p.tokenOutput?.accessToken??{},{refreshToken:b,expiresIn:x}=p.tokenOutput??{};if(!h||!g||!S||!b)throw new dn.CredentialsProviderError("Token refresh response missing required fields",{logger:this.logger,tryNextLink:!1});let T=(x??900)*1e3,O=new Date(Date.now()+T),D={...t,accessToken:{...t.accessToken,accessKeyId:h,secretAccessKey:g,sessionToken:S,expiresAt:O.toISOString()},refreshToken:b};await this.saveToken(D);let F=D.accessToken;return{accessKeyId:F.accessKeyId,secretAccessKey:F.secretAccessKey,sessionToken:F.sessionToken,accountId:F.accountId,expiration:O}}catch(p){if(p.name==="AccessDeniedException"){let h=p.error,g;switch(h){case"TOKEN_EXPIRED":g="Your session has expired. Please reauthenticate.";break;case"USER_CREDENTIALS_CHANGED":g="Unable to refresh credentials because of a change in your password. Please reauthenticate with your new password.";break;case"INSUFFICIENT_PERMISSIONS":g="Unable to refresh credentials due to insufficient permissions. You may be missing permission for the 'CreateOAuth2Token' action.";break;default:g=`Failed to refresh token: ${String(p)}. Please re-authenticate using \`aws login\``}throw new dn.CredentialsProviderError(g,{logger:this.logger,tryNextLink:!1})}throw new dn.CredentialsProviderError(`Failed to refresh token: ${String(p)}. Please re-authenticate using aws login`,{logger:this.logger})}}async loadToken(){let t=this.getTokenFilePath();try{let r;try{r=await eg.readFile(t,{ignoreCache:this.init?.ignoreCache})}catch{r=await Jh.promises.readFile(t,"utf8")}let n=JSON.parse(r),o=["accessToken","clientId","refreshToken","dpopKey"].filter(s=>!n[s]);if(n.accessToken?.accountId||o.push("accountId"),o.length>0)throw new dn.CredentialsProviderError(`Token validation failed, missing fields: ${o.join(", ")}`,{logger:this.logger,tryNextLink:!1});return n}catch(r){throw new dn.CredentialsProviderError(`Failed to load token from ${t}: ${String(r)}`,{logger:this.logger,tryNextLink:!1})}}async saveToken(t){let r=this.getTokenFilePath(),n=Zh.dirname(r);try{await Jh.promises.mkdir(n,{recursive:!0})}catch{}await Jh.promises.writeFile(r,JSON.stringify(t,null,2),"utf8")}getTokenFilePath(){let t=process.env.AWS_LOGIN_CACHE_DIRECTORY??Zh.join(iG.homedir(),".aws","login","cache"),r=Buffer.from(this.loginSession,"utf8"),n=ul.createHash("sha256").update(r).digest("hex");return Zh.join(t,`${n}.json`)}derToRawSignature(t){let r=2;if(t[r]!==2)throw new Error("Invalid DER signature");r++;let n=t[r++],o=t.subarray(r,r+n);if(r+=n,t[r]!==2)throw new Error("Invalid DER signature");r++;let s=t[r++],i=t.subarray(r,r+s);o=o[0]===0?o.subarray(1):o,i=i[0]===0?i.subarray(1):i;let a=Buffer.concat([Buffer.alloc(32-o.length),o]),c=Buffer.concat([Buffer.alloc(32-i.length),i]);return Buffer.concat([a,c])}createDPoPInterceptor(t){t.add(r=>async n=>{if(sG.HttpRequest.isInstance(n.request)){let o=n.request,s=`${o.protocol}//${o.hostname}${o.port?`:${o.port}`:""}${o.path}`,i=await this.generateDpop(o.method,s);o.headers={...o.headers,DPoP:i}}return r(n)},{step:"finalizeRequest",name:"dpopInterceptor",override:!0})}async generateDpop(t="POST",r){let n=await this.loadToken();try{let o=ul.createPrivateKey({key:n.dpopKey,format:"pem",type:"sec1"}),i=ul.createPublicKey(o).export({format:"der",type:"spki"}),a=-1;for(let O=0;O<i.length;O++)if(i[O]===4){a=O;break}let c=i.slice(a+1,a+33),l=i.slice(a+33,a+65),m={alg:"ES256",typ:"dpop+jwt",jwk:{kty:"EC",crv:"P-256",x:c.toString("base64url"),y:l.toString("base64url")}},p={jti:crypto.randomUUID(),htm:t,htu:r,iat:Math.floor(Date.now()/1e3)},h=Buffer.from(JSON.stringify(m)).toString("base64url"),g=Buffer.from(JSON.stringify(p)).toString("base64url"),S=`${h}.${g}`,b=ul.sign("sha256",Buffer.from(S),o),T=this.derToRawSignature(b).toString("base64url");return`${S}.${T}`}catch(o){throw new dn.CredentialsProviderError(`Failed to generate Dpop proof: ${o instanceof Error?o.message:String(o)}`,{logger:this.logger,tryNextLink:!1})}}};u(ll,"REFRESH_THRESHOLD",300*1e3);var tg=ll,aG=e=>async({callerClientConfig:t}={})=>{e?.logger?.debug?.("@aws-sdk/credential-providers - fromLoginCredentials");let r=await eg.parseKnownFiles(e||{}),n=eg.getProfileName({profile:e?.profile??t?.profile}),o=r[n];if(!o?.login_session)throw new dn.CredentialsProviderError(`Profile ${n} does not contain login_session.`,{tryNextLink:!0,logger:e?.logger});let i=await new tg(o,e,t).loadCredentials();return oG.setCredentialFeature(i,"CREDENTIALS_LOGIN","AD")};Gx.fromLoginCredentials=aG});function cG(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function uG(e){return{schemeId:"smithy.api#noAuth"}}var Ii,zx,Vx,lG,Wx,rg=v(()=>{Re();Ii=C(je());Pi();zx=async(e,t,r)=>({operation:(0,Ii.getSmithyContext)(t).operation,region:await(0,Ii.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Vx=e=>{let t=[];return e.operation==="AssumeRoleWithWebIdentity"?t.push(uG(e)):t.push(cG(e)),t},lG=e=>Object.assign(e,{stsClientCtor:Wt}),Wx=e=>{let t=lG(e),r=lr(t);return Object.assign(r,{authSchemePreference:(0,Ii.normalizeProvider)(e.authSchemePreference??[])})}});var Kx,dl,fl=v(()=>{Kx=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),dl={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var sR,V,ee,fn,Pe,iR,aR,de,Yx,Kt,as,og,Xx,ng,cR,Qx,Oe,Jx,uR,lR,qe,at,Zx,dR,fR,eR,pR,tR,rR,nR,oR,dG,mR,hR=v(()=>{sR="required",V="type",ee="argv",fn="booleanEquals",Pe="stringEquals",iR="sigv4",aR="us-east-1",de="endpoint",Yx="https://sts.{Region}.{PartitionResult#dnsSuffix}",Kt="tree",as="error",og="getAttr",Xx={[sR]:!1,[V]:"string"},ng={[sR]:!0,default:!1,[V]:"boolean"},cR={ref:"Endpoint"},Qx={fn:"isSet",[ee]:[{ref:"Region"}]},Oe={ref:"Region"},Jx={fn:"aws.partition",[ee]:[Oe],assign:"PartitionResult"},uR={ref:"UseFIPS"},lR={ref:"UseDualStack"},qe={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:iR,signingName:"sts",signingRegion:aR}]},headers:{}},at={},Zx={conditions:[{fn:Pe,[ee]:[Oe,"aws-global"]}],[de]:qe,[V]:de},dR={fn,[ee]:[uR,!0]},fR={fn,[ee]:[lR,!0]},eR={fn:og,[ee]:[{ref:"PartitionResult"},"supportsFIPS"]},pR={ref:"PartitionResult"},tR={fn,[ee]:[!0,{fn:og,[ee]:[pR,"supportsDualStack"]}]},rR=[{fn:"isSet",[ee]:[cR]}],nR=[dR],oR=[fR],dG={version:"1.0",parameters:{Region:Xx,UseDualStack:ng,UseFIPS:ng,Endpoint:Xx,UseGlobalEndpoint:ng},rules:[{conditions:[{fn,[ee]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[ee]:rR},Qx,Jx,{fn,[ee]:[uR,!1]},{fn,[ee]:[lR,!1]}],rules:[{conditions:[{fn:Pe,[ee]:[Oe,"ap-northeast-1"]}],endpoint:qe,[V]:de},{conditions:[{fn:Pe,[ee]:[Oe,"ap-south-1"]}],endpoint:qe,[V]:de},{conditions:[{fn:Pe,[ee]:[Oe,"ap-southeast-1"]}],endpoint:qe,[V]:de},{conditions:[{fn:Pe,[ee]:[Oe,"ap-southeast-2"]}],endpoint:qe,[V]:de},Zx,{conditions:[{fn:Pe,[ee]:[Oe,"ca-central-1"]}],endpoint:qe,[V]:de},{conditions:[{fn:Pe,[ee]:[Oe,"eu-central-1"]}],endpoint:qe,[V]:de},{conditions:[{fn:Pe,[ee]:[Oe,"eu-north-1"]}],endpoint:qe,[V]:de},{conditions:[{fn:Pe,[ee]:[Oe,"eu-west-1"]}],endpoint:qe,[V]:de},{conditions:[{fn:Pe,[ee]:[Oe,"eu-west-2"]}],endpoint:qe,[V]:de},{conditions:[{fn:Pe,[ee]:[Oe,"eu-west-3"]}],endpoint:qe,[V]:de},{conditions:[{fn:Pe,[ee]:[Oe,"sa-east-1"]}],endpoint:qe,[V]:de},{conditions:[{fn:Pe,[ee]:[Oe,aR]}],endpoint:qe,[V]:de},{conditions:[{fn:Pe,[ee]:[Oe,"us-east-2"]}],endpoint:qe,[V]:de},{conditions:[{fn:Pe,[ee]:[Oe,"us-west-1"]}],endpoint:qe,[V]:de},{conditions:[{fn:Pe,[ee]:[Oe,"us-west-2"]}],endpoint:qe,[V]:de},{endpoint:{url:Yx,properties:{authSchemes:[{name:iR,signingName:"sts",signingRegion:"{Region}"}]},headers:at},[V]:de}],[V]:Kt},{conditions:rR,rules:[{conditions:nR,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[V]:as},{conditions:oR,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[V]:as},{endpoint:{url:cR,properties:at,headers:at},[V]:de}],[V]:Kt},{conditions:[Qx],rules:[{conditions:[Jx],rules:[{conditions:[dR,fR],rules:[{conditions:[{fn,[ee]:[!0,eR]},tR],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:at,headers:at},[V]:de}],[V]:Kt},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[V]:as}],[V]:Kt},{conditions:nR,rules:[{conditions:[{fn,[ee]:[eR,!0]}],rules:[{conditions:[{fn:Pe,[ee]:[{fn:og,[ee]:[pR,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:at,headers:at},[V]:de},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:at,headers:at},[V]:de}],[V]:Kt},{error:"FIPS is enabled but this partition does not support FIPS",[V]:as}],[V]:Kt},{conditions:oR,rules:[{conditions:[tR],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:at,headers:at},[V]:de}],[V]:Kt},{error:"DualStack is enabled but this partition does not support DualStack",[V]:as}],[V]:Kt},Zx,{endpoint:{url:Yx,properties:at,headers:at},[V]:de}],[V]:Kt}],[V]:Kt},{error:"Invalid Configuration: Missing Region",[V]:as}]},mR=dG});var gR,cs,fG,yR,ER=v(()=>{gR=C(kn()),cs=C(Or());hR();fG=new cs.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),yR=(e,t={})=>fG.get(e,()=>(0,cs.resolveEndpoint)(mR,{endpointParams:e,logger:t.logger}));cs.customEndpointFunctions.aws=gR.awsEndpointFunctions});var SR,_R,pl,ml,wR,vR=v(()=>{Re();Un();Te();SR=C(j()),_R=C(cr()),pl=C(Ae()),ml=C(Ce());rg();ER();wR=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??pl.fromBase64,base64Encoder:e?.base64Encoder??pl.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??yR,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Vx,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Me},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Ct}],logger:e?.logger??new SR.NoOpLogger,protocol:e?.protocol??new Vr({defaultNamespace:"com.amazonaws.sts",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/",version:"2011-06-15"}),serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??_R.parseUrl,utf8Decoder:e?.utf8Decoder??ml.fromUtf8,utf8Encoder:e?.utf8Encoder??ml.toUtf8})});var hl,mn,CR,gl,pn,yl,AR,bR,TR,xR,RR,IR,PR=v(()=>{cu();Re();hl=C(zo()),mn=C(Ze());Te();CR=C(Vo()),gl=C(bt()),pn=C(qt()),yl=C(xr()),AR=C(Wo()),bR=C(Gn());vR();TR=C(j()),xR=C(Qo()),RR=C(j()),IR=e=>{(0,RR.emitWarningIfUnsupportedVersion)(process.version);let t=(0,xR.resolveDefaultsModeConfig)(e),r=()=>t().then(TR.loadConfigsForDefaultMode),n=wR(e);Nr(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,pn.loadConfig)(kr,o),bodyLengthChecker:e?.bodyLengthChecker??AR.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,hl.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:jo.version}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4")||(async i=>await e.credentialDefaultProvider(i?.__config||{})()),signer:new Me},{schemeId:"smithy.api#noAuth",identityProvider:s=>s.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Ct}],maxAttempts:e?.maxAttempts??(0,pn.loadConfig)(gl.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,pn.loadConfig)(mn.NODE_REGION_CONFIG_OPTIONS,{...mn.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:yl.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,pn.loadConfig)({...gl.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||bR.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??CR.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??yl.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,pn.loadConfig)(mn.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,pn.loadConfig)(mn.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,pn.loadConfig)(hl.NODE_APP_ID_CONFIG_OPTIONS,o)}}});var OR,NR,DR=v(()=>{OR=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},NR=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var El,Sl,_l,kR,MR=v(()=>{El=C(zn()),Sl=C(re()),_l=C(j());DR();kR=(e,t)=>{let r=Object.assign((0,El.getAwsRegionExtensionConfiguration)(e),(0,_l.getDefaultExtensionConfiguration)(e),(0,Sl.getHttpHandlerExtensionConfiguration)(e),OR(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,El.resolveAwsRegionExtensionConfiguration)(r),(0,_l.resolveDefaultRuntimeConfig)(r),(0,Sl.resolveHttpHandlerRuntimeConfig)(r),NR(r))}});var wl,BR,FR,vl,UR,LR,$R,Cl,sg,Wt,Pi=v(()=>{wl=C(lo()),BR=C(fo()),FR=C(mo()),vl=C(Ln()),UR=C(Ze());Te();te();LR=C($o()),$R=C(Gt()),Cl=C(bt()),sg=C(j());rg();fl();PR();MR();Wt=class extends sg.Client{constructor(...[r]){let n=IR(r||{});super(n);u(this,"config");this.initConfig=n;let o=Kx(n),s=(0,vl.resolveUserAgentConfig)(o),i=(0,Cl.resolveRetryConfig)(s),a=(0,UR.resolveRegionConfig)(i),c=(0,wl.resolveHostHeaderConfig)(a),l=(0,$R.resolveEndpointConfig)(c),m=Wx(l),p=kR(m,r?.extensions||[]);this.config=p,this.middlewareStack.use(An(this.config)),this.middlewareStack.use((0,vl.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Cl.getRetryPlugin)(this.config)),this.middlewareStack.use((0,LR.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,wl.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,BR.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,FR.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(vn(this.config,{httpAuthSchemeParametersProvider:zx,identityProviderConfigProvider:async h=>new ir({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(Cn(this.config))}destroy(){super.destroy()}}});var HR,et,Al=v(()=>{HR=C(j()),et=class e extends HR.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var Oi,Ni,Di,ki,Mi,Bi,Fi,ig=v(()=>{Al();Oi=class e extends et{constructor(r){super({name:"ExpiredTokenException",$fault:"client",...r});u(this,"name","ExpiredTokenException");u(this,"$fault","client");Object.setPrototypeOf(this,e.prototype)}},Ni=class e extends et{constructor(r){super({name:"MalformedPolicyDocumentException",$fault:"client",...r});u(this,"name","MalformedPolicyDocumentException");u(this,"$fault","client");Object.setPrototypeOf(this,e.prototype)}},Di=class e extends et{constructor(r){super({name:"PackedPolicyTooLargeException",$fault:"client",...r});u(this,"name","PackedPolicyTooLargeException");u(this,"$fault","client");Object.setPrototypeOf(this,e.prototype)}},ki=class e extends et{constructor(r){super({name:"RegionDisabledException",$fault:"client",...r});u(this,"name","RegionDisabledException");u(this,"$fault","client");Object.setPrototypeOf(this,e.prototype)}},Mi=class e extends et{constructor(r){super({name:"IDPRejectedClaimException",$fault:"client",...r});u(this,"name","IDPRejectedClaimException");u(this,"$fault","client");Object.setPrototypeOf(this,e.prototype)}},Bi=class e extends et{constructor(r){super({name:"InvalidIdentityTokenException",$fault:"client",...r});u(this,"name","InvalidIdentityTokenException");u(this,"$fault","client");Object.setPrototypeOf(this,e.prototype)}},Fi=class e extends et{constructor(r){super({name:"IDPCommunicationErrorException",$fault:"client",...r});u(this,"name","IDPCommunicationErrorException");u(this,"$fault","client");Object.setPrototypeOf(this,e.prototype)}}});var pG,mG,hG,gG,yG,EG,ag,SG,_G,wG,vG,cg,CG,qR,AG,bG,TG,xG,RG,IG,PG,OG,GR,jR,NG,DG,kG,MG,BG,FG,zR,UG,LG,VR,$G,WR,HG,qG,ug,GG,jG,zG,VG,WG,KG,YG,XG,QG,JG,Xn,Qn,ZG,Jn,Zn,eo,ej,KR,tj,oe,rj,nj,YR,oj,sj,ij,aj,XR,cj,uj,lj,dj,fj,pj,mj,hj,gj,yj,Ej,QR,Sj,_j,JR,ZR,lg=v(()=>{te();ig();Al();pG="Arn",mG="AccessKeyId",hG="AssumeRole",gG="AssumedRoleId",yG="AssumeRoleRequest",EG="AssumeRoleResponse",ag="AssumedRoleUser",SG="AssumeRoleWithWebIdentity",_G="AssumeRoleWithWebIdentityRequest",wG="AssumeRoleWithWebIdentityResponse",vG="Audience",cg="Credentials",CG="ContextAssertion",qR="DurationSeconds",AG="Expiration",bG="ExternalId",TG="ExpiredTokenException",xG="IDPCommunicationErrorException",RG="IDPRejectedClaimException",IG="InvalidIdentityTokenException",PG="Key",OG="MalformedPolicyDocumentException",GR="Policy",jR="PolicyArns",NG="ProviderArn",DG="ProvidedContexts",kG="ProvidedContextsListType",MG="ProvidedContext",BG="PolicyDescriptorType",FG="ProviderId",zR="PackedPolicySize",UG="PackedPolicyTooLargeException",LG="Provider",VR="RoleArn",$G="RegionDisabledException",WR="RoleSessionName",HG="SecretAccessKey",qG="SubjectFromWebIdentityToken",ug="SourceIdentity",GG="SerialNumber",jG="SessionToken",zG="Tags",VG="TokenCode",WG="TransitiveTagKeys",KG="Tag",YG="Value",XG="WebIdentityToken",QG="arn",JG="accessKeySecretType",Xn="awsQueryError",Qn="client",ZG="clientTokenType",Jn="error",Zn="httpError",eo="message",ej="policyDescriptorListType",KR="smithy.ts.sdk.synthetic.com.amazonaws.sts",tj="tagListType",oe="com.amazonaws.sts",rj=[0,oe,JG,8,0],nj=[0,oe,ZG,8,0],YR=[3,oe,ag,0,[gG,pG],[0,0]],oj=[3,oe,yG,0,[VR,WR,jR,GR,qR,zG,WG,bG,GG,VG,ug,DG],[0,0,()=>QR,0,1,()=>_j,64,0,0,0,0,()=>Sj]],sj=[3,oe,EG,0,[cg,ag,zR,ug],[[()=>XR,0],()=>YR,1,0]],ij=[3,oe,_G,0,[VR,WR,XG,FG,jR,GR,qR],[0,0,[()=>nj,0],0,()=>QR,0,1]],aj=[3,oe,wG,0,[cg,qG,ag,zR,LG,vG,ug],[[()=>XR,0],0,()=>YR,1,0,0,0]],XR=[3,oe,cg,0,[mG,HG,jG,AG],[0,[()=>rj,0],0,4]],cj=[-3,oe,TG,{[Jn]:Qn,[Zn]:400,[Xn]:["ExpiredTokenException",400]},[eo],[0]];H.for(oe).registerError(cj,Oi);uj=[-3,oe,xG,{[Jn]:Qn,[Zn]:400,[Xn]:["IDPCommunicationError",400]},[eo],[0]];H.for(oe).registerError(uj,Fi);lj=[-3,oe,RG,{[Jn]:Qn,[Zn]:403,[Xn]:["IDPRejectedClaim",403]},[eo],[0]];H.for(oe).registerError(lj,Mi);dj=[-3,oe,IG,{[Jn]:Qn,[Zn]:400,[Xn]:["InvalidIdentityToken",400]},[eo],[0]];H.for(oe).registerError(dj,Bi);fj=[-3,oe,OG,{[Jn]:Qn,[Zn]:400,[Xn]:["MalformedPolicyDocument",400]},[eo],[0]];H.for(oe).registerError(fj,Ni);pj=[-3,oe,UG,{[Jn]:Qn,[Zn]:400,[Xn]:["PackedPolicyTooLarge",400]},[eo],[0]];H.for(oe).registerError(pj,Di);mj=[3,oe,BG,0,[QG],[0]],hj=[3,oe,MG,0,[NG,CG],[0,0]],gj=[-3,oe,$G,{[Jn]:Qn,[Zn]:403,[Xn]:["RegionDisabledException",403]},[eo],[0]];H.for(oe).registerError(gj,ki);yj=[3,oe,KG,0,[PG,YG],[0,0]],Ej=[-3,KR,"STSServiceException",0,[],[]];H.for(KR).registerError(Ej,et);QR=[1,oe,ej,0,()=>mj],Sj=[1,oe,kG,0,()=>hj],_j=[1,oe,tj,0,()=>yj],JR=[9,oe,hG,0,()=>oj,()=>sj],ZR=[9,oe,SG,0,()=>ij,()=>aj]});var eI,tI,to,bl=v(()=>{eI=C(Gt()),tI=C(j());fl();lg();to=class extends tI.Command.classBuilder().ep(dl).m(function(t,r,n,o){return[(0,eI.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").sc(JR).build(){}});var rI,nI,ro,Tl=v(()=>{rI=C(Gt()),nI=C(j());fl();lg();ro=class extends nI.Command.classBuilder().ep(dl).m(function(t,r,n,o){return[(0,rI.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").sc(ZR).build(){}});var oI,wj,xl,sI=v(()=>{oI=C(j());bl();Tl();Pi();wj={AssumeRoleCommand:to,AssumeRoleWithWebIdentityCommand:ro},xl=class extends Wt{};(0,oI.createAggregatedClient)(wj,xl)});var iI=v(()=>{bl();Tl()});var aI,cI,uI,lI,dI,fI,pI=v(()=>{dt();aI=C(zn());bl();Tl();cI=e=>{if(typeof e?.Arn=="string"){let t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},uI=async(e,t,r,n={})=>{let o=typeof e=="function"?await e():e,s=typeof t=="function"?await t():t,i=await(0,aI.stsRegionDefaultResolver)(n)();return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${o} (credential provider clientConfig)`,`${s} (contextual client)`,`${i} (STS default: AWS_REGION, profile region, or us-east-1)`),o??s??i},lI=(e,t)=>{let r,n;return async(o,s)=>{if(n=o,!r){let{logger:m=e?.parentClientConfig?.logger,profile:p=e?.parentClientConfig?.profile,region:h,requestHandler:g=e?.parentClientConfig?.requestHandler,credentialProviderLogger:S,userAgentAppId:b=e?.parentClientConfig?.userAgentAppId}=e,x=await uI(h,e?.parentClientConfig?.region,S,{logger:m,profile:p}),T=!fI(g);r=new t({...e,userAgentAppId:b,profile:p,credentialDefaultProvider:()=>async()=>n,region:x,requestHandler:T?g:void 0,logger:m})}let{Credentials:i,AssumedRoleUser:a}=await r.send(new to(s));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${s.RoleArn}`);let c=cI(a),l={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...c&&{accountId:c}};return Dr(l,"CREDENTIALS_STS_ASSUME_ROLE","i"),l}},dI=(e,t)=>{let r;return async n=>{if(!r){let{logger:c=e?.parentClientConfig?.logger,profile:l=e?.parentClientConfig?.profile,region:m,requestHandler:p=e?.parentClientConfig?.requestHandler,credentialProviderLogger:h,userAgentAppId:g=e?.parentClientConfig?.userAgentAppId}=e,S=await uI(m,e?.parentClientConfig?.region,h,{logger:c,profile:l}),b=!fI(p);r=new t({...e,userAgentAppId:g,profile:l,region:S,requestHandler:b?p:void 0,logger:c})}let{Credentials:o,AssumedRoleUser:s}=await r.send(new ro(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let i=cI(s),a={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...i&&{accountId:i}};return i&&Dr(a,"RESOLVED_ACCOUNT_ID","T"),Dr(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},fI=e=>e?.metadata?.handlerProtocol==="h2"});var mI,hI,gI,vj,yI=v(()=>{pI();Pi();mI=(e,t)=>t?class extends e{constructor(n){super(n);for(let o of t)this.middlewareStack.use(o)}}:e,hI=(e={},t)=>lI(e,mI(Wt,t)),gI=(e={},t)=>dI(e,mI(Wt,t)),vj=e=>t=>e({roleAssumer:hI(t),roleAssumerWithWebIdentity:gI(t),...t})});var dg={};Ge(dg,{AssumeRoleCommand:()=>to,AssumeRoleWithWebIdentityCommand:()=>ro,ExpiredTokenException:()=>Oi,IDPCommunicationErrorException:()=>Fi,IDPRejectedClaimException:()=>Mi,InvalidIdentityTokenException:()=>Bi,MalformedPolicyDocumentException:()=>Ni,PackedPolicyTooLargeException:()=>Di,RegionDisabledException:()=>ki,STS:()=>xl,STSClient:()=>Wt,STSServiceException:()=>et,__Client:()=>sg.Client,decorateDefaultCredentialProvider:()=>vj,getDefaultRoleAssumer:()=>hI,getDefaultRoleAssumerWithWebIdentity:()=>gI});var fg=v(()=>{Pi();sI();iI();ig();yI();Al()});var hg=I(EI=>{"use strict";var mg=Ht(),pg=Be(),Cj=require("child_process"),Aj=require("util"),bj=(dt(),K(ur)),Tj=(e,t,r)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let s=new Date;if(new Date(t.Expiration)<s)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let n=t.AccountId;!n&&r?.[e]?.aws_account_id&&(n=r[e].aws_account_id);let o={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...n&&{accountId:n}};return bj.setCredentialFeature(o,"CREDENTIALS_PROCESS","w"),o},xj=async(e,t,r)=>{let n=t[e];if(t[e]){let o=n.credential_process;if(o!==void 0){let s=Aj.promisify(mg.externalDataInterceptor?.getTokenRecord?.().exec??Cj.exec);try{let{stdout:i}=await s(o),a;try{a=JSON.parse(i.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return Tj(e,a,t)}catch(i){throw new pg.CredentialsProviderError(i.message,{logger:r})}}else throw new pg.CredentialsProviderError(`Profile ${e} did not contain credential_process.`,{logger:r})}else throw new pg.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`,{logger:r})},Rj=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await mg.parseKnownFiles(e);return xj(mg.getProfileName({profile:e.profile??t?.profile}),r,e.logger)};EI.fromProcess=Rj});var gg=I(Yt=>{"use strict";var Ij=Yt&&Yt.__createBinding||(Object.create?(function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]})),Pj=Yt&&Yt.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),Oj=Yt&&Yt.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n=e(t),o=0;o<n.length;o++)n[o]!=="default"&&Ij(r,t,n[o]);return Pj(r,t),r}})();Object.defineProperty(Yt,"__esModule",{value:!0});Yt.fromWebToken=void 0;var Nj=e=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:n,webIdentityToken:o,providerId:s,policyArns:i,policy:a,durationSeconds:c}=e,{roleAssumerWithWebIdentity:l}=e;if(!l){let{getDefaultRoleAssumerWithWebIdentity:m}=await Promise.resolve().then(()=>Oj((fg(),K(dg))));l=m({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return l({RoleArn:r,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:o,ProviderId:s,PolicyArns:i,Policy:a,DurationSeconds:c})};Yt.fromWebToken=Nj});var _I=I(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.fromTokenFile=void 0;var Dj=(dt(),K(ur)),kj=Be(),Mj=Ht(),Bj=require("fs"),Fj=gg(),SI="AWS_WEB_IDENTITY_TOKEN_FILE",Uj="AWS_ROLE_ARN",Lj="AWS_ROLE_SESSION_NAME",$j=(e={})=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=e?.webIdentityTokenFile??process.env[SI],n=e?.roleArn??process.env[Uj],o=e?.roleSessionName??process.env[Lj];if(!r||!n)throw new kj.CredentialsProviderError("Web identity configuration not specified",{logger:e.logger});let s=await(0,Fj.fromWebToken)({...e,webIdentityToken:Mj.externalDataInterceptor?.getTokenRecord?.()[r]??(0,Bj.readFileSync)(r,{encoding:"ascii"}),roleArn:n,roleSessionName:o})(t);return r===process.env[SI]&&(0,Dj.setCredentialFeature)(s,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),s};Rl.fromTokenFile=$j});var yg=I(Ui=>{"use strict";var wI=_I(),vI=gg();Object.keys(wI).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ui,e)&&Object.defineProperty(Ui,e,{enumerable:!0,get:function(){return wI[e]}})});Object.keys(vI).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ui,e)&&Object.defineProperty(Ui,e,{enumerable:!0,get:function(){return vI[e]}})})});var RI=I(xI=>{"use strict";var Sg=Ht(),Li=Be(),Sr=(dt(),K(ur)),Hj=jx(),qj=(e,t,r)=>{let n={EcsContainer:async o=>{let{fromHttp:s}=await Promise.resolve().then(()=>C(mh())),{fromContainerMetadata:i}=await Promise.resolve().then(()=>C(Qs()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>Li.chain(s(o??{}),i(o))().then(Eg)},Ec2InstanceMetadata:async o=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:s}=await Promise.resolve().then(()=>C(Qs()));return async()=>s(o)().then(Eg)},Environment:async o=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:s}=await Promise.resolve().then(()=>C(ih()));return async()=>s(o)().then(Eg)}};if(e in n)return n[e];throw new Li.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},Eg=e=>Sr.setCredentialFeature(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),Gj=(e,{profile:t="default",logger:r}={})=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(jj(e,{profile:t,logger:r})||zj(e,{profile:t,logger:r})),jj=(e,{profile:t,logger:r})=>{let n=typeof e.source_profile=="string"&&typeof e.credential_source>"u";return n&&r?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),n},zj=(e,{profile:t,logger:r})=>{let n=typeof e.credential_source=="string"&&typeof e.source_profile>"u";return n&&r?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),n},Vj=async(e,t,r,n={},o)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let s=t[e],{source_profile:i,region:a}=s;if(!r.roleAssumer){let{getDefaultRoleAssumer:l}=await Promise.resolve().then(()=>(fg(),dg));r.roleAssumer=l({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...r?.parentClientConfig,region:a??r?.parentClientConfig?.region}},r.clientPlugins)}if(i&&i in n)throw new Li.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${Sg.getProfileName(r)}. Profiles visited: `+Object.keys(n).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${i?`source_profile=[${i}]`:`profile=[${e}]`}`);let c=i?o(i,t,r,{...n,[i]:!0},CI(t[i]??{})):(await qj(s.credential_source,e,r.logger)(r))();if(CI(s))return c.then(l=>Sr.setCredentialFeature(l,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let l={RoleArn:s.role_arn,RoleSessionName:s.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:s.external_id,DurationSeconds:parseInt(s.duration_seconds||"3600",10)},{mfa_serial:m}=s;if(m){if(!r.mfaCodeProvider)throw new Li.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});l.SerialNumber=m,l.TokenCode=await r.mfaCodeProvider(m)}let p=await c;return r.roleAssumer(p,l).then(h=>Sr.setCredentialFeature(h,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},CI=e=>!e.role_arn&&!!e.credential_source,Wj=e=>!!(e&&e.login_session),Kj=async(e,t)=>{let r=await Hj.fromLoginCredentials({...t,profile:e})();return Sr.setCredentialFeature(r,"CREDENTIALS_PROFILE_LOGIN","AC")},Yj=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",Xj=async(e,t)=>Promise.resolve().then(()=>C(hg())).then(({fromProcess:r})=>r({...e,profile:t})().then(n=>Sr.setCredentialFeature(n,"CREDENTIALS_PROFILE_PROCESS","v"))),Qj=async(e,t,r={})=>{let{fromSSO:n}=await Promise.resolve().then(()=>C(Uh()));return n({profile:e,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})().then(o=>t.sso_session?Sr.setCredentialFeature(o,"CREDENTIALS_PROFILE_SSO","r"):Sr.setCredentialFeature(o,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},Jj=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),AI=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,bI=async(e,t)=>{t?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return Sr.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},Zj=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,e4=async(e,t)=>Promise.resolve().then(()=>C(yg())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})().then(n=>Sr.setCredentialFeature(n,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),TI=async(e,t,r,n={},o=!1)=>{let s=t[e];if(Object.keys(n).length>0&&AI(s))return bI(s,r);if(o||Gj(s,{profile:e,logger:r.logger}))return Vj(e,t,r,n,TI);if(AI(s))return bI(s,r);if(Zj(s))return e4(s,r);if(Yj(s))return Xj(r,e);if(Jj(s))return await Qj(e,s,r);if(Wj(s))return Kj(e,r);throw new Li.CredentialsProviderError(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})},t4=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let n=await Sg.parseKnownFiles(r);return TI(Sg.getProfileName({profile:e.profile??t?.profile}),n,r)};xI.fromIni=t4});var NI=I(Il=>{"use strict";var _g=ih(),$i=Be(),r4=Ht(),II="AWS_EC2_METADATA_DISABLED",n4=async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:n,fromInstanceMetadata:o}=await Promise.resolve().then(()=>C(Qs()));if(process.env[r]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:s}=await Promise.resolve().then(()=>C(mh()));return $i.chain(s(e),n(e))}return process.env[II]&&process.env[II]!=="false"?async()=>{throw new $i.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),o(e))};function o4(e,t){let r=s4(e),n,o,s,i=async a=>{if(a?.forceRefresh)return await r(a);if(s?.expiration&&s?.expiration?.getTime()<Date.now()&&(s=void 0),n)await n;else if(!s||t?.(s))if(s)o||(o=r(a).then(c=>{s=c,o=void 0}));else return n=r(a).then(c=>{s=c,n=void 0}),i(a);return s};return i}var s4=e=>async t=>{let r;for(let n of e)try{return await n(t)}catch(o){if(r=o,o?.tryNextLink)continue;throw o}throw r},PI=!1,i4=(e={})=>o4([async()=>{if(e.profile??process.env[r4.ENV_PROFILE])throw process.env[_g.ENV_KEY]&&process.env[_g.ENV_SECRET]&&(PI||((e.logger?.warn&&e.logger?.constructor?.name!=="NoOpLogger"?e.logger.warn.bind(e.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),PI=!0)),new $i.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),_g.fromEnv(e)()},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:o,ssoRoleName:s,ssoSession:i}=e;if(!r&&!n&&!o&&!s&&!i)throw new $i.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});let{fromSSO:a}=await Promise.resolve().then(()=>C(Uh()));return a(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>C(RI()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>C(hg()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>C(yg()));return r(e)(t)},async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await n4(e))()),async()=>{throw new $i.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})}],OI),a4=e=>e?.expiration!==void 0,OI=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;Il.credentialsTreatedAsExpired=OI;Il.credentialsWillNeedRefresh=a4;Il.defaultProvider=i4});var kI=I(DI=>{"use strict";var c4=Lc(),Pl=require("stream"),wg=class extends Pl.Transform{constructor(r){super({autoDestroy:!0,readableObjectMode:!0,writableObjectMode:!0,...r});u(this,"priorSignature");u(this,"messageSigner");u(this,"eventStreamCodec");u(this,"systemClockOffsetProvider");this.priorSignature=r.priorSignature,this.eventStreamCodec=r.eventStreamCodec,this.messageSigner=r.messageSigner,this.systemClockOffsetProvider=r.systemClockOffsetProvider}async _transform(r,n,o){try{let s=new Date(Date.now()+await this.systemClockOffsetProvider()),i={":date":{type:"timestamp",value:s}},a=await this.messageSigner.sign({message:{body:r,headers:i},priorSignature:this.priorSignature},{signingDate:s});this.priorSignature=a.signature;let c=this.eventStreamCodec.encode({headers:{...i,":chunk-signature":{type:"binary",value:u4(a.signature)}},body:r});return this.push(c),o()}catch(s){o(s)}}};function u4(e){let t=Buffer.from(e,"hex");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)}var vg=class{constructor(t){u(this,"messageSigner");u(this,"eventStreamCodec");u(this,"systemClockOffsetProvider");this.messageSigner=t.messageSigner,this.eventStreamCodec=new c4.EventStreamCodec(t.utf8Encoder,t.utf8Decoder),this.systemClockOffsetProvider=async()=>t.systemClockOffset??0}async handle(t,r,n={}){let o=r.request,{body:s,query:i}=o;if(!(s instanceof Pl.Readable))throw new Error("Eventstream payload must be a Readable stream.");let a=s;o.body=new Pl.PassThrough({objectMode:!0});let l=o.headers?.authorization?.match(/Signature=([\w]+)$/)?.[1]??i?.["X-Amz-Signature"]??"",m=new wg({priorSignature:l,eventStreamCodec:this.eventStreamCodec,messageSigner:await this.messageSigner(),systemClockOffsetProvider:this.systemClockOffsetProvider});Pl.pipeline(a,m,o.body,h=>{if(h)throw h});let p;try{p=await t(r)}catch(h){throw o.body.end(),h}return p}},l4=e=>new vg(e);DI.eventStreamPayloadHandlerProvider=l4});var MI=I(Cg=>{"use strict";var d4=Bm(),f4=require("stream");async function*p4(e){let t=!1,r=!1,n=new Array;for(e.on("error",o=>{if(t||(t=!0),o)throw o}),e.on("data",o=>{n.push(o)}),e.on("end",()=>{t=!0});!r;){let o=await new Promise(s=>setTimeout(()=>s(n.shift()),0));o&&(yield o),r=t&&n.length===0}}var Ol=class{constructor({utf8Encoder:t,utf8Decoder:r}){u(this,"universalMarshaller");this.universalMarshaller=new d4.EventStreamMarshaller({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){let n=typeof t[Symbol.asyncIterator]=="function"?t:p4(t);return this.universalMarshaller.deserialize(n,r)}serialize(t,r){return f4.Readable.from(this.universalMarshaller.serialize(t,r))}},m4=e=>new Ol(e);Cg.EventStreamMarshaller=Ol;Cg.eventStreamSerdeProvider=m4});var YI=I(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.ruleSet=void 0;var VI="required",Qt="fn",Jt="argv",ls="ref",BI=!0,FI="isSet",qi="booleanEquals",us="error",Hi="endpoint",Xe="tree",Ag="PartitionResult",UI={[VI]:!1,type:"string"},LI={[VI]:!0,default:!1,type:"boolean"},$I={[ls]:"Endpoint"},WI={[Qt]:qi,[Jt]:[{[ls]:"UseFIPS"},!0]},KI={[Qt]:qi,[Jt]:[{[ls]:"UseDualStack"},!0]},Xt={},HI={[Qt]:"getAttr",[Jt]:[{[ls]:Ag},"supportsFIPS"]},qI={[Qt]:qi,[Jt]:[!0,{[Qt]:"getAttr",[Jt]:[{[ls]:Ag},"supportsDualStack"]}]},GI=[WI],jI=[KI],zI=[{[ls]:"Region"}],h4={version:"1.0",parameters:{Region:UI,UseDualStack:LI,UseFIPS:LI,Endpoint:UI},rules:[{conditions:[{[Qt]:FI,[Jt]:[$I]}],rules:[{conditions:GI,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:us},{rules:[{conditions:jI,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:us},{endpoint:{url:$I,properties:Xt,headers:Xt},type:Hi}],type:Xe}],type:Xe},{rules:[{conditions:[{[Qt]:FI,[Jt]:zI}],rules:[{conditions:[{[Qt]:"aws.partition",[Jt]:zI,assign:Ag}],rules:[{conditions:[WI,KI],rules:[{conditions:[{[Qt]:qi,[Jt]:[BI,HI]},qI],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Xt,headers:Xt},type:Hi}],type:Xe}],type:Xe},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:us}],type:Xe},{conditions:GI,rules:[{conditions:[{[Qt]:qi,[Jt]:[HI,BI]}],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Xt,headers:Xt},type:Hi}],type:Xe}],type:Xe},{error:"FIPS is enabled but this partition does not support FIPS",type:us}],type:Xe},{conditions:jI,rules:[{conditions:[qI],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Xt,headers:Xt},type:Hi}],type:Xe}],type:Xe},{error:"DualStack is enabled but this partition does not support DualStack",type:us}],type:Xe},{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dnsSuffix}",properties:Xt,headers:Xt},type:Hi}],type:Xe}],type:Xe}],type:Xe},{error:"Invalid Configuration: Missing Region",type:us}],type:Xe}]};Nl.ruleSet=h4});var XI=I(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.defaultEndpointResolver=void 0;var g4=kn(),bg=Or(),y4=YI(),E4=new bg.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),S4=(e,t={})=>E4.get(e,()=>(0,bg.resolveEndpoint)(y4.ruleSet,{endpointParams:e,logger:t.logger}));Dl.defaultEndpointResolver=S4;bg.customEndpointFunctions.aws=g4.awsEndpointFunctions});var ZI=I(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});kl.getRuntimeConfig=void 0;var _4=(Re(),K(Wr)),w4=(Un(),K(vm)),v4=(Te(),K(ar)),C4=j(),A4=cr(),QI=Ae(),JI=Ce(),b4=sh(),T4=XI(),x4=e=>({apiVersion:"2023-09-30",base64Decoder:e?.base64Decoder??QI.fromBase64,base64Encoder:e?.base64Encoder??QI.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??T4.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??b4.defaultBedrockRuntimeHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new _4.AwsSdkSigV4Signer},{schemeId:"smithy.api#httpBearerAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#httpBearerAuth"),signer:new v4.HttpBearerAuthSigner}],logger:e?.logger??new C4.NoOpLogger,protocol:e?.protocol??new w4.AwsRestJsonProtocol({defaultNamespace:"com.amazonaws.bedrockruntime"}),serviceId:e?.serviceId??"Bedrock Runtime",urlParser:e?.urlParser??A4.parseUrl,utf8Decoder:e?.utf8Decoder??JI.fromUtf8,utf8Encoder:e?.utf8Encoder??JI.toUtf8});kl.getRuntimeConfig=x4});var oP=I(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});Bl.getRuntimeConfig=void 0;var R4=(xn(),K(Tn)),I4=R4.__importDefault(zC()),Tg=(Re(),K(Wr)),P4=NI(),O4=kI(),eP=Oh(),tP=zo(),Ml=Ze(),N4=(Te(),K(ar)),D4=MI(),k4=Vo(),rP=bt(),no=qt(),nP=xr(),M4=Wo(),B4=Gn(),F4=ZI(),U4=j(),L4=Qo(),$4=j(),H4=e=>{(0,$4.emitWarningIfUnsupportedVersion)(process.version);let t=(0,L4.resolveDefaultsModeConfig)(e),r=()=>t().then(U4.loadConfigsForDefaultMode),n=(0,F4.getRuntimeConfig)(e);(0,Tg.emitWarningIfUnsupportedVersion)(process.version);let o={profile:e?.profile,logger:n.logger,signingName:"bedrock"};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,no.loadConfig)(Tg.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,o),bodyLengthChecker:e?.bodyLengthChecker??M4.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??P4.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,tP.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:I4.default.version}),eventStreamPayloadHandlerProvider:e?.eventStreamPayloadHandlerProvider??O4.eventStreamPayloadHandlerProvider,eventStreamSerdeProvider:e?.eventStreamSerdeProvider??D4.eventStreamSerdeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4"),signer:new Tg.AwsSdkSigV4Signer},{schemeId:"smithy.api#httpBearerAuth",identityProvider:s=>s.getIdentityProvider("smithy.api#httpBearerAuth")||(async i=>{try{return await(0,eP.fromEnvSigningName)({signingName:"bedrock"})()}catch{return await(0,eP.nodeProvider)(i)(i)}}),signer:new N4.HttpBearerAuthSigner}],maxAttempts:e?.maxAttempts??(0,no.loadConfig)(rP.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,no.loadConfig)(Ml.NODE_REGION_CONFIG_OPTIONS,{...Ml.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:nP.NodeHttp2Handler.create(e?.requestHandler??(async()=>({...await r(),disableConcurrentStreams:!0}))),retryMode:e?.retryMode??(0,no.loadConfig)({...rP.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||B4.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??k4.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??nP.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,no.loadConfig)(Ml.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,no.loadConfig)(Ml.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,no.loadConfig)(tP.NODE_APP_ID_CONFIG_OPTIONS,o)}};Bl.getRuntimeConfig=H4});var sN=I(M=>{"use strict";var EP=yy(),sP=lo(),q4=fo(),G4=mo(),iP=Ln(),SP=$v(),j4=Ze(),Fl=(Te(),K(ar)),tt=(te(),K(Na)),z4=Jv(),V4=$o(),Nt=Gt(),aP=bt(),Ne=j(),cP=sh(),W4=oP(),uP=zn(),lP=re(),K4=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"bedrock"}),Zt={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Y4=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials,o=e.token;return{setHttpAuthScheme(s){let i=t.findIndex(a=>a.schemeId===s.schemeId);i===-1?t.push(s):t.splice(i,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n},setToken(s){o=s},token(){return o}}},X4=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials(),token:e.token()}),Q4=(e,t)=>{let r=Object.assign(uP.getAwsRegionExtensionConfiguration(e),Ne.getDefaultExtensionConfiguration(e),lP.getHttpHandlerExtensionConfiguration(e),Y4(e));return t.forEach(n=>n.configure(r)),Object.assign(e,uP.resolveAwsRegionExtensionConfiguration(r),Ne.resolveDefaultRuntimeConfig(r),lP.resolveHttpHandlerRuntimeConfig(r),X4(r))},Gi=class extends Ne.Client{constructor(...[r]){let n=W4.getRuntimeConfig(r||{});super(n);u(this,"config");this.initConfig=n;let o=K4(n),s=iP.resolveUserAgentConfig(o),i=aP.resolveRetryConfig(s),a=j4.resolveRegionConfig(i),c=sP.resolveHostHeaderConfig(a),l=Nt.resolveEndpointConfig(c),m=z4.resolveEventStreamSerdeConfig(l),p=cP.resolveHttpAuthSchemeConfig(m),h=EP.resolveEventStreamConfig(p),g=SP.resolveWebSocketConfig(h),S=Q4(g,r?.extensions||[]);this.config=S,this.middlewareStack.use(tt.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(iP.getUserAgentPlugin(this.config)),this.middlewareStack.use(aP.getRetryPlugin(this.config)),this.middlewareStack.use(V4.getContentLengthPlugin(this.config)),this.middlewareStack.use(sP.getHostHeaderPlugin(this.config)),this.middlewareStack.use(q4.getLoggerPlugin(this.config)),this.middlewareStack.use(G4.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(Fl.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:cP.defaultBedrockRuntimeHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async b=>new Fl.DefaultIdentityProviderConfig({"aws.auth#sigv4":b.credentials,"smithy.api#httpBearerAuth":b.token})})),this.middlewareStack.use(Fl.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},rt=class _P extends Ne.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,_P.prototype)}},wP=class vP extends rt{constructor(r){super({name:"AccessDeniedException",$fault:"client",...r});u(this,"name","AccessDeniedException");u(this,"$fault","client");Object.setPrototypeOf(this,vP.prototype)}},CP=class AP extends rt{constructor(r){super({name:"InternalServerException",$fault:"server",...r});u(this,"name","InternalServerException");u(this,"$fault","server");Object.setPrototypeOf(this,AP.prototype)}},bP=class TP extends rt{constructor(r){super({name:"ThrottlingException",$fault:"client",...r});u(this,"name","ThrottlingException");u(this,"$fault","client");Object.setPrototypeOf(this,TP.prototype)}},xP=class RP extends rt{constructor(r){super({name:"ValidationException",$fault:"client",...r});u(this,"name","ValidationException");u(this,"$fault","client");Object.setPrototypeOf(this,RP.prototype)}},IP=class PP extends rt{constructor(r){super({name:"ConflictException",$fault:"client",...r});u(this,"name","ConflictException");u(this,"$fault","client");Object.setPrototypeOf(this,PP.prototype)}},OP=class NP extends rt{constructor(r){super({name:"ResourceNotFoundException",$fault:"client",...r});u(this,"name","ResourceNotFoundException");u(this,"$fault","client");Object.setPrototypeOf(this,NP.prototype)}},DP=class kP extends rt{constructor(r){super({name:"ServiceQuotaExceededException",$fault:"client",...r});u(this,"name","ServiceQuotaExceededException");u(this,"$fault","client");Object.setPrototypeOf(this,kP.prototype)}},MP=class BP extends rt{constructor(r){super({name:"ServiceUnavailableException",$fault:"server",...r});u(this,"name","ServiceUnavailableException");u(this,"$fault","server");Object.setPrototypeOf(this,BP.prototype)}},FP=class UP extends rt{constructor(r){super({name:"ModelErrorException",$fault:"client",...r});u(this,"name","ModelErrorException");u(this,"$fault","client");u(this,"originalStatusCode");u(this,"resourceName");Object.setPrototypeOf(this,UP.prototype),this.originalStatusCode=r.originalStatusCode,this.resourceName=r.resourceName}},LP=class $P extends rt{constructor(r){super({name:"ModelNotReadyException",$fault:"client",...r});u(this,"name","ModelNotReadyException");u(this,"$fault","client");u(this,"$retryable",{});Object.setPrototypeOf(this,$P.prototype)}},HP=class qP extends rt{constructor(r){super({name:"ModelTimeoutException",$fault:"client",...r});u(this,"name","ModelTimeoutException");u(this,"$fault","client");Object.setPrototypeOf(this,qP.prototype)}},GP=class jP extends rt{constructor(r){super({name:"ModelStreamErrorException",$fault:"client",...r});u(this,"name","ModelStreamErrorException");u(this,"$fault","client");u(this,"originalStatusCode");u(this,"originalMessage");Object.setPrototypeOf(this,jP.prototype),this.originalStatusCode=r.originalStatusCode,this.originalMessage=r.originalMessage}},J4="Accept",Z4="AccessDeniedException",e6="ApplyGuardrail",t6="AppliedGuardrailDetails",r6="ApplyGuardrailRequest",n6="ApplyGuardrailResponse",o6="AsyncInvokeMessage",s6="AsyncInvokeOutputDataConfig",i6="AsyncInvokeSummary",a6="AsyncInvokeS3OutputDataConfig",c6="AsyncInvokeSummaries",u6="AnyToolChoice",l6="AutoToolChoice",d6="Body",f6="BidirectionalInputPayloadPart",p6="BidirectionalOutputPayloadPart",m6="Citation",h6="ContentBlocks",g6="ContentBlockDelta",y6="ContentBlockDeltaEvent",E6="ContentBlockStart",S6="ContentBlockStartEvent",_6="ContentBlockStopEvent",w6="ContentBlock",v6="CitationsConfig",C6="CitationsContentBlock",A6="CitationsDelta",b6="ConflictException",T6="CitationGeneratedContent",x6="CitationGeneratedContentList",R6="CitationLocation",I6="ConverseMetrics",P6="ConverseOutput",O6="CachePointBlock",N6="ConverseRequest",D6="ConverseResponse",k6="ConverseStream",M6="CitationSourceContent",B6="CitationSourceContentDelta",F6="CitationSourceContentList",U6="CitationSourceContentListDelta",L6="ConverseStreamMetrics",$6="ConverseStreamMetadataEvent",H6="ConverseStreamOutput",q6="ConverseStreamRequest",G6="ConverseStreamResponse",j6="ConverseStreamTrace",z6="ConverseTrace",V6="CountTokensInput",W6="ConverseTokensRequest",K6="CountTokensRequest",Y6="CountTokensResponse",Rg="Content-Type",X6="CountTokens",Q6="Citations",J6="Converse",Z6="DocumentBlock",ez="DocumentContentBlocks",tz="DocumentContentBlock",rz="DocumentCharLocation",nz="DocumentChunkLocation",oz="DocumentPageLocation",sz="DocumentSource",iz="GuardrailAssessment",az="GetAsyncInvoke",cz="GetAsyncInvokeRequest",uz="GetAsyncInvokeResponse",lz="GuardrailAssessmentList",dz="GuardrailAssessmentListMap",fz="GuardrailAssessmentMap",pz="GuardrailAutomatedReasoningDifferenceScenarioList",mz="GuardrailAutomatedReasoningFinding",hz="GuardrailAutomatedReasoningFindingList",gz="GuardrailAutomatedReasoningImpossibleFinding",yz="GuardrailAutomatedReasoningInvalidFinding",Ez="GuardrailAutomatedReasoningInputTextReference",Sz="GuardrailAutomatedReasoningInputTextReferenceList",_z="GuardrailAutomatedReasoningLogicWarning",wz="GuardrailAutomatedReasoningNoTranslationsFinding",vz="GuardrailAutomatedReasoningPolicyAssessment",Cz="GuardrailAutomatedReasoningRule",Az="GuardrailAutomatedReasoningRuleList",bz="GuardrailAutomatedReasoningScenario",Tz="GuardrailAutomatedReasoningSatisfiableFinding",xz="GuardrailAutomatedReasoningStatementList",Rz="GuardrailAutomatedReasoningStatementLogicContent",Iz="GuardrailAutomatedReasoningStatementNaturalLanguageContent",Pz="GuardrailAutomatedReasoningStatement",Oz="GuardrailAutomatedReasoningTranslation",Nz="GuardrailAutomatedReasoningTranslationAmbiguousFinding",Dz="GuardrailAutomatedReasoningTooComplexFinding",kz="GuardrailAutomatedReasoningTranslationList",Mz="GuardrailAutomatedReasoningTranslationOption",Bz="GuardrailAutomatedReasoningTranslationOptionList",Fz="GuardrailAutomatedReasoningValidFinding",Uz="GuardrailConfiguration",Lz="GuardrailContentBlock",$z="GuardrailContentBlockList",Hz="GuardrailConverseContentBlock",qz="GuardrailContentFilter",Gz="GuardrailContentFilterList",jz="GuardrailContextualGroundingFilter",zz="GuardrailContextualGroundingFilters",Vz="GuardrailContextualGroundingPolicyAssessment",Wz="GuardrailConverseImageBlock",Kz="GuardrailConverseImageSource",Yz="GuardrailContentPolicyAssessment",Xz="GuardrailConverseTextBlock",Qz="GuardrailCustomWord",Jz="GuardrailCustomWordList",Zz="GuardrailCoverage",eV="GuardrailImageBlock",tV="GuardrailImageCoverage",rV="GuardrailInvocationMetrics",nV="GuardrailImageSource",oV="GuardrailManagedWord",sV="GuardrailManagedWordList",iV="GuardrailOutputContent",aV="GuardrailOutputContentList",cV="GuardrailPiiEntityFilter",uV="GuardrailPiiEntityFilterList",lV="GuardrailRegexFilter",dV="GuardrailRegexFilterList",fV="GuardrailStreamConfiguration",pV="GuardrailSensitiveInformationPolicyAssessment",mV="GuardrailTopic",hV="GuardrailTraceAssessment",gV="GuardrailTextBlock",yV="GuardrailTextCharactersCoverage",EV="GuardrailTopicList",SV="GuardrailTopicPolicyAssessment",_V="GuardrailUsage",wV="GuardrailWordPolicyAssessment",vV="ImageBlock",CV="InferenceConfiguration",AV="InvokeModel",bV="InvokeModelRequest",TV="InvokeModelResponse",xV="InvokeModelTokensRequest",RV="InvokeModelWithBidirectionalStream",IV="InvokeModelWithBidirectionalStreamInput",PV="InvokeModelWithBidirectionalStreamOutput",OV="InvokeModelWithBidirectionalStreamRequest",NV="InvokeModelWithBidirectionalStreamResponse",DV="InvokeModelWithResponseStream",kV="InvokeModelWithResponseStreamRequest",MV="InvokeModelWithResponseStreamResponse",BV="ImageSource",FV="InternalServerException",UV="ListAsyncInvokes",LV="ListAsyncInvokesRequest",$V="ListAsyncInvokesResponse",HV="Message",qV="ModelErrorException",GV="ModelInputPayload",jV="ModelNotReadyException",zV="MessageStartEvent",VV="ModelStreamErrorException",WV="MessageStopEvent",KV="ModelTimeoutException",YV="Messages",XV="PartBody",QV="PerformanceConfiguration",JV="PayloadPart",ZV="PromptRouterTrace",e8="PromptVariableMap",t8="PromptVariableValues",r8="ReasoningContentBlock",n8="ReasoningContentBlockDelta",o8="RequestMetadata",s8="ResourceNotFoundException",i8="ResponseStream",a8="ReasoningTextBlock",c8="StartAsyncInvoke",u8="StartAsyncInvokeRequest",l8="StartAsyncInvokeResponse",d8="SystemContentBlocks",f8="SystemContentBlock",p8="S3Location",m8="ServiceQuotaExceededException",h8="SearchResultBlock",g8="SearchResultContentBlock",y8="SearchResultContentBlocks",E8="SearchResultLocation",S8="ServiceTier",_8="SpecificToolChoice",w8="SystemTool",v8="ServiceUnavailableException",C8="Tag",A8="ToolConfiguration",b8="ToolChoice",T8="ThrottlingException",x8="ToolInputSchema",R8="TagList",I8="ToolResultBlock",P8="ToolResultBlocksDelta",O8="ToolResultBlockDelta",N8="ToolResultBlockStart",D8="ToolResultContentBlocks",k8="ToolResultContentBlock",M8="ToolSpecification",B8="TokenUsage",F8="ToolUseBlock",U8="ToolUseBlockDelta",L8="ToolUseBlockStart",$8="Tools",H8="Tool",q8="VideoBlock",G8="ValidationException",j8="VideoSource",z8="WebLocation",V8="X-Amzn-Bedrock-Accept",W8="X-Amzn-Bedrock-Content-Type",zP="X-Amzn-Bedrock-GuardrailIdentifier",VP="X-Amzn-Bedrock-GuardrailVersion",Yl="X-Amzn-Bedrock-PerformanceConfig-Latency",Xl="X-Amzn-Bedrock-Service-Tier",WP="X-Amzn-Bedrock-Trace",hn="action",K8="appliedGuardrailDetails",Y8="asyncInvokeSummaries",Ig="additionalModelRequestFields",KP="additionalModelResponseFieldPaths",YP="additionalModelResponseFields",XP="actionReason",X8="automatedReasoningPolicy",Q8="automatedReasoningPolicyUnits",J8="automatedReasoningPolicies",QP="accept",Z8="any",e5="assessments",t5="auto",gn="bytes",JP="bucketOwner",so="body",er="client",r5="contentBlockDelta",Pg="contentBlockIndex",n5="contentBlockStart",o5="contentBlockStop",s5="citationsContent",i5="claimsFalseScenario",a5="contextualGroundingPolicy",c5="contextualGroundingPolicyUnits",u5="contentPolicy",l5="contentPolicyImageUnits",d5="contentPolicyUnits",Og="cachePoint",ZP="contradictingRules",f5="cacheReadInputTokens",Ng="clientRequestToken",Ql="contentType",eO="claimsTrueScenario",p5="customWords",m5="cacheWriteInputTokens",Dg="chunk",kg="citations",h5="citation",tO="claims",ds="content",g5="context",rO="confidence",y5="converse",E5="delta",S5="documentChar",_5="documentChunk",Mg="documentIndex",w5="documentPage",v5="differenceScenarios",io="detected",C5="description",A5="domain",nO="document",St="error",oO="endTime",b5="enabled",Jl="end",Vi="format",sO="failureMessage",T5="filterStrength",x5="findings",iO="filters",aO="guardrail",R5="guardrailArn",cO="guardrailCoverage",uO="guardrailConfig",lO="guardContent",I5="guardrailId",Wi="guardrailIdentifier",P5="guardrailOrigin",O5="guardrailOwnership",N5="guardrailProcessingLatency",fs="guardrailVersion",dO="guarded",tr="http",_t="httpError",_e="httpHeader",oo="httpQuery",Bg="input",Zl="invocationArn",D5="inputAssessment",fO="inferenceConfig",k5="invocationMetrics",M5="invokedModelId",B5="invokeModel",F5="inputSchema",Fg="internalServerException",pO="inputTokens",U5="identifier",L5="images",ed="image",$5="impossible",H5="invalid",mO="json",q5="key",G5="kmsKeyId",hO="location",gO="latencyMs",yO="lastModifiedTime",td="logicWarning",j5="latency",z5="logic",ct="message",EO="modelArn",ao="modelId",V5="modelInput",W5="modelOutput",dP="maxResults",K5="messageStart",Ug="modelStreamErrorException",Y5="messageStop",X5="maxTokens",SO="modelTimeoutException",Q5="managedWordLists",rd="match",Lg="messages",_O="metrics",J5="metadata",yn="name",Z5="naturalLanguage",xg="nextToken",eW="noTranslations",tW="outputs",rW="outputAssessments",$g="outputDataConfig",nW="originalMessage",oW="outputScope",wO="originalStatusCode",sW="outputTokens",iW="options",aW="output",vO="premises",nd="performanceConfig",od="performanceConfigLatency",cW="piiEntities",CO="promptRouter",AO="promptVariables",uW="policyVersionArn",bO="qualifiers",lW="regex",TO="reasoningContent",xO="redactedContent",RO="requestMetadata",dW="resourceName",fW="reasoningText",pW="regexes",IO="role",_r="source",fP="sortBy",PO="sourceContent",pP="statusEquals",mW="sensitiveInformationPolicy",hW="sensitiveInformationPolicyFreeUnits",gW="sensitiveInformationPolicyUnits",Hg="s3Location",mP="sortOrder",yW="s3OutputDataConfig",EW="streamProcessingMode",OO="stopReason",SW="searchResultIndex",_W="searchResultLocation",NO="searchResult",wW="supportingRules",vW="stopSequences",DO="submitTime",hP="submitTimeAfter",gP="submitTimeBefore",En="serviceTier",CW="systemTool",AW="s3Uri",qg="serviceUnavailableException",bW="satisfiable",TW="score",kO="server",MO="signature",BO="smithy.ts.sdk.synthetic.com.amazonaws.bedrockruntime",sd="status",Ki="start",xW="statements",RW="stream",id="streaming",Gg="system",wt="type",IW="translationAmbiguous",jg="toolConfig",PW="textCharacters",OW="toolChoice",NW="tooComplex",zg="throttlingException",DW="topicPolicy",kW="topicPolicyUnits",MW="topP",Vg="toolResult",BW="toolSpec",FW="totalTokens",Wg="toolUse",ad="toolUseId",UW="tags",we="text",LW="temperature",$W="threshold",Kg="title",FO="total",HW="tools",qW="tool",GW="topics",ps="trace",cd="translation",jW="translations",ud="usage",zW="untranslatedClaims",VW="untranslatedPremises",WW="uri",KW="url",YW="value",Yg="validationException",XW="valid",UO="video",QW="web",JW="wordPolicy",ZW="wordPolicyUnits",E="com.amazonaws.bedrockruntime",LO=[0,E,o6,8,0],ld=[0,E,d6,8,21],eK=[0,E,Rz,8,0],$O=[0,E,Iz,8,0],tK=[0,E,GV,8,15],Xg=[0,E,XV,8,21],rK=[-3,E,Z4,{[St]:er,[_t]:403},[ct],[0]];tt.TypeRegistry.for(E).registerError(rK,wP);var nK=[3,E,u6,0,[],[]],oK=[3,E,t6,0,[I5,fs,R5,P5,O5],[0,0,0,64,0]],sK=[3,E,r6,0,[Wi,fs,_r,ds,oW],[[0,1],[0,1],0,[()=>iY,0],0]],iK=[3,E,n6,0,[ud,hn,XP,tW,e5,cO],[()=>VO,0,0,()=>dY,[()=>eN,0],()=>jO]],aK=[3,E,a6,0,[AW,G5,JP],[0,0,0]],cK=[3,E,i6,0,[Zl,EO,Ng,sd,sO,DO,yO,oO,$g],[0,0,0,0,[()=>LO,0],5,5,5,()=>oy]],uK=[3,E,l6,0,[],[]],lK=[3,E,f6,8,[gn],[[()=>Xg,0]]],dK=[3,E,p6,8,[gn],[[()=>Xg,0]]],Qg=[3,E,O6,0,[wt],[0]],fK=[3,E,m6,0,[Kg,_r,PO,hO],[0,0,()=>J9,()=>nN]],HO=[3,E,v6,0,[b5],[2]],pK=[3,E,C6,0,[ds,kg],[()=>X9,()=>Q9]],mK=[3,E,A6,0,[Kg,_r,PO,hO],[0,0,()=>Z9,()=>nN]],hK=[3,E,B6,0,[we],[0]],gK=[-3,E,b6,{[St]:er,[_t]:400},[ct],[0]];tt.TypeRegistry.for(E).registerError(gK,IP);var yK=[3,E,y6,0,[E5,Pg],[[()=>bY,0],1]],EK=[3,E,S6,0,[Ki,Pg],[()=>TY,1]],SK=[3,E,_6,0,[Pg],[1]],_K=[3,E,I6,0,[gO],[1]],wK=[3,E,N6,0,[ao,Lg,Gg,fO,jg,uO,Ig,AO,KP,RO,nd,En],[[0,1],[()=>ry,0],[()=>ny,0],()=>KO,()=>ey,()=>YK,15,[()=>tN,0],64,[()=>rN,0],()=>md,()=>hd]],vK=[3,E,D6,0,[aW,OO,ud,_O,YP,ps,nd,En],[[()=>xY,0],0,()=>JO,()=>_K,15,[()=>IK,0],()=>md,()=>hd]],CK=[3,E,$6,0,[ud,_O,ps,nd,En],[()=>JO,()=>AK,[()=>xK,0],()=>md,()=>hd]],AK=[3,E,L6,0,[gO],[1]],bK=[3,E,q6,0,[ao,Lg,Gg,fO,jg,uO,Ig,AO,KP,RO,nd,En],[[0,1],[()=>ry,0],[()=>ny,0],()=>KO,()=>ey,()=>d9,15,[()=>tN,0],64,[()=>rN,0],()=>md,()=>hd]],TK=[3,E,G6,0,[RW],[[()=>RY,16]]],xK=[3,E,j6,0,[aO,CO],[[()=>zO,0],()=>XO]],RK=[3,E,W6,0,[Lg,Gg,jg,Ig],[[()=>ry,0],[()=>ny,0],()=>ey,15]],IK=[3,E,z6,0,[aO,CO],[[()=>zO,0],()=>XO]],PK=[3,E,K6,0,[ao,Bg],[[0,1],[()=>IY,0]]],OK=[3,E,Y6,0,[pO],[1]],qO=[3,E,Z6,0,[Vi,yn,_r,g5,kg],[0,0,()=>OY,0,()=>HO]],NK=[3,E,rz,0,[Mg,Ki,Jl],[1,1,1]],DK=[3,E,nz,0,[Mg,Ki,Jl],[1,1,1]],kK=[3,E,oz,0,[Mg,Ki,Jl],[1,1,1]],MK=[3,E,cz,0,[Zl],[[0,1]]],BK=[3,E,uz,0,[Zl,EO,Ng,sd,sO,DO,yO,oO,$g],[0,0,0,0,[()=>LO,0],5,5,5,()=>oy]],GO=[3,E,iz,0,[DW,u5,JW,mW,a5,X8,k5,K8],[()=>h9,()=>QK,()=>g9,()=>l9,()=>ZK,[()=>HK,0],()=>s9,()=>oK]],FK=[3,E,gz,0,[cd,ZP,td],[[()=>Yi,0],()=>ty,[()=>dd,0]]],UK=[3,E,Ez,0,[we],[[()=>$O,0]]],LK=[3,E,yz,0,[cd,ZP,td],[[()=>Yi,0],()=>ty,[()=>dd,0]]],dd=[3,E,_z,0,[wt,vO,tO],[0,[()=>ji,0],[()=>ji,0]]],$K=[3,E,wz,0,[],[]],HK=[3,E,vz,0,[x5],[[()=>nY,0]]],qK=[3,E,Cz,0,[U5,uW],[0,0]],GK=[3,E,Tz,0,[cd,eO,i5,td],[[()=>Yi,0],[()=>Ul,0],[()=>Ul,0],[()=>dd,0]]],Ul=[3,E,bz,0,[xW],[[()=>ji,0]]],jK=[3,E,Pz,0,[z5,Z5],[[()=>eK,0],[()=>$O,0]]],zK=[3,E,Dz,0,[],[]],Yi=[3,E,Oz,0,[vO,tO,VW,zW,rO],[[()=>ji,0],[()=>ji,0],[()=>yP,0],[()=>yP,0],1]],VK=[3,E,Nz,0,[iW,v5],[[()=>sY,0],[()=>rY,0]]],WK=[3,E,Mz,0,[jW],[[()=>oY,0]]],KK=[3,E,Fz,0,[cd,eO,wW,td],[[()=>Yi,0],[()=>Ul,0],()=>ty,[()=>dd,0]]],YK=[3,E,Uz,0,[Wi,fs,ps],[0,0,0]],XK=[3,E,qz,0,[wt,rO,T5,hn,io],[0,0,0,0,2]],QK=[3,E,Yz,0,[iO],[()=>aY]],JK=[3,E,jz,0,[wt,$W,TW,hn,io],[0,1,1,0,2]],ZK=[3,E,Vz,0,[iO],[()=>cY]],e9=[3,E,Wz,8,[Vi,_r],[0,[()=>kY,0]]],t9=[3,E,Xz,0,[we,bO],[0,64]],jO=[3,E,Zz,0,[PW,L5],[()=>p9,()=>o9]],r9=[3,E,Qz,0,[rd,hn,io],[0,0,2]],n9=[3,E,eV,8,[Vi,_r],[0,[()=>MY,0]]],o9=[3,E,tV,0,[dO,FO],[1,1]],s9=[3,E,rV,0,[N5,ud,cO],[1,()=>VO,()=>jO]],i9=[3,E,oV,0,[rd,wt,hn,io],[0,0,0,2]],a9=[3,E,iV,0,[we],[0]],c9=[3,E,cV,0,[rd,wt,hn,io],[0,0,0,2]],u9=[3,E,lV,0,[yn,rd,lW,hn,io],[0,0,0,0,2]],l9=[3,E,pV,0,[cW,pW],[()=>fY,()=>pY]],d9=[3,E,fV,0,[Wi,fs,ps,EW],[0,0,0,0]],f9=[3,E,gV,0,[we,bO],[0,64]],p9=[3,E,yV,0,[dO,FO],[1,1]],m9=[3,E,mV,0,[yn,wt,hn,io],[0,0,0,2]],h9=[3,E,SV,0,[GW],[()=>mY]],zO=[3,E,hV,0,[W5,D5,rW,XP],[64,[()=>wY,0],[()=>_Y,0],0]],VO=[3,E,_V,0,[kW,d5,ZW,gW,hW,c5,l5,Q8,J8],[1,1,1,1,1,1,1,1,1]],g9=[3,E,wV,0,[p5,Q5],[()=>uY,()=>lY]],WO=[3,E,vV,0,[Vi,_r],[0,()=>BY]],KO=[3,E,CV,0,[X5,LW,MW,vW],[1,1,1,64]],fd=[-3,E,FV,{[St]:kO,[_t]:500},[ct],[0]];tt.TypeRegistry.for(E).registerError(fd,CP);var y9=[3,E,bV,0,[so,Ql,QP,ao,ps,Wi,fs,od,En],[[()=>ld,16],[0,{[_e]:Rg}],[0,{[_e]:J4}],[0,1],[0,{[_e]:WP}],[0,{[_e]:zP}],[0,{[_e]:VP}],[0,{[_e]:Yl}],[0,{[_e]:Xl}]]],E9=[3,E,TV,0,[so,Ql,od,En],[[()=>ld,16],[0,{[_e]:Rg}],[0,{[_e]:Yl}],[0,{[_e]:Xl}]]],S9=[3,E,xV,0,[so],[[()=>ld,0]]],_9=[3,E,OV,0,[ao,so],[[0,1],[()=>FY,16]]],w9=[3,E,NV,0,[so],[[()=>UY,16]]],v9=[3,E,kV,0,[so,Ql,QP,ao,ps,Wi,fs,od,En],[[()=>ld,16],[0,{[_e]:Rg}],[0,{[_e]:V8}],[0,1],[0,{[_e]:WP}],[0,{[_e]:zP}],[0,{[_e]:VP}],[0,{[_e]:Yl}],[0,{[_e]:Xl}]]],C9=[3,E,MV,0,[so,Ql,od,En],[[()=>qY,16],[0,{[_e]:W8}],[0,{[_e]:Yl}],[0,{[_e]:Xl}]]],A9=[3,E,LV,0,[hP,gP,pP,dP,xg,fP,mP],[[5,{[oo]:hP}],[5,{[oo]:gP}],[0,{[oo]:pP}],[1,{[oo]:dP}],[0,{[oo]:xg}],[0,{[oo]:fP}],[0,{[oo]:mP}]]],b9=[3,E,$V,0,[xg,Y8],[0,[()=>Y9,0]]],YO=[3,E,HV,0,[IO,ds],[0,[()=>eY,0]]],T9=[3,E,zV,0,[IO],[0]],x9=[3,E,WV,0,[OO,YP],[0,15]],R9=[-3,E,qV,{[St]:er,[_t]:424},[ct,wO,dW],[0,1,0]];tt.TypeRegistry.for(E).registerError(R9,FP);var I9=[-3,E,jV,{[St]:er,[_t]:429},[ct],[0]];tt.TypeRegistry.for(E).registerError(I9,LP);var pd=[-3,E,VV,{[St]:er,[_t]:424},[ct,wO,nW],[0,1,0]];tt.TypeRegistry.for(E).registerError(pd,GP);var Jg=[-3,E,KV,{[St]:er,[_t]:408},[ct],[0]];tt.TypeRegistry.for(E).registerError(Jg,HP);var P9=[3,E,JV,8,[gn],[[()=>Xg,0]]],md=[3,E,QV,0,[j5],[0]],XO=[3,E,ZV,0,[M5],[0]],O9=[3,E,a8,8,[we,MO],[0,0]],N9=[-3,E,s8,{[St]:er,[_t]:404},[ct],[0]];tt.TypeRegistry.for(E).registerError(N9,OP);var Zg=[3,E,p8,0,[WW,JP],[0,0]],QO=[3,E,h8,0,[_r,Kg,ds,kg],[0,0,()=>hY,()=>HO]],D9=[3,E,g8,0,[we],[0]],k9=[3,E,E8,0,[SW,Ki,Jl],[1,1,1]],M9=[-3,E,m8,{[St]:er,[_t]:400},[ct],[0]];tt.TypeRegistry.for(E).registerError(M9,DP);var hd=[3,E,S8,0,[wt],[0]],gd=[-3,E,v8,{[St]:kO,[_t]:503},[ct],[0]];tt.TypeRegistry.for(E).registerError(gd,MP);var B9=[3,E,_8,0,[yn],[0]],F9=[3,E,u8,0,[Ng,ao,V5,$g,UW],[[0,4],0,[()=>tK,0],()=>oy,()=>gY]],U9=[3,E,l8,0,[Zl],[0]],L9=[3,E,w8,0,[yn],[0]],$9=[3,E,C8,0,[q5,YW],[0,0]],yd=[-3,E,T8,{[St]:er,[_t]:429},[ct],[0]];tt.TypeRegistry.for(E).registerError(yd,bP);var JO=[3,E,B8,0,[pO,sW,FW,f5,m5],[1,1,1,1,1]],ey=[3,E,A8,0,[HW,OW],[()=>SY,()=>zY]],H9=[3,E,I8,0,[ad,ds,sd,wt],[0,()=>EY,0,0]],q9=[3,E,N8,0,[ad,wt,sd],[0,0,0]],G9=[3,E,M8,0,[yn,C5,F5],[0,0,()=>VY]],j9=[3,E,F8,0,[ad,yn,Bg,wt],[0,0,15,0]],z9=[3,E,U8,0,[Bg],[0]],V9=[3,E,L8,0,[ad,yn,wt],[0,0,0]],Ed=[-3,E,G8,{[St]:er,[_t]:400},[ct],[0]];tt.TypeRegistry.for(E).registerError(Ed,xP);var ZO=[3,E,q8,0,[Vi,_r],[0,()=>YY]],W9=[3,E,z8,0,[KW,A5],[0,0]],K9=[-3,BO,"BedrockRuntimeServiceException",0,[],[]];tt.TypeRegistry.for(BO).registerError(K9,rt);var Y9=[1,E,c6,0,[()=>cK,0]],X9=[1,E,x6,0,()=>vY],Q9=[1,E,Q6,0,()=>fK],J9=[1,E,F6,0,()=>CY],Z9=[1,E,U6,0,()=>hK],eY=[1,E,h6,0,[()=>AY,0]],tY=[1,E,ez,0,()=>PY],eN=[1,E,lz,0,[()=>GO,0]],rY=[1,E,pz,0,[()=>Ul,0]],nY=[1,E,hz,0,[()=>NY,0]],yP=[1,E,Sz,0,[()=>UK,0]],ty=[1,E,Az,0,()=>qK],ji=[1,E,xz,0,[()=>jK,0]],oY=[1,E,kz,0,[()=>Yi,0]],sY=[1,E,Bz,0,[()=>WK,0]],iY=[1,E,$z,0,[()=>DY,0]],aY=[1,E,Gz,0,()=>XK],cY=[1,E,zz,0,()=>JK],uY=[1,E,Jz,0,()=>r9],lY=[1,E,sV,0,()=>i9],dY=[1,E,aV,0,()=>a9],fY=[1,E,uV,0,()=>c9],pY=[1,E,dV,0,()=>u9],mY=[1,E,EV,0,()=>m9],ry=[1,E,YV,0,[()=>YO,0]],hY=[1,E,y8,0,()=>D9],ny=[1,E,d8,0,[()=>GY,0]],gY=[1,E,R8,0,()=>$9],yY=[1,E,P8,0,()=>WY],EY=[1,E,D8,0,()=>KY],SY=[1,E,$8,0,()=>jY],_Y=[2,E,dz,0,[0,0],[()=>eN,0]],wY=[2,E,fz,0,[0,0],[()=>GO,0]],tN=[2,E,e8,8,0,()=>LY],rN=[2,E,o8,8,0,0],oy=[3,E,s6,0,[yW],[()=>aK]],vY=[3,E,T6,0,[we],[0]],nN=[3,E,R6,0,[QW,S5,w5,_5,_W],[()=>W9,()=>NK,()=>kK,()=>DK,()=>k9]],CY=[3,E,M6,0,[we],[0]],AY=[3,E,w6,0,[we,ed,nO,UO,Wg,Vg,lO,Og,TO,s5,NO],[0,()=>WO,()=>qO,()=>ZO,()=>j9,()=>H9,[()=>oN,0],()=>Qg,[()=>$Y,0],()=>pK,()=>QO]],bY=[3,E,g6,0,[we,Wg,Vg,TO,h5],[0,()=>z9,()=>yY,[()=>HY,0],()=>mK]],TY=[3,E,E6,0,[Wg,Vg],[()=>V9,()=>q9]],xY=[3,E,P6,0,[ct],[[()=>YO,0]]],RY=[3,E,H6,{[id]:1},[K5,n5,r5,o5,Y5,J5,Fg,Ug,Yg,zg,qg],[()=>T9,()=>EK,[()=>yK,0],()=>SK,()=>x9,[()=>CK,0],[()=>fd,0],[()=>pd,0],[()=>Ed,0],[()=>yd,0],[()=>gd,0]]],IY=[3,E,V6,0,[B5,y5],[[()=>S9,0],[()=>RK,0]]],PY=[3,E,tz,0,[we],[0]],OY=[3,E,sz,0,[gn,Hg,we,ds],[21,()=>Zg,0,()=>tY]],NY=[3,E,mz,0,[XW,H5,bW,$5,IW,NW,eW],[[()=>KK,0],[()=>LK,0],[()=>GK,0],[()=>FK,0],[()=>VK,0],()=>zK,()=>$K]],DY=[3,E,Lz,0,[we,ed],[()=>f9,[()=>n9,0]]],oN=[3,E,Hz,0,[we,ed],[()=>t9,[()=>e9,0]]],kY=[3,E,Kz,8,[gn],[21]],MY=[3,E,nV,8,[gn],[21]],BY=[3,E,BV,0,[gn,Hg],[21,()=>Zg]],FY=[3,E,IV,{[id]:1},[Dg],[[()=>lK,0]]],UY=[3,E,PV,{[id]:1},[Dg,Fg,Ug,Yg,zg,SO,qg],[[()=>dK,0],[()=>fd,0],[()=>pd,0],[()=>Ed,0],[()=>yd,0],[()=>Jg,0],[()=>gd,0]]],LY=[3,E,t8,0,[we],[0]],$Y=[3,E,r8,8,[fW,xO],[[()=>O9,0],21]],HY=[3,E,n8,8,[we,xO,MO],[0,21,0]],qY=[3,E,i8,{[id]:1},[Dg,Fg,Ug,Yg,zg,SO,qg],[[()=>P9,0],[()=>fd,0],[()=>pd,0],[()=>Ed,0],[()=>yd,0],[()=>Jg,0],[()=>gd,0]]],GY=[3,E,f8,0,[we,lO,Og],[0,[()=>oN,0],()=>Qg]],jY=[3,E,H8,0,[BW,CW,Og],[()=>G9,()=>L9,()=>Qg]],zY=[3,E,b8,0,[t5,Z8,qW],[()=>uK,()=>nK,()=>B9]],VY=[3,E,x8,0,[mO],[15]],WY=[3,E,O8,0,[we],[0]],KY=[3,E,k8,0,[mO,we,ed,nO,UO,NO],[15,0,()=>WO,()=>qO,()=>ZO,()=>QO]],YY=[3,E,j8,0,[gn,Hg],[21,()=>Zg]],XY=[9,E,e6,{[tr]:["POST","/guardrail/{guardrailIdentifier}/version/{guardrailVersion}/apply",200]},()=>sK,()=>iK],QY=[9,E,J6,{[tr]:["POST","/model/{modelId}/converse",200]},()=>wK,()=>vK],JY=[9,E,k6,{[tr]:["POST","/model/{modelId}/converse-stream",200]},()=>bK,()=>TK],ZY=[9,E,X6,{[tr]:["POST","/model/{modelId}/count-tokens",200]},()=>PK,()=>OK],e7=[9,E,az,{[tr]:["GET","/async-invoke/{invocationArn}",200]},()=>MK,()=>BK],t7=[9,E,AV,{[tr]:["POST","/model/{modelId}/invoke",200]},()=>y9,()=>E9],r7=[9,E,RV,{[tr]:["POST","/model/{modelId}/invoke-with-bidirectional-stream",200]},()=>_9,()=>w9],n7=[9,E,DV,{[tr]:["POST","/model/{modelId}/invoke-with-response-stream",200]},()=>v9,()=>C9],o7=[9,E,UV,{[tr]:["GET","/async-invoke",200]},()=>A9,()=>b9],s7=[9,E,c8,{[tr]:["POST","/async-invoke",200]},()=>F9,()=>U9],Ll=class extends Ne.Command.classBuilder().ep(Zt).m(function(t,r,n,o){return[Nt.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ApplyGuardrail",{}).n("BedrockRuntimeClient","ApplyGuardrailCommand").sc(XY).build(){},$l=class extends Ne.Command.classBuilder().ep(Zt).m(function(t,r,n,o){return[Nt.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","Converse",{}).n("BedrockRuntimeClient","ConverseCommand").sc(QY).build(){},Hl=class extends Ne.Command.classBuilder().ep(Zt).m(function(t,r,n,o){return[Nt.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ConverseStream",{eventStream:{output:!0}}).n("BedrockRuntimeClient","ConverseStreamCommand").sc(JY).build(){},ql=class extends Ne.Command.classBuilder().ep(Zt).m(function(t,r,n,o){return[Nt.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","CountTokens",{}).n("BedrockRuntimeClient","CountTokensCommand").sc(ZY).build(){},Gl=class extends Ne.Command.classBuilder().ep(Zt).m(function(t,r,n,o){return[Nt.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","GetAsyncInvoke",{}).n("BedrockRuntimeClient","GetAsyncInvokeCommand").sc(e7).build(){},jl=class extends Ne.Command.classBuilder().ep(Zt).m(function(t,r,n,o){return[Nt.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","InvokeModel",{}).n("BedrockRuntimeClient","InvokeModelCommand").sc(t7).build(){},zl=class extends Ne.Command.classBuilder().ep(Zt).m(function(t,r,n,o){return[Nt.getEndpointPlugin(n,t.getEndpointParameterInstructions()),EP.getEventStreamPlugin(n),SP.getWebSocketPlugin(n,{headerPrefix:"x-amz-bedrock-"})]}).s("AmazonBedrockFrontendService","InvokeModelWithBidirectionalStream",{eventStream:{input:!0,output:!0}}).n("BedrockRuntimeClient","InvokeModelWithBidirectionalStreamCommand").sc(r7).build(){},Vl=class extends Ne.Command.classBuilder().ep(Zt).m(function(t,r,n,o){return[Nt.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","InvokeModelWithResponseStream",{eventStream:{output:!0}}).n("BedrockRuntimeClient","InvokeModelWithResponseStreamCommand").sc(n7).build(){},zi=class extends Ne.Command.classBuilder().ep(Zt).m(function(t,r,n,o){return[Nt.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ListAsyncInvokes",{}).n("BedrockRuntimeClient","ListAsyncInvokesCommand").sc(o7).build(){},Wl=class extends Ne.Command.classBuilder().ep(Zt).m(function(t,r,n,o){return[Nt.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","StartAsyncInvoke",{}).n("BedrockRuntimeClient","StartAsyncInvokeCommand").sc(s7).build(){},i7={ApplyGuardrailCommand:Ll,ConverseCommand:$l,ConverseStreamCommand:Hl,CountTokensCommand:ql,GetAsyncInvokeCommand:Gl,InvokeModelCommand:jl,InvokeModelWithBidirectionalStreamCommand:zl,InvokeModelWithResponseStreamCommand:Vl,ListAsyncInvokesCommand:zi,StartAsyncInvokeCommand:Wl},Kl=class extends Gi{};Ne.createAggregatedClient(i7,Kl);var a7=Fl.createPaginator(Gi,zi,"nextToken","nextToken","maxResults"),c7={COMPLETED:"Completed",FAILED:"Failed",IN_PROGRESS:"InProgress"},u7={SUBMISSION_TIME:"SubmissionTime"},l7={ASCENDING:"Ascending",DESCENDING:"Descending"},d7={JPEG:"jpeg",PNG:"png"},f7={GROUNDING_SOURCE:"grounding_source",GUARD_CONTENT:"guard_content",QUERY:"query"},p7={FULL:"FULL",INTERVENTIONS:"INTERVENTIONS"},m7={INPUT:"INPUT",OUTPUT:"OUTPUT"},h7={GUARDRAIL_INTERVENED:"GUARDRAIL_INTERVENED",NONE:"NONE"},g7={ACCOUNT_ENFORCED:"ACCOUNT_ENFORCED",ORGANIZATION_ENFORCED:"ORGANIZATION_ENFORCED",REQUEST:"REQUEST"},y7={CROSS_ACCOUNT:"CROSS_ACCOUNT",SELF:"SELF"},E7={ALWAYS_FALSE:"ALWAYS_FALSE",ALWAYS_TRUE:"ALWAYS_TRUE"},S7={BLOCKED:"BLOCKED",NONE:"NONE"},_7={HIGH:"HIGH",LOW:"LOW",MEDIUM:"MEDIUM",NONE:"NONE"},w7={HIGH:"HIGH",LOW:"LOW",MEDIUM:"MEDIUM",NONE:"NONE"},v7={HATE:"HATE",INSULTS:"INSULTS",MISCONDUCT:"MISCONDUCT",PROMPT_ATTACK:"PROMPT_ATTACK",SEXUAL:"SEXUAL",VIOLENCE:"VIOLENCE"},C7={BLOCKED:"BLOCKED",NONE:"NONE"},A7={GROUNDING:"GROUNDING",RELEVANCE:"RELEVANCE"},b7={ANONYMIZED:"ANONYMIZED",BLOCKED:"BLOCKED",NONE:"NONE"},T7={ADDRESS:"ADDRESS",AGE:"AGE",AWS_ACCESS_KEY:"AWS_ACCESS_KEY",AWS_SECRET_KEY:"AWS_SECRET_KEY",CA_HEALTH_NUMBER:"CA_HEALTH_NUMBER",CA_SOCIAL_INSURANCE_NUMBER:"CA_SOCIAL_INSURANCE_NUMBER",CREDIT_DEBIT_CARD_CVV:"CREDIT_DEBIT_CARD_CVV",CREDIT_DEBIT_CARD_EXPIRY:"CREDIT_DEBIT_CARD_EXPIRY",CREDIT_DEBIT_CARD_NUMBER:"CREDIT_DEBIT_CARD_NUMBER",DRIVER_ID:"DRIVER_ID",EMAIL:"EMAIL",INTERNATIONAL_BANK_ACCOUNT_NUMBER:"INTERNATIONAL_BANK_ACCOUNT_NUMBER",IP_ADDRESS:"IP_ADDRESS",LICENSE_PLATE:"LICENSE_PLATE",MAC_ADDRESS:"MAC_ADDRESS",NAME:"NAME",PASSWORD:"PASSWORD",PHONE:"PHONE",PIN:"PIN",SWIFT_CODE:"SWIFT_CODE",UK_NATIONAL_HEALTH_SERVICE_NUMBER:"UK_NATIONAL_HEALTH_SERVICE_NUMBER",UK_NATIONAL_INSURANCE_NUMBER:"UK_NATIONAL_INSURANCE_NUMBER",UK_UNIQUE_TAXPAYER_REFERENCE_NUMBER:"UK_UNIQUE_TAXPAYER_REFERENCE_NUMBER",URL:"URL",USERNAME:"USERNAME",US_BANK_ACCOUNT_NUMBER:"US_BANK_ACCOUNT_NUMBER",US_BANK_ROUTING_NUMBER:"US_BANK_ROUTING_NUMBER",US_INDIVIDUAL_TAX_IDENTIFICATION_NUMBER:"US_INDIVIDUAL_TAX_IDENTIFICATION_NUMBER",US_PASSPORT_NUMBER:"US_PASSPORT_NUMBER",US_SOCIAL_SECURITY_NUMBER:"US_SOCIAL_SECURITY_NUMBER",VEHICLE_IDENTIFICATION_NUMBER:"VEHICLE_IDENTIFICATION_NUMBER"},x7={BLOCKED:"BLOCKED",NONE:"NONE"},R7={DENY:"DENY"},I7={BLOCKED:"BLOCKED",NONE:"NONE"},P7={PROFANITY:"PROFANITY"},O7={DISABLED:"disabled",ENABLED:"enabled",ENABLED_FULL:"enabled_full"},N7={DEFAULT:"default"},D7={CSV:"csv",DOC:"doc",DOCX:"docx",HTML:"html",MD:"md",PDF:"pdf",TXT:"txt",XLS:"xls",XLSX:"xlsx"},k7={JPEG:"jpeg",PNG:"png"},M7={GROUNDING_SOURCE:"grounding_source",GUARD_CONTENT:"guard_content",QUERY:"query"},B7={GIF:"gif",JPEG:"jpeg",PNG:"png",WEBP:"webp"},F7={FLV:"flv",MKV:"mkv",MOV:"mov",MP4:"mp4",MPEG:"mpeg",MPG:"mpg",THREE_GP:"three_gp",WEBM:"webm",WMV:"wmv"},U7={ERROR:"error",SUCCESS:"success"},L7={SERVER_TOOL_USE:"server_tool_use"},$7={ASSISTANT:"assistant",USER:"user"},H7={OPTIMIZED:"optimized",STANDARD:"standard"},q7={DEFAULT:"default",FLEX:"flex",PRIORITY:"priority",RESERVED:"reserved"},G7={CONTENT_FILTERED:"content_filtered",END_TURN:"end_turn",GUARDRAIL_INTERVENED:"guardrail_intervened",MAX_TOKENS:"max_tokens",MODEL_CONTEXT_WINDOW_EXCEEDED:"model_context_window_exceeded",STOP_SEQUENCE:"stop_sequence",TOOL_USE:"tool_use"},j7={ASYNC:"async",SYNC:"sync"},z7={DISABLED:"DISABLED",ENABLED:"ENABLED",ENABLED_FULL:"ENABLED_FULL"};Object.defineProperty(M,"$Command",{enumerable:!0,get:function(){return Ne.Command}});Object.defineProperty(M,"__Client",{enumerable:!0,get:function(){return Ne.Client}});M.AccessDeniedException=wP;M.ApplyGuardrailCommand=Ll;M.AsyncInvokeStatus=c7;M.BedrockRuntime=Kl;M.BedrockRuntimeClient=Gi;M.BedrockRuntimeServiceException=rt;M.CachePointType=N7;M.ConflictException=IP;M.ConversationRole=$7;M.ConverseCommand=$l;M.ConverseStreamCommand=Hl;M.CountTokensCommand=ql;M.DocumentFormat=D7;M.GetAsyncInvokeCommand=Gl;M.GuardrailAction=h7;M.GuardrailAutomatedReasoningLogicWarningType=E7;M.GuardrailContentFilterConfidence=_7;M.GuardrailContentFilterStrength=w7;M.GuardrailContentFilterType=v7;M.GuardrailContentPolicyAction=S7;M.GuardrailContentQualifier=f7;M.GuardrailContentSource=m7;M.GuardrailContextualGroundingFilterType=A7;M.GuardrailContextualGroundingPolicyAction=C7;M.GuardrailConverseContentQualifier=M7;M.GuardrailConverseImageFormat=k7;M.GuardrailImageFormat=d7;M.GuardrailManagedWordType=P7;M.GuardrailOrigin=g7;M.GuardrailOutputScope=p7;M.GuardrailOwnership=y7;M.GuardrailPiiEntityType=T7;M.GuardrailSensitiveInformationPolicyAction=b7;M.GuardrailStreamProcessingMode=j7;M.GuardrailTopicPolicyAction=x7;M.GuardrailTopicType=R7;M.GuardrailTrace=O7;M.GuardrailWordPolicyAction=I7;M.ImageFormat=B7;M.InternalServerException=CP;M.InvokeModelCommand=jl;M.InvokeModelWithBidirectionalStreamCommand=zl;M.InvokeModelWithResponseStreamCommand=Vl;M.ListAsyncInvokesCommand=zi;M.ModelErrorException=FP;M.ModelNotReadyException=LP;M.ModelStreamErrorException=GP;M.ModelTimeoutException=HP;M.PerformanceConfigLatency=H7;M.ResourceNotFoundException=OP;M.ServiceQuotaExceededException=DP;M.ServiceTierType=q7;M.ServiceUnavailableException=MP;M.SortAsyncInvocationBy=u7;M.SortOrder=l7;M.StartAsyncInvokeCommand=Wl;M.StopReason=G7;M.ThrottlingException=bP;M.ToolResultStatus=U7;M.ToolUseType=L7;M.Trace=z7;M.ValidationException=xP;M.VideoFormat=F7;M.paginateListAsyncInvokes=a7});var Q7={};Ge(Q7,{handler:()=>X7});module.exports=K(Q7);var vd=C(sN()),co=require("@aws-sdk/lib-dynamodb"),ms=require("encryption"),aN=require("@aws-sdk/client-dynamodb"),cN=require("api-helper"),Sd=process.env.SECRE_KEY_HEX||"",_d=process.env.TABLE_NAME||"",V7=process.env.AWS_REGION_VAR||"eu-central-1",W7=process.env.AWS_BEDROCK_MODEL_ID,K7=process.env.SYSTEM_PROMPT,wd=co.DynamoDBDocument.from(new aN.DynamoDB({})),Y7=new vd.BedrockRuntimeClient({region:V7}),X7=async e=>{for(let t of e.Records){let r=JSON.parse(t.body);console.log("## PROCESSING EVENT:",r);try{if((await wd.send(new co.GetCommand({TableName:_d,Key:{UserId:r.owner_id,SK:`ACTIVITY#${r.object_id}`}}))).Item){console.log(`## ACTIVITY ${r.object_id} EVENT ALREADY PROCESSED FOR USER ${r.owner_id}`);continue}let o=await wd.get({TableName:_d,Key:{UserId:r.owner_id,SK:"METADATA"}}),s,i=Number(o?.Item?.ExpiresAt),a=new Date(i*1e3),c=new Date>a;if(c){let D=(0,ms.decrypt)({encryptedText:o?.Item?.RefreshToken,key:Buffer.from(Sd,"hex")});console.log("## ACCESS TOKEN EXPIRED FETCHING NEW TOKEN");let F=await(0,cN.refreshStravaOAuth)(D);s=F.access_token.toString();let $=(0,ms.encrypt)({text:F.access_token.toString(),key:Buffer.from(Sd,"hex")}),z=(0,ms.encrypt)({text:F.refresh_token.toString(),key:Buffer.from(Sd,"hex")}),me=F.expires_at.toString();await wd.put({TableName:_d,Item:{UserId:co.NumberValue.from(F.athlete.id),SK:"METADATA",AccessToken:$,RefreshToken:z,ExpiresAt:me}})}let l=c?s:(0,ms.decrypt)({encryptedText:o?.Item?.AccessToken,key:Buffer.from(Sd,"hex")});console.log("## USING ACCESS TOKEN:",l),console.log("## ACTIVITY EVENT DETAILS:",r),console.log("## FETCHING ACTIVITY FROM STRAVA");let m=await iN({activityId:r.object_id,method:"GET",token:l});if(!m.ok){let D=await m.text().catch(()=>"");console.log(`Strava activity ${r.object_id} for user ${r.owner_id} fetch error ${m.status}: ${D}`);continue}let p=await m.json();console.log("## STRAVA RESPONSE:",JSON.stringify(p));let h={distance:p.distance,moving_time:p.moving_time,elapsed_time:p.elapsed_time,average_speed:p.average_speed,max_speed:p.max_speed,total_elevation_gain:p.total_elevation_gain,calories:p.calories,start_date_local:p.start_date_local,average_temp:p.average_temp,laps:p.laps,segment_efforts:p.segment_efforts},g={anthropic_version:"bedrock-2023-05-31",system:K7,max_tokens:5e3,messages:[{role:"user",content:[{type:"text",text:JSON.stringify("Riding in the forest for 40 km. going very fast at average speed of 40km/h. It was a sunny day with temperature around 20 Celsius. Please generate a short and engaging description for this activity that I can share with my friends.`")}]}]},S=new vd.InvokeModelCommand({contentType:"application/json",body:JSON.stringify(g),modelId:W7}),b=await Y7.send(S);console.log("## BEDROCK RESPONSE:",b);let x=new TextDecoder().decode(b.body),O=JSON.parse(x).content[0].text;console.log("## GENERATED DESCRIPTION:",O),console.log(`## STORING PROCESSED EVENT ACTIVITY#${r.object_id} IN DYNAMODB`),await wd.put({TableName:_d,Item:{UserId:co.NumberValue.from(p.athlete.id),SK:`ACTIVITY#${r.object_id}`,SportType:p.sport_type,GeneratedDescription:O}}),console.log(`## UPDATING EVENT DESCRIPTION FOR ACTIVITY#${r.object_id} IN STRAVA`),await iN({activityId:r.object_id,body:JSON.stringify({description:O}),method:"PUT",token:l})}catch(n){console.error("## ERROR PROCESSING EVENT:",n);continue}}},iN=async({activityId:e,body:t,method:r,token:n})=>fetch(`https://www.strava.com/api/v3/activities/${e}`,{method:r,headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:t});0&&(module.exports={handler});
