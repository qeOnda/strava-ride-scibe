"use strict";var s=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var w=Object.prototype.hasOwnProperty;var A=(r,e)=>{for(var t in e)s(r,t,{get:e[t],enumerable:!0})},u=(r,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of T(e))!w.call(r,o)&&o!==t&&s(r,o,{get:()=>e[o],enumerable:!(a=S(e,o))||a.enumerable});return r};var p=r=>u(s({},"__esModule",{value:!0}),r);var d={};A(d,{authorizeStravaOAuth:()=>h,refreshStravaOAuth:()=>_});module.exports=p(d);var n=process.env.STRAVA_CLIENT_ID||"",c=process.env.STRAVA_CLIENT_SECRET||"",E=process.env.STRAVA_OAUTH_ENDPOINT||"",i=async r=>fetch(E,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()}),h=async r=>{let e=new URLSearchParams({client_id:n,client_secret:c,code:r,grant_type:"authorization_code"}),t=await i(e),a=await t.json();if(!t.ok){let o=await t.text().catch(()=>"");throw new Error(`Strava error ${t.status}: ${o}`)}return a},_=async r=>{let e=new URLSearchParams({client_id:n,client_secret:c,refresh_token:r,grant_type:"refresh_token"}),t=await i(e),a=await t.json();if(!t.ok){let o=await t.text().catch(()=>"");throw new Error(`Strava error ${t.status}: ${o}`)}return a};0&&(module.exports={authorizeStravaOAuth,refreshStravaOAuth});
